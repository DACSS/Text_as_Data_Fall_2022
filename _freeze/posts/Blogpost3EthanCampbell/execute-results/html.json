{
  "hash": "27fa5e75983669b5f9cfbb9300029eeb",
  "result": {
    "markdown": "---\ntitle: \"Text as Data Final Project\"\nauthor: \"Ethan Campbell\"\ndescription: \"Research into English Premier League and how language changes depending on the season\"\ndate: \"11/16/2022\"\nformat:\n  html:\n    toc: true\n    code-fold: true\n    code-copy: true\n    code-tools: true\ncategories:\n  - Blog Post 2\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nknitr::opts_chunk$set(echo = TRUE)\n```\n:::\n\n\n# Loading Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rvest)\nlibrary(tidyverse)\nlibrary(polite)\nlibrary(stringr)\nlibrary(preText)\nlibrary(quanteda)\nlibrary(quanteda.textplots)\nlibrary(tidytext)\nlibrary(tm)\nlibrary(SentimentAnalysis)\n```\n:::\n\n\n# Data Sources\n\nThere are 6 teams included in this study 2 from the top of the table 2 from the middle and 2 from the bottom. They are already in that order from top to bottom. Data needed to be web scraped from a page called match report. This page was located on each teams official website and this page included information about the match, statistics, and quotes from both the players and the managers. This data will include this current season and all of last season.\n\n[Arsenal Data](https://www.arsenal.com/news?field_article_arsenal_team_value=men&revision_information=&page=1)\n\n[Manchester City Data](https://www.mancity.com/news/mens)\n\n[Newcastle United Data](https://www.nufc.co.uk/matches/first-team/#results)\n\n[Everton Data](https://www.evertonfc.com/results)\n\n[Leicester Data](https://www.lcfc.com/matches/reports)\n\n[West Ham United Data](https://www.whufc.com/fixture/list/713)\n\n# Hypothesis for project\n\n::: callout-note\n## Research Questions\n\nA. Does Premier League soccer teams language change over the course of the season?\n\nB. Does the language grow in correlation to the success of the season?\n:::\n\nThe hypothesis will be tested as follows:\n\n::: callout-tip\n## H~0A~\n\nThe Premier league soccer team language [does not]{.underline} change over the course of the season.\n:::\n\n::: callout-tip\n## H~1A~\n\nThe Premier league soccer team language [does]{.underline} change over the course of the season.\n:::\n\n::: callout-tip\n## H~0A~\n\nThe language [does not]{.underline} correlate to the success of the season.\n:::\n\n::: callout-tip\n## H~1A~\n\nThe language [does]{.underline} correlate to the success of the season.\n:::\n\n# Analytic planning\n\n\n```{mermaid}\nflowchart LR\n  A[Web Scrape] --> B(Preprocess)\n  B --> C[Organize]\n  C --> D(TDM)\n  D --> E[Sentiment Analysis]\n  E --> F[Research Question 1]\n  F --> G{Conclusion}\n  D --> H[DTM]\n  H --> I[Document Similarity]\n  I --> J[Research Question 2]\n  J --> G{Conclusion}\n```\n\n\n# Web Scraping/Tidying data\n\nHere is the beginning of the web scraping process. I was unable to find a way to make the web scraper search for one object then proceed to the next page where you could then scrape whats inside. For the time being I decided to manually web scrape the information. The tidying process is the real issue as there are many unwanted variables inside. For example there are a lot of /n's.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## The function is working at reading in the data however. parts of the cleaning process are failing and I am thinking this is because I am not specifying the create values\n\n# I need to remove punct, capitalization, stopwords like (the, a ',') finish repeating the process to all teams and adjusting the function until it grabs every single problem once this is complete we should be able to tokenize then corpus and work with the data\n\nWeb_scrape_function_Arsenal <- function(url,css,data) { # creating function to repeat web scrape \n  url <- read_html(url) \ncss <- (\".article-body\")\ndata <- url %>% \n  html_node(css = css) %>%\n  html_text2()\n}\n\ntidy_function <- function(data){data <- str_replace_all(data, \"\\n\", \"####\") %>%\n  str_replace_all(\"/n\", \"####\") %>%\n  str_remove_all(\"/n\") %>%\n  str_remove_all(\"\\n\") %>%\n  str_remove_all(\" - \") %>%\n  str_replace_all(\"'\\'\", \"#\") %>%\n  str_replace_all(\"[0-9] of [0-9]To buy official Arsenal pictures visit Arsenal Pics\", \"#\") %>%\n  str_remove(\"WHAT HAPPENED\") %>%\n  str_remove_all(\"[0-9] of 42To buy official Arsenal pictures visit Arsenal Pics\") %>%\n  str_remove_all(\"[0-9] of 29To buy official Arsenal pictures visit Arsenal Pics\") %>%\n  str_remove_all(\"[0-9] of 45To buy official Arsenal pictures visit Arsenal Pics\") %>%\n  str_remove_all(\"[0-9] of 38To buy official Arsenal pictures visit Arsenal Pics\") %>%\n  str_remove_all(\"[0-9] of 32To buy official Arsenal pictures visit Arsenal Pics\") %>%\n  str_remove_all(\"[0-9] of 36To buy official Arsenal pictures visit Arsenal Pics\") %>%\n  str_remove(\"Play videoWatch Arsenal video online05:24Highlights | Crystal Palace 0-2 Arsenal - bitesize\") %>%\n  str_remove(\"111111111122222222223333333333444\") %>%\n  str_remove(\"111111111122222222223333333\") %>%\n  str_remove(\"11111111112222222222\") %>%\n  str_remove_all(\"\\\\(\") %>%\n  str_remove_all(\"\\\\)\") %>%\n  str_replace_all(\"||\", \"#\") %>%\n  str_remove_all(\"'Play videoWatch Arsenal video online02:17Mikel Arteta post-match interview | Crystal Palace 0-2 Arsenal | Premier LeagueArteta: \\'\") %>%\n  str_remove_all(\"\\\"read everything from his press conferencePlay videoWatch Arsenal video online02:07William Saliba post-match interview || Premier LeagueSaliba:\") %>%\n  str_remove_all(\"#\") %>%\n  unlist()\n}\n\n# Running the tidy function twice to clean up certain parts that are getting missed the first time for some reason and this is a temporary fix.\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Aug-05/crystal-palace-0-2-arsenal-match-report\"\nMatch_1 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_1 <- tidy_function(Match_1)\nMatch_1 <- tidy_function(Match_1)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Aug-13/arsenal-4-2-leicester-city-match-report\"\nMatch_2 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_2 <- tidy_function(Match_2)\nMatch_2 <- tidy_function(Match_2)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-bournemouth-odegaard-saliba-jesus\"\nMatch_3 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_3 <- tidy_function(Match_3)\nMatch_3 <- tidy_function(Match_3)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-fulham-odegaard-gabriel\"\nMatch_4 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_4 <- tidy_function(Match_4)\nMatch_4 <- tidy_function(Match_4)\nArsenal_url <- \"https://www.arsenal.com/match-report-aston-villa-premier-league-martinelli-jesus\"\nMatch_5 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_5 <- tidy_function(Match_5)\nMatch_5 <- tidy_function(Match_5)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Sep-04/manchester-united-3-1-arsenal-match-report\"\nMatch_6 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_6 <- tidy_function(Match_6)\nMatch_6 <- tidy_function(Match_6)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-brentford-saliba-jesus-vieira\"\nMatch_7 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_7 <- tidy_function(Match_7)\nMatch_7 <- tidy_function(Match_7)\n# Arsenal 2021 season \n\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Jul-28/arsenal-4-1-watford-match-report\"\nMatch_1_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_1_2021 <- tidy_function(Match_1_2021)\nMatch_1_2021 <- tidy_function(Match_1_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Aug-01/arsenal-1-2-chelsea-match-report\"\nMatch_2_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_2_2021 <- tidy_function(Match_2_2021)\nMatch_2_2021 <- tidy_function(Match_2_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Aug-08/tottenham-hotspur-1-0-arsenal-match-report\"\nMatch_3_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_3_2021 <- tidy_function(Match_3_2021)\nMatch_3_2021 <- tidy_function(Match_3_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Aug-13/brentford-fc-2-0-arsenal-match-report\"\nMatch_4_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_4_2021 <- tidy_function(Match_4_2021)\nMatch_4_2021 <- tidy_function(Match_4_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Aug-22/arsenal-0-2-chelsea-match-report\"\nMatch_5_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_5_2021 <- tidy_function(Match_5_2021)\nMatch_5_2021 <- tidy_function(Match_5_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Aug-28/manchester-city-5-0-arsenal-match-report\"\nMatch_6_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_6_2021 <- tidy_function(Match_6_2021)\nMatch_6_2021 <- tidy_function(Match_6_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Sep-11/arsenal-1-0-norwich-city-match-report\"\nMatch_7_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_7_2021 <- tidy_function(Match_7_2021)\nMatch_7_2021 <- tidy_function(Match_7_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Sep-18/burnley-0-1-arsenal-match-report\"\nMatch_8_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_8_2021 <- tidy_function(Match_8_2021)\nMatch_8_2021 <- tidy_function(Match_8_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Sep-26/arsenal-3-1-tottenham-hotspur-match-report\"\nMatch_9_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_9_2021 <- tidy_function(Match_9_2021)\nMatch_9_2021 <- tidy_function(Match_9_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Oct-02/brighton-0-0-arsenal-match-report\"\nMatch_10_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_10_2021 <- tidy_function(Match_10_2021)\nMatch_10_2021 <- tidy_function(Match_10_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Oct-18/arsenal-2-2-crystal-palace-match-report\"\nMatch_11_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_11_2021 <- tidy_function(Match_11_2021)\nMatch_11_2021 <- tidy_function(Match_11_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Oct-22/arsenal-3-1-aston-villa-match-report\"\nMatch_12_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_12_2021 <- tidy_function(Match_12_2021)\nMatch_12_2021 <- tidy_function(Match_12_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Oct-30/leicester-city-0-2-arsenal-match-report\"\nMatch_13_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_13_2021 <- tidy_function(Match_13_2021)\nMatch_13_2021 <- tidy_function(Match_13_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Nov-07/arsenal-1-0-watford-match-report\"\nMatch_14_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_14_2021 <- tidy_function(Match_14_2021)\nMatch_14_2021 <- tidy_function(Match_14_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Nov-20/liverpool-4-0-arsenal-match-report\"\nMatch_15_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_15_2021 <- tidy_function(Match_15_2021)\nMatch_15_2021 <- tidy_function(Match_15_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Nov-27/arsenal-2-0-newcastle-united-match-report\"\nMatch_16_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_16_2021 <- tidy_function(Match_16_2021)\nMatch_16_2021 <- tidy_function(Match_16_2021)\nArsenal_url <- \"https://www.arsenal.com/arsenal-manchester-united-match-report-premier-league\"\nMatch_17_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_17_2021 <- tidy_function(Match_17_2021)\nMatch_17_2021 <- tidy_function(Match_17_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Dec-06/everton-2-1-arsenal-match-report\"\nMatch_18_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_18_2021 <- tidy_function(Match_18_2021)\nMatch_18_2021 <- tidy_function(Match_18_2021)\nArsenal_url <- \"https://www.arsenal.com/arsenal-southampton-match-report-premier-league-lacazette\"\nMatch_19_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_19_2021 <- tidy_function(Match_19_2021)\nMatch_19_2021 <- tidy_function(Match_19_2021)\nArsenal_url <- \"https://www.arsenal.com/arsenal-west-ham-match-report-premier-league-martinelli-smith-rowe\"\nMatch_20_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_20_2021 <- tidy_function(Match_20_2021)\nMatch_20_2021 <- tidy_function(Match_20_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Dec-18/leeds-1-4-arsenal-match-report\"\nMatch_21_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_21_2021 <- tidy_function(Match_21_2021)\nMatch_21_2021 <- tidy_function(Match_21_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2021-Dec-26/norwich-city-0-5-arsenal-match-report\"\nMatch_22_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_22_2021 <- tidy_function(Match_22_2021)\nMatch_22_2021 <- tidy_function(Match_22_2021)\nArsenal_url <- \"https://www.arsenal.com/arsenal-manchester-city-report-xhaka-gabriel-premier-league\"\nMatch_23_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_23_2021 <- tidy_function(Match_23_2021)\nMatch_23_2021 <- tidy_function(Match_23_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-burnley-match-report-emirates-stadium\"\nMatch_24_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_24_2021 <- tidy_function(Match_24_2021)\nMatch_24_2021 <- tidy_function(Match_24_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Feb-10/wolves-0-1-arsenal-match-report\"\nMatch_25_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_25_2021 <- tidy_function(Match_25_2021)\nMatch_25_2021 <- tidy_function(Match_25_2021)\nArsenal_url <- \"https://www.arsenal.com/match-report-emile-smith-rowe-bukayo-saka-premier-league-southampton\"\nMatch_26_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_26_2021 <- tidy_function(Match_26_2021)\nMatch_26_2021 <- tidy_function(Match_26_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Feb-24/arsenal-2-1-wolves-match-report-0\"\nMatch_27_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_27_2021 <- tidy_function(Match_27_2021)\nMatch_27_2021 <- tidy_function(Match_27_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-watford-odegaard-saka-martinelli\"\nMatch_28_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_28_2021 <- tidy_function(Match_28_2021)\nMatch_28_2021 <- tidy_function(Match_28_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-leicester-city-thomas-partey-alexandre-lacazette\"\nMatch_29_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_29_2021 <- tidy_function(Match_29_2021)\nMatch_29_2021 <- tidy_function(Match_29_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Mar-16/arsenal-0-2-liverpool-match-report\"\nMatch_30_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_30_2021 <- tidy_function(Match_30_2021)\nMatch_30_2021 <- tidy_function(Match_30_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-bukayo-saka-aston-villa-top-four\"\nMatch_31_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_31_2021 <- tidy_function(Match_31_2021)\nMatch_31_2021 <- tidy_function(Match_31_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Apr-04/crystal-palace-3-0-arsenal-match-report\"\nMatch_32_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_32_2021 <- tidy_function(Match_32_2021)\nMatch_32_2021 <- tidy_function(Match_32_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-brighton-martin-odegaard-emirates-stadium\"\nMatch_33_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_33_2021 <- tidy_function(Match_33_2021)\nMatch_33_2021 <- tidy_function(Match_33_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-Apr-16/southampton-1-0-arsenal-match-report\"\nMatch_34_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_34_2021 <- tidy_function(Match_34_2021)\nMatch_34_2021 <- tidy_function(Match_34_2021)\nArsenal_url <- \"https://www.arsenal.com/match-report-premier-league-chelsea-nketiah-smith-rowe-saka\"\nMatch_35_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_35_2021 <- tidy_function(Match_35_2021)\nMatch_35_2021 <- tidy_function(Match_35_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-manchester-united-saka-tavares-xhaka-ronaldo\"\nMatch_36_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_36_2021 <- tidy_function(Match_36_2021)\nMatch_36_2021 <- tidy_function(Match_36_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-west-ham-london-stadium\"\nMatch_37_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_37_2021 <- tidy_function(Match_37_2021)\nMatch_37_2021 <- tidy_function(Match_37_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-leeds-united-emirates-stadium-top-four-nketiah\"\nMatch_38_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_38_2021 <- tidy_function(Match_38_2021)\nMatch_38_2021 <- tidy_function(Match_38_2021)\nArsenal_url <- \"https://www.arsenal.com/premier-league-match-report-tottenham-hotspur-top-four\"\nMatch_39_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_39_2021 <- tidy_function(Match_39_2021)\nMatch_39_2021 <- tidy_function(Match_39_2021)\nArsenal_url <- \"https://www.arsenal.com/fixture/arsenal/2022-May-16/newcastle-united-2-0-arsenal-match-report\"\nMatch_40_2021 <- Web_scrape_function_Arsenal(Arsenal_url)\nMatch_40_2021 <- tidy_function(Match_40_2021)\nMatch_40_2021 <- tidy_function(Match_40_2021)\n# Manchester City data\n\nWeb_scrape_function_mancity <- function(url,css,data) { # creating function to repeat web scrape \n  url <- read_html(url) \ncss <- (\".article-body__article-text\")\ndata <- url %>% \n  html_node(css = css) %>%\n  html_text2()\ndata <- str_replace_all(data, \"\\n\", \"####\") %>%\n  str_replace_all(\"/n\", \"####\") %>%\n  str_remove_all(\"/n\") %>%\n  str_remove_all(\"\\n\") %>%\n  str_remove_all(\" - \") %>%\n  str_remove_all(\"\\\\(\") %>%\n  str_remove_all(\"\\\\)\") %>%\n  str_remove_all(\"#\") %>%\n  unlist()\n}\n\nmancity_url <- \"https://www.mancity.com/news/mens/west-ham-v-manchester-city-premier-league-match-report-63795480\"\nManc_1 <- Web_scrape_function_mancity(mancity_url)\n\nmancity_url <- \"https://www.mancity.com/news/mens/man-city-bournemouth-premier-league-match-report-63795987\"\nManc_2 <- Web_scrape_function_mancity(mancity_url)\n\nmancity_url <- \"https://www.mancity.com/news/mens/newcastle-v-manchester-city-match-report-63796690\"\nManc_3 <- Web_scrape_function_mancity(mancity_url)\n\nmancity_url <- \"https://www.mancity.com/news/mens/man-city-crystal-palace-match-report-63797204\"\nManc_4 <- Web_scrape_function_mancity(mancity_url)\n\nmancity_url <- \"https://www.mancity.com/news/mens/manchester-city-v-nottingham-forest-match-report-31-august-63797573\"\nManc_5 <- Web_scrape_function_mancity(mancity_url)\n\nmancity_url <- \"https://www.mancity.com/news/mens/aston-villa-manchester-city-premier-league-match-report-63797816\"\nManc_6 <- Web_scrape_function_mancity(mancity_url)\n\nmancity_url <- \"https://www.mancity.com/news/mens/wolves-manchester-city-away-premier-league-2022-match-report-63799002\"\nManc_7 <- Web_scrape_function_mancity(mancity_url)\n\n# New Castle \n\n# New Castle United first match against nottingham forest\n# 1 rule for 1 bots crawl delay 5 seconds, scrapable\n\nbow(\"https://www.nufc.co.uk/matches/first-team/2022-23/newcastle-united-v-nottingham-forest/\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<polite session> https://www.nufc.co.uk/matches/first-team/2022-23/newcastle-united-v-nottingham-forest/\n    User-agent: polite R package\n    robots.txt: 1 rules are defined for 1 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n```\n:::\n\n```{.r .cell-code}\nWeb_scrape_function_Newcastle <- function(url,css,data) { # creating function to repeat web scrape \n  url <- read_html(url) \ncss <- (\".article__body\")\ndata <- url %>% \n  html_node(css = css) %>%\n  html_text2()\ndata <- str_replace_all(data, \"\\n\", \"####\") %>%\n  str_replace_all(\"/n\", \"####\") %>%\n  str_remove_all(\"/n\") %>%\n  str_remove_all(\"\\n\") %>%\n  str_remove_all(\" - \") %>%\n  str_remove_all(\"\\\\(\") %>%\n  str_remove_all(\"\\\\)\") %>%\n  str_remove_all(\"\\\"\") %>%\n  str_remove_all(\"#\") %>%\n  unlist()\n}\n\nNewcastle_url <- \"https://www.nufc.co.uk/matches/first-team/2022-23/newcastle-united-v-nottingham-forest/\"\nnc_1 <- Web_scrape_function_Newcastle(Newcastle_url)\n                        \nNewcastle_url <- \"https://www.nufc.co.uk/matches/first-team/2022-23/brighton-and-hove-albion-v-newcastle-united/\"\nnc_2 <- Web_scrape_function_Newcastle(Newcastle_url)\n                        \nNewcastle_url <- \"https://www.nufc.co.uk/matches/first-team/2022-23/newcastle-united-v-manchester-city/\"\nnc_3 <- Web_scrape_function_Newcastle(Newcastle_url)\n                        \nNewcastle_url <- \"https://www.nufc.co.uk/matches/first-team/2022-23/wolverhampton-wanderers-v-newcastle-united/\"\nnc_4 <- Web_scrape_function_Newcastle(Newcastle_url)\n                        \nNewcastle_url <- \"https://www.nufc.co.uk/matches/first-team/2022-23/liverpool-v-newcastle-united/\"\nnc_5 <- Web_scrape_function_Newcastle(Newcastle_url)\n                        \nNewcastle_url <- \"https://www.nufc.co.uk/matches/first-team/2022-23/newcastle-united-v-crystal-palace/\"\nnc_6 <- Web_scrape_function_Newcastle(Newcastle_url)\n                        \nNewcastle_url <- \"https://www.nufc.co.uk/matches/first-team/2022-23/newcastle-united-v-bournemouth/\"\nnc_7 <- Web_scrape_function_Newcastle(Newcastle_url)\n\n# Everton \n\n# Everton vs Chelsea\n# 1 rule for 1 bots crawl delay 5 seconds, scrapable\n\nbow(\"https://www.evertonfc.com/match/74913/everton-chelsea#report\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<polite session> https://www.evertonfc.com/match/74913/everton-chelsea#report\n    User-agent: polite R package\n    robots.txt: 1 rules are defined for 1 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n```\n:::\n\n```{.r .cell-code}\nWeb_scrape_function_Everton <- function(url,css,data) { # creating function to repeat web scrape \n  url <- read_html(url) \ncss <- (\".article__body.mc-report__body.js-article-body\")\ndata <- url %>% \n  html_node(css = css) %>%\n  html_text2()\ndata <- str_replace_all(data, \"\\n\", \"####\") %>%\n  str_replace_all(\"/n\", \"####\") %>%\n  str_remove_all(\"/n\") %>%\n  str_remove_all(\"\\n\") %>%\n  str_remove_all(\" - \") %>%\n  str_remove_all(\"\\\\(\") %>%\n  str_remove_all(\"\\\\)\") %>%\n  str_remove_all(\"\\\"\") %>%\n  str_remove_all(\"#\") %>%\n  unlist()\n}\n\nEverton_url <- \"https://www.evertonfc.com/match/74913/everton-chelsea#report\"\never_1 <- Web_scrape_function_Everton(Everton_url)\n\nEverton_url <- \"https://www.evertonfc.com/match/74922/aston-villa-everton#report\"\never_2 <- Web_scrape_function_Everton(Everton_url)\n\nEverton_url <- \"https://www.evertonfc.com/match/74933/everton-nottm-forest#report\"\never_3 <- Web_scrape_function_Everton(Everton_url)\n\nEverton_url <-\"https://www.evertonfc.com/match/74943/brentford-everton#report\"\never_4 <- Web_scrape_function_Everton(Everton_url)\n\nEverton_url <- \"https://www.evertonfc.com/match/74955/leeds-everton#report\"\never_5 <- Web_scrape_function_Everton(Everton_url)\n\nEverton_url <- \"https://www.evertonfc.com/match/74965/everton-liverpool#report\"\never_6 <- Web_scrape_function_Everton(Everton_url)\n\nEverton_url <- \"https://www.evertonfc.com/match/74985/everton-west-ham#report\"\never_7 <- Web_scrape_function_Everton(Everton_url)\n\n# Leicester \n\n# Leicester against Brentford\n# 1 bot 1 rule scrapable 5 second crawl\nbow(\"https://www.lcfc.com/news/2729025/city-held-by-bees-in-premier-league-opener/featured\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n<polite session> https://www.lcfc.com/news/2729025/city-held-by-bees-in-premier-league-opener/featured\n    User-agent: polite R package\n    robots.txt: 1 rules are defined for 1 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n```\n:::\n\n```{.r .cell-code}\nWeb_scrape_function_Leicester <- function(url,css,data) { # creating function to repeat web scrape \n  url <- read_html(url) \ncss <- (\".col-12\")\ndata <- url %>% \n  html_node(css = css) %>%\n  html_text2()\ndata <- str_replace_all(data, \"\\n\", \"####\") %>%\n  str_replace_all(\"/n\", \"####\") %>%\n  str_remove_all(\"/n\") %>%\n  str_remove_all(\"\\n\") %>%\n  str_remove_all(\" - \") %>%\n  str_remove_all(\"\\\\(\") %>%\n  str_remove_all(\"\\\\)\") %>%\n  str_remove_all(\"\\\"\") %>%\n  str_remove_all(\"#\") %>%\n  str_remove_all(\"More on this story. . . In Photos -\") %>%\n  unlist()\n}\n\nLeicester_url <- \"https://www.lcfc.com/news/2729025/city-held-by-bees-in-premier-league-opener/featured\"\nlei_1 <- Web_scrape_function_Leicester(Leicester_url)\n\nLeicester_url <- \"https://www.lcfc.com/news/2739798/foxes-fall-to-defeat-at-arsenal/featured\"\nlei_2 <- Web_scrape_function_Leicester(Leicester_url)\n\nLeicester_url <- \"https://www.lcfc.com/news/2751347/saints-take-the-points-on-filbert-way/featured\"\nlei_3 <- Web_scrape_function_Leicester(Leicester_url)\n\nLeicester_url <- \"https://www.lcfc.com/news/2762326/city-defeated-as-10man-chelsea-win-at-stamford-bridge/featured\"\nlei_4 <- Web_scrape_function_Leicester(Leicester_url)\n\nLeicester_url <- \"https://www.lcfc.com/news/2774578/man-utd-defeat-for-leicester-on-matchday-five/featured\"\nlei_5 <- Web_scrape_function_Leicester(Leicester_url)\n\nLeicester_url <- \"https://www.lcfc.com/news/2779658/city-beaten-away-to-brighton/featured\"\nlei_6 <- Web_scrape_function_Leicester(Leicester_url)\n\nLeicester_url <- \"https://www.lcfc.com/news/2793845/leicester-lose-to-spurs-in-london/featured\"\nlei_7 <- Web_scrape_function_Leicester(Leicester_url)\n\n# West Ham \n\n# West Ham vs Manchester City\n\nWeb_scrape_function_WestHam <- function(url,css,data) { # creating function to repeat web scrape \n  url <- read_html(url) \ncss <- (\".m-article__columns\")\ndata <- url %>% \n  html_node(css = css) %>%\n  html_text2()\ndata <- str_replace_all(data, \"\\n\", \"####\") %>%\n  str_replace_all(\"/n\", \"####\") %>%\n  str_remove_all(\"/n\") %>%\n  str_remove_all(\"\\n\") %>%\n  str_remove_all(\" - \") %>%\n  str_remove_all(\"\\\\(\") %>%\n  str_remove_all(\"\\\\)\") %>%\n  str_remove_all(\"\\\"\") %>%\n  str_remove_all(\"#\") %>%\n  str_remove_all(\"More on this story. . . In Photos -\") %>%\n  unlist()\n}\n\nWestHam_url <- \"https://www.whufc.com/fixture/view/6472\"\nwh_1 <- Web_scrape_function_WestHam(WestHam_url)\n\nWestHam_url <- \"https://www.whufc.com/fixture/view/6464\"\nwh_2 <- Web_scrape_function_WestHam(WestHam_url)\n\nWestHam_url <- \"https://www.whufc.com/fixture/view/6452\"\nwh_3 <- Web_scrape_function_WestHam(WestHam_url)\n\nWestHam_url <- \"https://www.whufc.com/fixture/view/6450\"\nwh_4 <- Web_scrape_function_WestHam(WestHam_url)\n\nWestHam_url <- \"https://www.whufc.com/fixture/view/6436\"\nwh_5 <- Web_scrape_function_WestHam(WestHam_url)\n\nWestHam_url <- \"https://www.whufc.com/fixture/view/6428\"\nwh_6 <- Web_scrape_function_WestHam(WestHam_url)\n\nWestHam_url <- \"https://www.whufc.com/fixture/view/6407\"\nwh_7 <- Web_scrape_function_WestHam(WestHam_url)\n```\n:::\n\n\n# Preprocessing\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# First step is to make these character vectors into a corpus to use for preprocessing \n# Arsenal\nArsenal <- c(Match_1, Match_2, Match_3, Match_4, Match_5, Match_6, Match_7,Match_1_2021, Match_2_2021, Match_3_2021, Match_4_2021, Match_5_2021, Match_6_2021, Match_7_2021,Match_8_2021, Match_9_2021, Match_10_2021, Match_11_2021, Match_12_2021, Match_13_2021, Match_14_2021, Match_15_2021, Match_16_2021, Match_17_2021, Match_18_2021, Match_19_2021, Match_20_2021, Match_21_2021, Match_22_2021, Match_23_2021, Match_24_2021, Match_25_2021, Match_26_2021, Match_27_2021, Match_28_2021, Match_29_2021, Match_30_2021, Match_31_2021, Match_32_2021, Match_33_2021, Match_34_2021, Match_35_2021, Match_36_2021, Match_37_2021, Match_38_2021, Match_39_2021, Match_40_2021)\n\nArsenal_corpus <- corpus(Arsenal)\n# Man city\n\nManchester_City <- c(Manc_1, Manc_2, Manc_3, Manc_4, Manc_5, Manc_6, Manc_7)\n                        \n\n# Newcastle united\n\nNewcastle_United <- c(nc_1, nc_2, nc_3, nc_4, nc_5, nc_6, nc_7)\n\n# Everton\n\nEverton <- c(ever_1, ever_2, ever_3, ever_4, ever_5, ever_6, ever_7)\n\n# Leicester\n\nLeicester <- c(lei_1, lei_2, lei_3, lei_4, lei_5, lei_6, lei_7)\n\n# West Ham\n\nWest_Ham_United <- c(wh_1, wh_2, wh_3, wh_4, wh_5, wh_6, wh_7)\n\n# Creating list of objects to put into the loop\nPrem <- c(\"Arsenal\", \"Manchester_City\", \"Newcastle_United\", \"Everton\", \"Leicester\", \"West_Ham_United\")\n\n\n# create loop.\nfor (i in 1:length(Prem)){\n  \n  # create corpora\n  corpusCall <- paste(Prem[i],\"_corpus <- corpus(\",Prem[i],\")\", sep = \"\")\n    #print(corpusCall)\n  eval(parse(text=corpusCall))\n   #print(corpusCall)\n\n  # change document names for each chapter to include the book title. If you don't do this, the document names will be duplicated and you'll get an error.\n  namesCall <- paste(\"tmpNames <- docnames(\",Prem[i],\"_corpus)\", sep = \"\")\n  eval(parse(text=namesCall))\n  print(namesCall)\n  bindCall <- paste(\"docnames(\",Prem[i],\"_corpus) <- paste(\\\"\",Prem[i],\"\\\", tmpNames, sep = \\\"-\\\")\", sep = \"\")\n  eval(parse(text=bindCall))\n  print(bindCall)\n  # create summary data\n  summaryCall <- paste(Prem[i],\"_summary <- summary(\",Prem[i],\"_corpus)\", sep = \"\")\n  eval(parse(text=summaryCall))\n\n  # add indicator\n  bookCall <- paste(Prem[i],\"_summary$Team <- \\\"\",Prem[i],\"\\\"\", sep = \"\")\n  eval(parse(text=bookCall))\n\n  # add chapter indicator\n  chapterCall <- paste(Prem[i],\"_summary$Match <- as.numeric(str_extract(\",Prem[i],\"_summary$Text, \\\"[0-9]+\\\"))\", sep = \"\")\n  eval(parse(text=chapterCall))\n\n  # add meta data to each corpus\n  metaCall <- paste(\"docvars(\",Prem[i],\"_corpus) <- \",Prem[i],\"_summary\", sep = \"\")\n  eval(parse(text=metaCall))\n\n}\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"tmpNames <- docnames(Arsenal_corpus)\"\n[1] \"docnames(Arsenal_corpus) <- paste(\\\"Arsenal\\\", tmpNames, sep = \\\"-\\\")\"\n[1] \"tmpNames <- docnames(Manchester_City_corpus)\"\n[1] \"docnames(Manchester_City_corpus) <- paste(\\\"Manchester_City\\\", tmpNames, sep = \\\"-\\\")\"\n[1] \"tmpNames <- docnames(Newcastle_United_corpus)\"\n[1] \"docnames(Newcastle_United_corpus) <- paste(\\\"Newcastle_United\\\", tmpNames, sep = \\\"-\\\")\"\n[1] \"tmpNames <- docnames(Everton_corpus)\"\n[1] \"docnames(Everton_corpus) <- paste(\\\"Everton\\\", tmpNames, sep = \\\"-\\\")\"\n[1] \"tmpNames <- docnames(Leicester_corpus)\"\n[1] \"docnames(Leicester_corpus) <- paste(\\\"Leicester\\\", tmpNames, sep = \\\"-\\\")\"\n[1] \"tmpNames <- docnames(West_Ham_United_corpus)\"\n[1] \"docnames(West_Ham_United_corpus) <- paste(\\\"West_Ham_United\\\", tmpNames, sep = \\\"-\\\")\"\n```\n:::\n\n```{.r .cell-code}\nPrem <- c(Arsenal_corpus, Manchester_City_corpus, Newcastle_United_corpus, Everton_corpus, Leicester_corpus, West_Ham_United_corpus)\n\nPrem_summary <- summary(Prem)\nndoc(Prem)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 82\n```\n:::\n\n```{.r .cell-code}\nArsenal_1 <- corpus_subset(Prem, Team == 'Arsenal')\n\nsummary(Arsenal_1)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nCorpus consisting of 47 documents, showing 47 documents:\n\n           Text Types Tokens Sentences           Text Types Tokens Sentences\n  Arsenal-text1   474   1027        12  Arsenal-text1   474   1027        12\n  Arsenal-text2   561   1297        22  Arsenal-text2   561   1297        22\n  Arsenal-text3   517   1124        15  Arsenal-text3   517   1124        15\n  Arsenal-text4   429    894         9  Arsenal-text4   429    894         9\n  Arsenal-text5   408    790        12  Arsenal-text5   408    790        12\n  Arsenal-text6   438    916         6  Arsenal-text6   438    916         6\n  Arsenal-text7   490   1107        21  Arsenal-text7   490   1107        21\n  Arsenal-text8   392    758        13  Arsenal-text8   392    758        13\n  Arsenal-text9   362    662        11  Arsenal-text9   362    662        11\n Arsenal-text10   231    379         3 Arsenal-text10   231    379         3\n Arsenal-text11   355    643        10 Arsenal-text11   355    643        10\n Arsenal-text12   311    569        10 Arsenal-text12   311    569        10\n Arsenal-text13   184    284         3 Arsenal-text13   184    284         3\n Arsenal-text14   267    474         6 Arsenal-text14   267    474         6\n Arsenal-text15   279    453         7 Arsenal-text15   279    453         7\n Arsenal-text16   280    526         4 Arsenal-text16   280    526         4\n Arsenal-text17   266    478        20 Arsenal-text17   266    478        20\n Arsenal-text18   336    659        12 Arsenal-text18   336    659        12\n Arsenal-text19   289    498         7 Arsenal-text19   289    498         7\n Arsenal-text20   330    577         4 Arsenal-text20   330    577         4\n Arsenal-text21   332    626        10 Arsenal-text21   332    626        10\n Arsenal-text22   342    611         8 Arsenal-text22   342    611         8\n Arsenal-text23   340    612         5 Arsenal-text23   340    612         5\n Arsenal-text24   241    440         5 Arsenal-text24   241    440         5\n Arsenal-text25   252    458         3 Arsenal-text25   252    458         3\n Arsenal-text26   355    693         9 Arsenal-text26   355    693         9\n Arsenal-text27   288    493         2 Arsenal-text27   288    493         2\n Arsenal-text28   438    865        12 Arsenal-text28   438    865        12\n Arsenal-text29   256    455        14 Arsenal-text29   256    455        14\n Arsenal-text30   389    775        11 Arsenal-text30   389    775        11\n Arsenal-text31   271    490        13 Arsenal-text31   271    490        13\n Arsenal-text32   340    683        30 Arsenal-text32   340    683        30\n Arsenal-text33   254    445         4 Arsenal-text33   254    445         4\n Arsenal-text34   404   1122        35 Arsenal-text34   404   1122        35\n Arsenal-text35   298    555         5 Arsenal-text35   298    555         5\n Arsenal-text36   260    429         2 Arsenal-text36   260    429         2\n Arsenal-text37   386    768        16 Arsenal-text37   386    768        16\n Arsenal-text38   247    464         8 Arsenal-text38   247    464         8\n Arsenal-text39   274    478         8 Arsenal-text39   274    478         8\n Arsenal-text40   315    612        17 Arsenal-text40   315    612        17\n Arsenal-text41   291    560        17 Arsenal-text41   291    560        17\n Arsenal-text42   337    688        19 Arsenal-text42   337    688        19\n Arsenal-text43   324    659        17 Arsenal-text43   324    659        17\n Arsenal-text44   280    497         8 Arsenal-text44   280    497         8\n Arsenal-text45   316    595        13 Arsenal-text45   316    595        13\n Arsenal-text46   296    590        15 Arsenal-text46   296    590        15\n Arsenal-text47   268    495         9 Arsenal-text47   268    495         9\n    Team Match\n Arsenal     1\n Arsenal     2\n Arsenal     3\n Arsenal     4\n Arsenal     5\n Arsenal     6\n Arsenal     7\n Arsenal     8\n Arsenal     9\n Arsenal    10\n Arsenal    11\n Arsenal    12\n Arsenal    13\n Arsenal    14\n Arsenal    15\n Arsenal    16\n Arsenal    17\n Arsenal    18\n Arsenal    19\n Arsenal    20\n Arsenal    21\n Arsenal    22\n Arsenal    23\n Arsenal    24\n Arsenal    25\n Arsenal    26\n Arsenal    27\n Arsenal    28\n Arsenal    29\n Arsenal    30\n Arsenal    31\n Arsenal    32\n Arsenal    33\n Arsenal    34\n Arsenal    35\n Arsenal    36\n Arsenal    37\n Arsenal    38\n Arsenal    39\n Arsenal    40\n Arsenal    41\n Arsenal    42\n Arsenal    43\n Arsenal    44\n Arsenal    45\n Arsenal    46\n Arsenal    47\n```\n:::\n\n```{.r .cell-code}\nPrem_dfm <- dfm(tokens(Prem,\nremove_punct = TRUE,\nremove_symbols = TRUE) %>%\ndfm(tolower = TRUE) %>%\ndfm_remove(stopwords('english')))\n\ntopfeatures(Prem_dfm, 20)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n  first minutes    goal  league    ball premier    city    shot    half    back \n    308     269     255     251     248     239     203     200     199     185 \n   just    game  second    time    home     two    side arsenal  corner    away \n    156     156     155     141     133     121     119     113     111     110 \n```\n:::\n\n```{.r .cell-code}\nset.seed(1)\n\n# Creating a table to show the highest frequency items and then ranking them\nword_counts <- as.data.frame(sort(colSums(Prem_dfm),dec=T))\ncolnames(word_counts) <- c(\"Frequency\")\nword_counts$Rank <- c(1:ncol(Prem_dfm))\n\nggplot(word_counts, mapping = aes(x = Rank, y = Frequency)) + \n  geom_point() +\n  labs(title = \"Zipf's Law\", x = \"Rank\", y = \"Frequency\") + \n  theme_bw()\n```\n\n::: {.cell-output-display}\n![](Blogpost3EthanCampbell_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nPrem_smaller_dfm <- dfm_trim(Prem_dfm, min_termfreq = 10)\n\n# trim based on the proportion of documents that the feature appears in; here, \n# the feature needs to appear in more than 10% of documents (chapters)\nPrem_smaller_dfm <- dfm_trim(Prem_smaller_dfm, min_docfreq = 0.1, docfreq_type = \"prop\")\n\nPrem_smaller_dfm\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nDocument-feature matrix of: 82 documents, 629 features (73.81% sparse) and 6 docvars.\n               features\ndocs            gabriel martinelli header late goal got premier league campaign\n  Arsenal-text1       2          3      2    1    6   1       9      8        3\n  Arsenal-text2       3          6      3    1    3   1       5      5        2\n  Arsenal-text3       3          3      1    2    8   1      10     11        0\n  Arsenal-text4       7          4      2    2    4   1       8      8        1\n  Arsenal-text5       4          5      0    0    5   1       7      9        0\n  Arsenal-text6       2          5      1    0    5   2       5      7        0\n               features\ndocs            perfect\n  Arsenal-text1       1\n  Arsenal-text2       2\n  Arsenal-text3       0\n  Arsenal-text4       0\n  Arsenal-text5       1\n  Arsenal-text6       2\n[ reached max_ndoc ... 76 more documents, reached max_nfeat ... 619 more features ]\n```\n:::\n\n```{.r .cell-code}\ntextplot_wordcloud(Prem_smaller_dfm, min_count = 50,\n                   random_order = FALSE)\n```\n\n::: {.cell-output-display}\n![](Blogpost3EthanCampbell_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# Creating the FCM\n\nPrem_smaller_dfm <- dfm_trim(Prem_dfm, min_termfreq = 20)\nPrem_smaller_dfm <- dfm_trim(Prem_smaller_dfm, min_docfreq = .3, docfreq_type = \"prop\")\n\n# create fcm from dfm\nPrem_smaller_fcm <- fcm(Prem_smaller_dfm)\n\n# check the dimensions (i.e., the number of rows and the number of columnns)\n# of the matrix we created\ndim(Prem_smaller_fcm)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 179 179\n```\n:::\n\n```{.r .cell-code}\n# pull the top features\nmyFeatures <- names(topfeatures(Prem_smaller_fcm, 30))\n\n# retain only those top features as part of our matrix\nPrem_smaller_fcm <- fcm_select(Prem_smaller_fcm, pattern = myFeatures, selection = \"keep\")\n\n# compute size weight for vertices in network\nsize <- log(colSums(Prem_smaller_fcm))\n\n# create plot\ntextplot_network(Prem_smaller_fcm, vertex_size = size / max(size) * 3)\n```\n\n::: {.cell-output-display}\n![](Blogpost3EthanCampbell_files/figure-html/unnamed-chunk-5-3.png){width=672}\n:::\n:::",
    "supporting": [
      "Blogpost3EthanCampbell_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}