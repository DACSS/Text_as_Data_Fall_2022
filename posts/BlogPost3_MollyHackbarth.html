<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Molly Hackbarth">
<meta name="dcterms.date" content="2022-10-15">

<title>Text-as-Data Fall 2022 - Blog Post Three</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<meta name="twitter:title" content="Text-as-Data Fall 2022 - Blog Post Three">
<meta name="twitter:description" content="My current research question: How do Reddit and Twitter users feel about the show Love is Blind Japan?">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../images/UMass White Wordmark Horiz.png" alt="">
    <span class="navbar-title">Text-as-Data Fall 2022</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/Text_as_Data_Fall_2022/">Fall 2022</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">Contributors</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss">DACSS</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS/Text_as_Data_Fall_2022"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#research-question" id="toc-research-question" class="nav-link active" data-scroll-target="#research-question">Research Question</a></li>
  <li><a href="#working-with-the-data" id="toc-working-with-the-data" class="nav-link" data-scroll-target="#working-with-the-data">Working with the Data</a>
  <ul class="collapse">
  <li><a href="#adding-data-in-separately" id="toc-adding-data-in-separately" class="nav-link" data-scroll-target="#adding-data-in-separately">Adding Data in Separately</a></li>
  <li><a href="#using-hunspell" id="toc-using-hunspell" class="nav-link" data-scroll-target="#using-hunspell">Using HunSpell</a>
  <ul class="collapse">
  <li><a href="#cleaning-the-data-and-creating-tokens" id="toc-cleaning-the-data-and-creating-tokens" class="nav-link" data-scroll-target="#cleaning-the-data-and-creating-tokens">Cleaning the Data and Creating Tokens</a></li>
  <li><a href="#trying-to-create-a-dtm" id="toc-trying-to-create-a-dtm" class="nav-link" data-scroll-target="#trying-to-create-a-dtm">Trying to create a DTM</a></li>
  <li><a href="#trying-a-different-way" id="toc-trying-a-different-way" class="nav-link" data-scroll-target="#trying-a-different-way">Trying a Different Way</a></li>
  <li><a href="#additional-tm-code" id="toc-additional-tm-code" class="nav-link" data-scroll-target="#additional-tm-code">Additional TM code</a></li>
  <li><a href="#dealing-with-some-issues" id="toc-dealing-with-some-issues" class="nav-link" data-scroll-target="#dealing-with-some-issues">Dealing with some issues</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#way-that-worked---word-cloud-with-lemmitized" id="toc-way-that-worked---word-cloud-with-lemmitized" class="nav-link" data-scroll-target="#way-that-worked---word-cloud-with-lemmitized">Way that Worked - Word Cloud with Lemmitized</a>
  <ul class="collapse">
  <li><a href="#another-way-for-word-clouds" id="toc-another-way-for-word-clouds" class="nav-link" data-scroll-target="#another-way-for-word-clouds">Another way for Word Clouds</a></li>
  </ul></li>
  <li><a href="#code-for-new-word-clouds" id="toc-code-for-new-word-clouds" class="nav-link" data-scroll-target="#code-for-new-word-clouds">Code For New Word Clouds</a>
  <ul class="collapse">
  <li><a href="#lemmetize" id="toc-lemmetize" class="nav-link" data-scroll-target="#lemmetize">Lemmetize</a></li>
  <li><a href="#tm-package" id="toc-tm-package" class="nav-link" data-scroll-target="#tm-package">TM Package</a></li>
  <li><a href="#emoji-thoughts" id="toc-emoji-thoughts" class="nav-link" data-scroll-target="#emoji-thoughts">Emoji Thoughts</a>
  <ul class="collapse">
  <li><a href="#attempting-to-remove-japanese" id="toc-attempting-to-remove-japanese" class="nav-link" data-scroll-target="#attempting-to-remove-japanese">Attempting to Remove Japanese</a></li>
  <li><a href="#removing-all-non-english" id="toc-removing-all-non-english" class="nav-link" data-scroll-target="#removing-all-non-english">Removing all non English</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#updated-word-cloud-code" id="toc-updated-word-cloud-code" class="nav-link" data-scroll-target="#updated-word-cloud-code">Updated Word Cloud Code</a></li>
  <li><a href="#looking-at-the-data-closer" id="toc-looking-at-the-data-closer" class="nav-link" data-scroll-target="#looking-at-the-data-closer">Looking at the Data Closer</a>
  <ul class="collapse">
  <li><a href="#trying-a-co-occurrence-matrix" id="toc-trying-a-co-occurrence-matrix" class="nav-link" data-scroll-target="#trying-a-co-occurrence-matrix">Trying a Co-occurrence Matrix</a></li>
  </ul></li>
  <li><a href="#final-thoughts-tldr" id="toc-final-thoughts-tldr" class="nav-link" data-scroll-target="#final-thoughts-tldr">Final Thoughts (TLDR)</a>
  <ul class="collapse">
  <li><a href="#final-thoughts" id="toc-final-thoughts" class="nav-link" data-scroll-target="#final-thoughts">Final thoughts</a></li>
  <li><a href="#questions-and-frustrations-i-still-have" id="toc-questions-and-frustrations-i-still-have" class="nav-link" data-scroll-target="#questions-and-frustrations-i-still-have">Questions and frustrations I still have</a></li>
  <li><a href="#future-work" id="toc-future-work" class="nav-link" data-scroll-target="#future-work">Future Work</a></li>
  </ul></li>
  <li><a href="#final-code" id="toc-final-code" class="nav-link" data-scroll-target="#final-code">Final Code</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Blog Post Three</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">blog posts</div>
    <div class="quarto-category">hw3</div>
    <div class="quarto-category">Molly Hackbarth</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Molly Hackbarth </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 15, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plyr)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(preText)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textmodels)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hunspell)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emojifont)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="research-question" class="level1">
<h1>Research Question</h1>
<p><strong>My current research question:</strong> How do Reddit and Twitter users feel about the show <em>Love is Blind Japan</em>?</p>
</section>
<section id="working-with-the-data" class="level1">
<h1>Working with the Data</h1>
<p>In my previous blog post I had started to clean the data using two different methods. After discussing I decided I’ll remove the “textclean” package in case of issues. I will also do some back tracking to have both twitter and reddit in separate databases.</p>
<section id="adding-data-in-separately" class="level3">
<h3 class="anchored" data-anchor-id="adding-data-in-separately">Adding Data in Separately</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>reddit_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblindjapan.csv"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets.csv"</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets#.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_data, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"body"</span>, <span class="st">"created_utc"</span>)) </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>reddit<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.Date.POSIXct</span>(reddit<span class="sc">$</span>created_utc)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">text =</span> body, </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">date =</span> created_utc)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># remove deleted or removed comments by moderators of the subreddit (ones that only contain [deleted] or [removed])</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[deleted]'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[removed]'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remove counting column</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> twitter1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> twitter2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter1, twitter2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'Tweet'</span>,<span class="st">'Tweet'</span>, <span class="st">'Date'</span>, <span class="st">'Date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(twitter, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"twitter.csv"</span>) , <span class="fu">all</span>(T) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in utils::write.table(twitter, here::here("posts", "_data",
"twitter.csv"), : appending column names to file</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(twitter) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(twitter))</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="st">'tweet'</span>, <span class="sc">~</span> <span class="st">'text'</span>, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Date'</span> <span class="sc">~</span> <span class="st">'date'</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>twitter<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">strftime</span>(twitter<span class="sc">$</span>date, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>))</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remove duplicate tweets</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(text, date, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">#check for duplicate tweets</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>twitter <span class="sc">%in%</span> <span class="fu">unique</span>(twitter[ <span class="fu">duplicated</span>(twitter)]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>allsocialmedia <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter, reddit, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'text'</span>,<span class="st">'text'</span>, <span class="st">'date'</span>, <span class="st">'date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(twitter, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblind_socialmedia.csv"</span>) , <span class="fu">all</span>(T) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in utils::write.table(twitter, here::here("posts", "_data",
"loveisblind_socialmedia.csv"), : appending column names to file</code></pre>
</div>
</div>
</section>
<section id="using-hunspell" class="level2">
<h2 class="anchored" data-anchor-id="using-hunspell">Using HunSpell</h2>
<p>After listening to class lectures, I decided to go ahead and download the “hunspell” package so I could look at my errors.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>spell_check_reddit <span class="ot">&lt;-</span> <span class="fu">hunspell</span>(reddit<span class="sc">$</span>text)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>spell_check_twitter <span class="ot">&lt;-</span> <span class="fu">hunspell</span>(twitter<span class="sc">$</span>text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Here I’m able to see that Twitter more often used shortened words (i.e.&nbsp;“ppl” instead of “people”). However I also noticed that Twitter more often used non english. This is likely due to Reddit being a mostly English speaking platform compared to Twitter.</p>
<p>Overall though I think that the data wasn’t too bad. I still would like to remove htmls (they aren’t helpful to analyzing). However in class a good point was brought up that emojis do often display emotions. Thus I think for now I will leave them in.</p>
<p>For non English I’ll still remove them as I can’t accurately analyze them without knowing the language.</p>
<p>Below you will find ways that didn’t seem to work for me,</p>
<section id="cleaning-the-data-and-creating-tokens" class="level3">
<h3 class="anchored" data-anchor-id="cleaning-the-data-and-creating-tokens">Cleaning the Data and Creating Tokens</h3>
<p>To see if cleaning the data works I’ll go ahead and test first with Reddit data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_corpus, <span class="fu">detect_language</span>(reddit_corpus) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_corpus)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_corpus)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="trying-to-create-a-dtm" class="level3">
<h3 class="anchored" data-anchor-id="trying-to-create-a-dtm">Trying to create a DTM</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(reddit_lemmitized) </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: vector memory exhausted (limit reached?)</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in base::rowSums(x, na.rm = na.rm, dims = dims, ...): 'x' must be an array of at least two dimensions</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>While this works for creating tokens, unfortunately it has removed the date column. While this is fine to gather an overall sentiment, it would be nice to keep the other column there.</p>
<p>Additionally trying to create a dtm from this doesn’t seem to work.</p>
</section>
<section id="trying-a-different-way" class="level3">
<h3 class="anchored" data-anchor-id="trying-a-different-way">Trying a Different Way</h3>
<p>Below you will see me attempt to have a corpus vector date (where it says large simple corpus). This is because I would like the date columns. I will once again try with Reddit first.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">subset</span>(test<span class="sc">$</span>text, <span class="fu">detect_language</span>(test) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test<span class="sc">$</span>text)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>text <span class="ot">&lt;-</span> test<span class="sc">$</span>text <span class="sc">%&gt;%</span> </span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(test))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeNumbers) <span class="sc">%&gt;%</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove stop words</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="trying-to-create-tokens" class="level4">
<h4 class="anchored" data-anchor-id="trying-to-create-tokens">Trying to Create Tokens</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(test, </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: tokens() only works on character, corpus, list, tokens objects.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(test_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in tokens_tolower(test_tokens): object 'test_tokens' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(test_tokens, </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in tokens_replace(test_tokens, pattern = lexicon::hash_lemmas$token, : object 'test_tokens' not found</code></pre>
</div>
</div>
<p>While this has created a large simple corpus which has included the two columns I mentioned, I can’t seem to create “tokens” this way which could make researching difficult.</p>
</section>
<section id="dtm-word-cloud" class="level4">
<h4 class="anchored" data-anchor-id="dtm-word-cloud">DTM &amp; Word Cloud</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(test) </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm) </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># for reproducibility </span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> df<span class="sc">$</span>word, <span class="at">freq =</span> df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">50</span>,           <span class="at">max.words=</span><span class="dv">100</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>,            <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/wordcloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Here we can see the word cloud worked!</p>
<p>I also noticed despite removing emojis and other languages this way it seems to still be in the matrix. While it only shows up once and awhile it is sort of strange.</p>
</section>
</section>
<section id="additional-tm-code" class="level3">
<h3 class="anchored" data-anchor-id="additional-tm-code">Additional TM code</h3>
<p>To try to help to remove more I will use addition tm code.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeNumbers) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="dealing-with-some-issues" class="level3">
<h3 class="anchored" data-anchor-id="dealing-with-some-issues">Dealing with some issues</h3>
<p>I realized my current removing non English is not working completely. Thus I’m trying a different formula in addition to make it work.</p>
<p>I also realized I was using tm_map to remove numbers which may have caused an issue.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(test2, <span class="fu">detect_language</span>(test2) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(test2, <span class="st">"latin-ascii"</span>)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test2)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(reddit_tm))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in SimpleSource(length = length(x), content = x, class = "VectorSource"): object 'reddit_tm' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(test2, <span class="fu">detect_language</span>(test2) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(test2, <span class="st">"latin-ascii"</span>)</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'test3' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> test2 <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co">#change non letters to spaces</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove stop words</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="trying-a-dtm-word-cloud-again" class="level4">
<h4 class="anchored" data-anchor-id="trying-a-dtm-word-cloud-again">Trying a DTM &amp; Word Cloud Again</h4>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(test2) </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm) </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># for reproducibility </span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> df<span class="sc">$</span>word, <span class="at">freq =</span> df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">500</span>, <span class="at">max.words=</span><span class="dv">200</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>, <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/updated%20wordcloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>This seems to have kept the dates in the corpus! However here I noticed that the dates are also in the word cloud which I don’t want.</p>
<p>Additionally I learned I need a high minimum frequency to really have this work well. Otherwise there was an error saying it couldn’t show multiple words.</p>
</section>
</section>
</section>
</section>
<section id="way-that-worked---word-cloud-with-lemmitized" class="level1">
<h1>Way that Worked - Word Cloud with Lemmitized</h1>
<section id="another-way-for-word-clouds" class="level3">
<h3 class="anchored" data-anchor-id="another-way-for-word-clouds">Another way for Word Clouds</h3>
<p>I was able to find another way to do text plots that don’t involve using the “tm” package to create a corpus thanks to the class blog! Below you will see the word cloud for Reddit Post.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>reddit_corpus_edit <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_edit, <span class="at">max_words=</span><span class="dv">100</span>, <span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/word%20cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I first tried to do it allowing stop words, however it seems that it was overtaken by words such as “I”, “the”, and “and”. So I put the remove stop words back in.</p>
<section id="twitter-word-cloud" class="level4">
<h4 class="anchored" data-anchor-id="twitter-word-cloud">Twitter Word Cloud</h4>
<p>Below you will see the word cloud for Twitter posts.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter_corpus, <span class="fu">detect_language</span>(twitter_corpus) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(twitter_corpus, <span class="st">"latin-ascii"</span>)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twitter_corpus)</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb39-26"><a href="#cb39-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-27"><a href="#cb39-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb39-28"><a href="#cb39-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-29"><a href="#cb39-29" aria-hidden="true" tabindex="-1"></a>twitter_corpus_edit <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb39-30"><a href="#cb39-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb39-31"><a href="#cb39-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_edit, <span class="at">max_words=</span><span class="dv">100</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/cleaning%20tweets-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Something I noticed was that when I tried to subset with English, the amount of tweets in the Twitter corpus went down by almost half. This seemed to be an error issue as when I looked at my data it shouldn’t have gone down more than 1,000. This has lead me to remove the detect language function. I have added a new function that strip non-ascii characters which will remove emojis and non English.</p>
<p>Something else I noticed for Twitter is that it seems that some non English or emojis are frequently used. My guess is that it’s mostly “love is blind japan” in Japanese.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">#library(emojifont) #reads japanese?</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>twittertest <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co">#twittertest &lt;- stringi::stri_trans_general(twitter_corpus, "latin-ascii")</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>twittertest <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twittertest)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>twittertest <span class="ot">&lt;-</span> twittertest[<span class="sc">!</span><span class="fu">is.na</span>(twittertest)]</span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens1 <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twittertest, </span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens1 <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens1)</span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens1 <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens1, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized1 <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens1, </span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb43-28"><a href="#cb43-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-29"><a href="#cb43-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb43-30"><a href="#cb43-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-31"><a href="#cb43-31" aria-hidden="true" tabindex="-1"></a>twittertest1 <span class="ot">&lt;-</span> twittertest <span class="sc">%&gt;%</span> </span>
<span id="cb43-32"><a href="#cb43-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-33"><a href="#cb43-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'dfm.character()' is deprecated. Use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twittertest1, <span class="at">max_words=</span><span class="dv">100</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/adding%20emojifont-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><u><strong>A quick note: For some reason the TM package and word clouds were a bit finicky. It sometimes seemed to work and sometimes did not.</strong></u></p>
</section>
</section>
</section>
<section id="code-for-new-word-clouds" class="level1">
<h1>Code For New Word Clouds</h1>
<section id="lemmetize" class="level3">
<h3 class="anchored" data-anchor-id="lemmetize">Lemmetize</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(reddit_corpus, <span class="st">"latin-ascii"</span>)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_corpus)</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>reddit_corpus_edit <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_edit, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/reddit%20lem-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emojifont) <span class="co">#reads japanese?</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>twitter_corpus<span class="ot">&lt;-</span> twitter<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(twitter_corpus, <span class="st">"latin-ascii"</span>)</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twitter_corpus)</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>twitter_corpus_edit <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_edit, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/twitter%20lem-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Some interesting facts for Lemmetize plot</p>
<ul>
<li><p>#loveisblindjapan is one of the largest along with blind, love and japan for twitter. This is unsurprising as that’s the name of the show.</p></li>
<li><p>Reddit used the word like and think a lot. However interestingly Japanese is mentioned more than the word Japan.</p></li>
<li><p>The names of the actual contestants are not mentioned as much as I would think. They’re still mentioned often but are not major words in the word cloud.</p></li>
<li><p>Japanese characters and possibly emojis both made there way into the word cloud. I’m unsure why.</p></li>
</ul>
</section>
<section id="tm-package" class="level3">
<h3 class="anchored" data-anchor-id="tm-package">TM Package</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> reddit<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(reddit_tm, <span class="st">"latin-ascii"</span>)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_tm)</span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(reddit_tm))</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">#change non letters to spaces</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> reddit_tm <span class="sc">%&gt;%</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove multiple white space</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., removePunctuation): transformation drops
documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., stripWhitespace): transformation drops
documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., toSpace, "/"): transformation drops documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., toSpace, "@"): transformation drops documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., toSpace, "\\|"): transformation drops
documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., content_transformer(tolower)): transformation
drops documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., removeWords, stopwords("english")):
transformation drops documents</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>reddit_dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(reddit_tm) </span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>reddit_matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(reddit_dtm) </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>reddit_words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(reddit_matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>reddit_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">words =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># for reproducibility </span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> reddit_df<span class="sc">$</span>word, <span class="at">freq =</span> reddit_df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">50</span>,           <span class="at">max.words=</span><span class="dv">100</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>,            <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/reddit%20TM-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(twitter_tm, <span class="st">"latin-ascii"</span>)</span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twitter_tm)</span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(twitter_tm))</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="co">#change non letters to spaces</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-19"><a href="#cb65-19" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> twitter_tm <span class="sc">%&gt;%</span></span>
<span id="cb65-20"><a href="#cb65-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb65-21"><a href="#cb65-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove multiple white space</span></span>
<span id="cb65-22"><a href="#cb65-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-23"><a href="#cb65-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-24"><a href="#cb65-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb65-25"><a href="#cb65-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-26"><a href="#cb65-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., removePunctuation): transformation drops
documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., stripWhitespace): transformation drops
documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., toSpace, "/"): transformation drops documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., toSpace, "@"): transformation drops documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., toSpace, "\\|"): transformation drops
documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., content_transformer(tolower)): transformation
drops documents</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in tm_map.SimpleCorpus(., removeWords, stopwords("english")):
transformation drops documents</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>twitter_dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(twitter_tm) </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>twitter_matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(twitter_dtm) </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>twitter_words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(twitter_matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>twitter_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">words =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>) <span class="co"># for reproducibility </span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> twitter_df<span class="sc">$</span>word, <span class="at">freq =</span> twitter_df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">50</span>,           <span class="at">max.words=</span><span class="dv">100</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>,            <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/twitter%20tm-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Some interesting facts for TM:</p>
<ul>
<li>I thought that the ’s was part of some sort of stop word. However it seems that it isn’t for either. My guess is it may follow names of people in the show.</li>
<li>Even with another version of removing emojis and non English there still seems to be some in the data, however not very much.</li>
<li>Like and think were both very popular words for Twitter and Reddit.</li>
<li>Not all the contestants were posted about the same amount.</li>
<li>Despite the show being about marriage, the words married, marry, or marriage weren’t the top words for either Twitter or Reddit.</li>
</ul>
<p>Overall between the two types of word clouds, I prefer the <strong>lemmitized version</strong> so I will continue using that one.</p>
<p>However I am surprised by the fact that they’re so different. The only difference in code is really the “toSpace” which removes just a couple of extra things.</p>
</section>
<section id="emoji-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="emoji-thoughts">Emoji Thoughts</h2>
<p>Using the function that I found from the DACSS slack channel I found that it also has a nice side affect of removing non English as well.</p>
<p>Additionally I’ve noticed that there’s has been few emojis that have made it into the word cloud. I also don’t feel confident in decoding emojis and being able to do a sentiment analysis.</p>
<p><strong>Thus for this project I will not keep emojis.</strong></p>
<section id="attempting-to-remove-japanese" class="level3">
<h3 class="anchored" data-anchor-id="attempting-to-remove-japanese">Attempting to Remove Japanese</h3>
<p>Since I noticed there was a lot of Japanese still left in the word cloud I went to test if I could remove more with the previous function I had used. This along with the other three options seems to have the best results!</p>
<p>Below you will see a test version.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>str_rm_jap <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#we replace japanese blocks with nothing, and clean any double whitespace from this</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#reference at http://www.rikai.com/library/kanjitables/kanji_codes.unicode.shtml</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span> </span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#japanese style punctuation</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3000-\u303F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#katakana</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u30A0-\u30FF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#hiragana</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3040-\u309F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#kanji</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u4E00-\u9FAF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#remove excess whitespace</span></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"  +"</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>test_corpus<span class="ot">&lt;-</span> twitter<span class="sc">$</span>text<span class="sc">%&gt;%</span> str_rm_jap</span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>test_posts <span class="ot">&lt;-</span> test_corpus <span class="sc">%&gt;%</span></span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>test_posts <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(test_posts, <span class="st">"latin-ascii"</span>)</span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a>test_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test_corpus)</span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>test_corpus <span class="ot">&lt;-</span> test_corpus[<span class="sc">!</span><span class="fu">is.na</span>(test_corpus)]</span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-31"><a href="#cb74-31" aria-hidden="true" tabindex="-1"></a>test_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(test_corpus, </span>
<span id="cb74-32"><a href="#cb74-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb74-33"><a href="#cb74-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb74-34"><a href="#cb74-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-35"><a href="#cb74-35" aria-hidden="true" tabindex="-1"></a>test_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(test_corpus_tokens)</span>
<span id="cb74-36"><a href="#cb74-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-37"><a href="#cb74-37" aria-hidden="true" tabindex="-1"></a>test_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(test_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb74-38"><a href="#cb74-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-39"><a href="#cb74-39" aria-hidden="true" tabindex="-1"></a>test_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(test_corpus_tokens, </span>
<span id="cb74-40"><a href="#cb74-40" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb74-41"><a href="#cb74-41" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb74-42"><a href="#cb74-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-43"><a href="#cb74-43" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb74-44"><a href="#cb74-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-45"><a href="#cb74-45" aria-hidden="true" tabindex="-1"></a>test_corpus_edit <span class="ot">&lt;-</span> test_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb74-46"><a href="#cb74-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb74-47"><a href="#cb74-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">50</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(test_corpus_edit, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/test%20removing%20japanese-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>While doing this I noticed there were a lot of Spanish words as well. In order to combat this I decided to go back to using the subset function.</p>
</section>
<section id="removing-all-non-english" class="level3">
<h3 class="anchored" data-anchor-id="removing-all-non-english">Removing all non English</h3>
<p>While this has taken care of a lot of issues, unfortunately it has removed a lot of data. This has left me with only <strong>7,990 tweets</strong> out of the original 14,866.</p>
<p>I also have added remove_symbols to the tokens.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter<span class="sc">$</span>text)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">subset</span>(test, <span class="fu">detect_language</span>(test) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test)</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> test[<span class="sc">!</span><span class="fu">is.na</span>(test)]</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(test, </span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T)</span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(test_tokens)</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(test_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a>tests_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(test_tokens, </span>
<span id="cb78-20"><a href="#cb78-20" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb78-21"><a href="#cb78-21" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb78-22"><a href="#cb78-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-23"><a href="#cb78-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb78-24"><a href="#cb78-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-25"><a href="#cb78-25" aria-hidden="true" tabindex="-1"></a>test_edit <span class="ot">&lt;-</span> tests_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb78-26"><a href="#cb78-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb78-27"><a href="#cb78-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">50</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: '...' should not be used for tokens() arguments; use 'tokens()' first.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'remove' is deprecated; use dfm_remove() instead</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(test_edit, <span class="at">max_words=</span><span class="dv">300</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/testing%20using%20subset-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="updated-word-cloud-code" class="level1">
<h1>Updated Word Cloud Code</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-20"><a href="#cb82-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb82-21"><a href="#cb82-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-22"><a href="#cb82-22" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb82-23"><a href="#cb82-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb82-24"><a href="#cb82-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb82-25"><a href="#cb82-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb82-26"><a href="#cb82-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-27"><a href="#cb82-27" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/reddit%20word%20cloud%202-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb83-19"><a href="#cb83-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-20"><a href="#cb83-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb83-21"><a href="#cb83-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-22"><a href="#cb83-22" aria-hidden="true" tabindex="-1"></a>twitter_corpus_dfm <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb83-23"><a href="#cb83-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb83-24"><a href="#cb83-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb83-25"><a href="#cb83-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb83-26"><a href="#cb83-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-27"><a href="#cb83-27" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/twitter%20word%20cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(allsocialmedia, <span class="fu">detect_language</span>(allsocialmedia) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(social_corpus)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>socialsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(social_corpus)</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> social_corpus[<span class="sc">!</span><span class="fu">is.na</span>(social_corpus)]</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(social_corpus, </span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(social_corpus_tokens)</span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(social_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb84-16"><a href="#cb84-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-17"><a href="#cb84-17" aria-hidden="true" tabindex="-1"></a>social_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(social_corpus_tokens, </span>
<span id="cb84-18"><a href="#cb84-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb84-19"><a href="#cb84-19" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb84-20"><a href="#cb84-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-21"><a href="#cb84-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb84-22"><a href="#cb84-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-23"><a href="#cb84-23" aria-hidden="true" tabindex="-1"></a>social_corpus_dfm <span class="ot">&lt;-</span> social_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb84-24"><a href="#cb84-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb84-25"><a href="#cb84-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb84-26"><a href="#cb84-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb84-27"><a href="#cb84-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-28"><a href="#cb84-28" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(social_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"orange"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/both%20social%20medias%20word%20cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="looking-at-the-data-closer" class="level1">
<h1>Looking at the Data Closer</h1>
<p>Below you will see some quick looks at data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(social_corpus_dfm, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>             love             japan              like             blind 
             7352              5886              5647              5270 
            think              just #loveisblindjapan              good 
             4582              3670              3445              3417 
              say               get 
             3378              2982 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(twitter_corpus_dfm, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>             love             blind             japan #loveisblindjapan 
             5965              5068              4766              3445 
            watch              like              good              just 
             2135              1200              1001               936 
              get              show 
              806               727 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(reddit_corpus_dfm, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  like  think    say   just   good    get   show really    see   feel 
  4504   4120   2856   2750   2455   2196   2120   2007   1953   1897 </code></pre>
</div>
</div>
<p>Here we can see that overall the top ten words:</p>
<table class="table">
<caption><sub>Love&nbsp;is&nbsp;Blind&nbsp;Japan&nbsp;Top&nbsp;Features</sub></caption>
<thead>
<tr class="header">
<th>All Social Media</th>
<th>Twitter</th>
<th>Reddit</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>love</td>
<td>love</td>
<td>like</td>
</tr>
<tr class="even">
<td>japan</td>
<td>blind</td>
<td>think</td>
</tr>
<tr class="odd">
<td>like</td>
<td>japan</td>
<td>say</td>
</tr>
<tr class="even">
<td>blind</td>
<td>#loveisblindjapan</td>
<td>just</td>
</tr>
<tr class="odd">
<td>think</td>
<td>watch</td>
<td>good</td>
</tr>
<tr class="even">
<td>just</td>
<td>like</td>
<td>get</td>
</tr>
<tr class="odd">
<td>#loveisblindjapan</td>
<td>good</td>
<td>show</td>
</tr>
<tr class="even">
<td>good</td>
<td>just</td>
<td>really</td>
</tr>
<tr class="odd">
<td>say</td>
<td>get</td>
<td>see</td>
</tr>
<tr class="even">
<td>get</td>
<td>show</td>
<td>feel</td>
</tr>
</tbody>
</table>
<p>Here we can see a few things:</p>
<ul>
<li><p>While “love”, “blind”, and “japan” are the top features in Twitter, this is most likely due to the show’s name. When comparing this to both the category social media that combine them and Reddit, like made it much higher.</p></li>
<li><p>All three column’s top ten words have multiple words that are focusing on how people are watching the show feel.</p></li>
<li><p>From this brief look it seems there’s a positive thought on show as “good” were both in the top ten for Twitter and Reddit.</p></li>
</ul>
<section id="trying-a-co-occurrence-matrix" class="level2">
<h2 class="anchored" data-anchor-id="trying-a-co-occurrence-matrix">Trying a Co-occurrence Matrix</h2>
<p>I will give a test try to having a max term frequency for Twitter, as Twitter’s top four words have to do with the shows name.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(twitter_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">30</span>)</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(smaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(smaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/cooccurrence-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(smaller_dfm)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 485 485</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(smaller_fcm, <span class="dv">30</span>))</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>even_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(smaller_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(even_smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 30</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(even_smaller_fcm))</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(even_smaller_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/cooccurrence-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="final-thoughts-tldr" class="level1">
<h1>Final Thoughts (TLDR)</h1>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final thoughts</h2>
<ul>
<li><p>I did end up looking at Youtube to see if there were clips of this show online that were from Netflix. There unfortunately only seemed to be a trailer for the show. Clips of this season were fairly rare there.</p></li>
<li><p>After debating for awhile I decided to use the subset language option to remove all other languages for Twitter (Reddit did not have this problem most likely due to the main user base being English speaking Americans). Although this did cut my database down significantly I believe this was the best option as it removes any other language that I’m currently unable to analyze properly.</p>
<ul>
<li><p>Conversely Reddit had very few other languages. However to keep the data similar I used subset for Reddit too.</p>
<ul>
<li>This was also done so if I would like to use both the separate data and the data combined it is the same.</li>
</ul></li>
</ul></li>
<li><p>I decided to use the quanteda.textplots for the word cloud instead of the TM package. This is due to the TM package having issues when I try to reload the word clouds.</p></li>
<li><p>I have decided to lemmitize my tokens as it works to create a more accurate picture of words that were important to both Twitter and Reddit posters.</p></li>
<li><p>I have removed emojis due to the issues of most of the emoji packages I have found not working. Additionally I’m not confident that I could accurately use them for a sentiment analysis, or that there are that many in the first place.</p></li>
<li><p>For my tokens I have added remove_symbols and remove_url for both Reddit and Twitter to help out with people spamming urls to shows or gifs, and the “@” sign.</p></li>
<li><p>When I checked the top features it was interesting to see what words were used the most. While none of it was surprising, it did help me to understand the words a bit more.</p></li>
<li><p>I believe a co-occurance matrix may be useful for Twitter as it allows me to remove the name of the show and the hashtag better.</p></li>
</ul>
</section>
<section id="questions-and-frustrations-i-still-have" class="level2">
<h2 class="anchored" data-anchor-id="questions-and-frustrations-i-still-have">Questions and frustrations I still have</h2>
<ul>
<li><p>I’m still unsure how to keep <strong>both the date and the text</strong> as separate columns using the corpus() function from quanteda. I can keep it in the summary, but I’m not sure if I can use the dates outside of that.</p>
<ul>
<li>The summary also only goes to 100, I’m not sure how I can make it show me all of the data either.</li>
<li>When I tried having a maximum frequency for Twitter’s word cloud it did bring out the dates in the word cloud but I’m not sure if that solves my problem either.</li>
</ul></li>
<li><p>I am unsure if looking at all the data together or separately is currently the best. I have a word cloud using all the social media data below. This would change my research question.</p>
<ul>
<li><p><strong>Current Research Question:</strong> How do Reddit and Twitter users feel about the show <em>Love is Blind Japan</em>?</p></li>
<li><p><strong>Possibly Research Question:</strong> How do Reddit and Twitter users sentiment differentiate about the show <em>Love is Blind Japan</em>?</p>
<ul>
<li>This is the question I had previously.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="future-work" class="level2">
<h2 class="anchored" data-anchor-id="future-work">Future Work</h2>
<p>Here are a few things I’d like to do in blog post 4:</p>
<ul>
<li><p><strong>Try to group by date.</strong> With the date column seemingly working now I’d like to see if grouping by date would work.</p></li>
<li><p><strong>Try to use the textplot_network on reddit as well as the combined data set.</strong> Although I’m not sure if I will I think it could produce some interesting results.</p></li>
<li><p><strong>Try to find a way to remove the dates from the word clouds.</strong> My current thought is to just make a separate r chunk that only has twitter$text to remove the dates.</p></li>
<li><p><strong>Try to decide on how or if I want to use co-occurrence.</strong></p></li>
</ul>
</section>
</section>
<section id="final-code" class="level1">
<h1>Final Code</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">#write csv has been commented out due to it continously trying to save an "updated version" in Git. </span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>reddit_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblindjapan.csv"</span>))</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets.csv"</span>))</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets#.csv"</span>))</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_data, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"body"</span>, <span class="st">"created_utc"</span>)) </span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>reddit<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.Date.POSIXct</span>(reddit<span class="sc">$</span>created_utc)</span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">text =</span> body, </span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">date =</span> created_utc)</span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a><span class="co"># remove deleted or removed comments by moderators of the subreddit (ones that only contain [deleted] or [removed])</span></span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[deleted]'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[removed]'</span>)</span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a><span class="co">#remove counting column</span></span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> twitter1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> twitter2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter1, twitter2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'Tweet'</span>,<span class="st">'Tweet'</span>, <span class="st">'Date'</span>, <span class="st">'Date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "twitter.csv") , all(T) )</span></span>
<span id="cb97-27"><a href="#cb97-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-28"><a href="#cb97-28" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(twitter) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(twitter))</span>
<span id="cb97-29"><a href="#cb97-29" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> </span>
<span id="cb97-30"><a href="#cb97-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="st">'tweet'</span>, <span class="sc">~</span> <span class="st">'text'</span>, </span>
<span id="cb97-31"><a href="#cb97-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Date'</span> <span class="sc">~</span> <span class="st">'date'</span>)</span>
<span id="cb97-32"><a href="#cb97-32" aria-hidden="true" tabindex="-1"></a>twitter<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">strftime</span>(twitter<span class="sc">$</span>date, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>))</span>
<span id="cb97-33"><a href="#cb97-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-34"><a href="#cb97-34" aria-hidden="true" tabindex="-1"></a><span class="co"># remove duplicate tweets</span></span>
<span id="cb97-35"><a href="#cb97-35" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(text, date, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-36"><a href="#cb97-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-37"><a href="#cb97-37" aria-hidden="true" tabindex="-1"></a><span class="co">#check for duplicate tweets</span></span>
<span id="cb97-38"><a href="#cb97-38" aria-hidden="true" tabindex="-1"></a>twitter <span class="sc">%in%</span> <span class="fu">unique</span>(twitter[ <span class="fu">duplicated</span>(twitter)]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>allsocialmedia <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter, reddit, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'text'</span>,<span class="st">'text'</span>, <span class="st">'date'</span>, <span class="st">'date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "loveisblind_socialmedia.csv") , all(T) )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb100-19"><a href="#cb100-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-20"><a href="#cb100-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb100-21"><a href="#cb100-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-22"><a href="#cb100-22" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb100-23"><a href="#cb100-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb100-24"><a href="#cb100-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb100-25"><a href="#cb100-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb100-26"><a href="#cb100-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-27"><a href="#cb100-27" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/reddit%20word%20cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb101-18"><a href="#cb101-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb101-19"><a href="#cb101-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-20"><a href="#cb101-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb101-21"><a href="#cb101-21" aria-hidden="true" tabindex="-1"></a>twitter_corpus_dfm <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb101-22"><a href="#cb101-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb101-23"><a href="#cb101-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb101-24"><a href="#cb101-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb101-25"><a href="#cb101-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-26"><a href="#cb101-26" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/twitter%20word%20cloud%202-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(allsocialmedia, <span class="fu">detect_language</span>(allsocialmedia) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(social_corpus)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>socialsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(social_corpus)</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> social_corpus[<span class="sc">!</span><span class="fu">is.na</span>(social_corpus)]</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(social_corpus, </span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(social_corpus_tokens)</span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(social_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a>social_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(social_corpus_tokens, </span>
<span id="cb102-18"><a href="#cb102-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb102-19"><a href="#cb102-19" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a>social_corpus_dfm <span class="ot">&lt;-</span> social_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb102-26"><a href="#cb102-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb102-27"><a href="#cb102-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-28"><a href="#cb102-28" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(social_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"orange"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/full%20social%20media%20word%20cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(social_corpus_dfm, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>             love             japan              like             blind 
             7352              5886              5647              5270 
            think              just #loveisblindjapan              good 
             4582              3670              3445              3417 
              say               get 
             3378              2982 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(twitter_corpus_dfm, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>             love             blind             japan #loveisblindjapan 
             5965              5068              4766              3445 
            watch              like              good              just 
             2135              1200              1001               936 
              get              show 
              806               727 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(reddit_corpus_dfm, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  like  think    say   just   good    get   show really    see   feel 
  4504   4120   2856   2750   2455   2196   2120   2007   1953   1897 </code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(twitter_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">30</span>)</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(smaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(smaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/cooccurrence%202-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(smaller_dfm)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 485 485</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(smaller_fcm, <span class="dv">30</span>))</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>even_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(smaller_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(even_smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 30</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(even_smaller_fcm))</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(even_smaller_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost3_MollyHackbarth_files/figure-html/cooccurrence%202-2.png" class="img-fluid" width="672"></p>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/Text_as_Data_Fall_2022" data-repo-id="R_kgDOH5675w" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb115" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Blog Post Three"</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Molly Hackbarth"</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="an">desription:</span><span class="co"> "Working with the data"</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "10/15/2022"</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - blog posts</span></span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a><span class="co">  - hw3</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - Molly Hackbarth</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb115-25"><a href="#cb115-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb115-26"><a href="#cb115-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb115-27"><a href="#cb115-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb115-28"><a href="#cb115-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb115-29"><a href="#cb115-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb115-30"><a href="#cb115-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb115-31"><a href="#cb115-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb115-32"><a href="#cb115-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plyr)</span>
<span id="cb115-33"><a href="#cb115-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb115-34"><a href="#cb115-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(preText)</span>
<span id="cb115-35"><a href="#cb115-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb115-36"><a href="#cb115-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textmodels)</span>
<span id="cb115-37"><a href="#cb115-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-38"><a href="#cb115-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hunspell)</span>
<span id="cb115-39"><a href="#cb115-39" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb115-40"><a href="#cb115-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb115-41"><a href="#cb115-41" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb115-42"><a href="#cb115-42" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emojifont)</span>
<span id="cb115-43"><a href="#cb115-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-44"><a href="#cb115-44" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-45"><a href="#cb115-45" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-46"><a href="#cb115-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-47"><a href="#cb115-47" aria-hidden="true" tabindex="-1"></a><span class="fu"># Research Question</span></span>
<span id="cb115-48"><a href="#cb115-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-49"><a href="#cb115-49" aria-hidden="true" tabindex="-1"></a>**My current research question:** How do Reddit and Twitter users feel about the show *Love is Blind Japan*?</span>
<span id="cb115-50"><a href="#cb115-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-51"><a href="#cb115-51" aria-hidden="true" tabindex="-1"></a><span class="fu"># Working with the Data</span></span>
<span id="cb115-52"><a href="#cb115-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-53"><a href="#cb115-53" aria-hidden="true" tabindex="-1"></a>In my previous blog post I had started to clean the data using two different methods. After discussing I decided I'll remove the "textclean" package in case of issues. I will also do some back tracking to have both twitter and reddit in separate databases.</span>
<span id="cb115-54"><a href="#cb115-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-55"><a href="#cb115-55" aria-hidden="true" tabindex="-1"></a><span class="fu">### Adding Data in Separately</span></span>
<span id="cb115-56"><a href="#cb115-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-57"><a href="#cb115-57" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reading in the data}</span></span>
<span id="cb115-58"><a href="#cb115-58" aria-hidden="true" tabindex="-1"></a>reddit_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblindjapan.csv"</span>))</span>
<span id="cb115-59"><a href="#cb115-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-60"><a href="#cb115-60" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets.csv"</span>))</span>
<span id="cb115-61"><a href="#cb115-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-62"><a href="#cb115-62" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets#.csv"</span>))</span>
<span id="cb115-63"><a href="#cb115-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-64"><a href="#cb115-64" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-65"><a href="#cb115-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-68"><a href="#cb115-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-69"><a href="#cb115-69" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_data, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"body"</span>, <span class="st">"created_utc"</span>)) </span>
<span id="cb115-70"><a href="#cb115-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-71"><a href="#cb115-71" aria-hidden="true" tabindex="-1"></a>reddit<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.Date.POSIXct</span>(reddit<span class="sc">$</span>created_utc)</span>
<span id="cb115-72"><a href="#cb115-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-73"><a href="#cb115-73" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb115-74"><a href="#cb115-74" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">text =</span> body, </span>
<span id="cb115-75"><a href="#cb115-75" aria-hidden="true" tabindex="-1"></a>            <span class="at">date =</span> created_utc)</span>
<span id="cb115-76"><a href="#cb115-76" aria-hidden="true" tabindex="-1"></a><span class="co"># remove deleted or removed comments by moderators of the subreddit (ones that only contain [deleted] or [removed])</span></span>
<span id="cb115-77"><a href="#cb115-77" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb115-78"><a href="#cb115-78" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[deleted]'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-79"><a href="#cb115-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[removed]'</span>)</span>
<span id="cb115-80"><a href="#cb115-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-81"><a href="#cb115-81" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-82"><a href="#cb115-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-85"><a href="#cb115-85" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-86"><a href="#cb115-86" aria-hidden="true" tabindex="-1"></a><span class="co">#remove counting column</span></span>
<span id="cb115-87"><a href="#cb115-87" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> twitter1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb115-88"><a href="#cb115-88" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> twitter2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb115-89"><a href="#cb115-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-90"><a href="#cb115-90" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter1, twitter2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'Tweet'</span>,<span class="st">'Tweet'</span>, <span class="st">'Date'</span>, <span class="st">'Date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb115-91"><a href="#cb115-91" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(twitter, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"twitter.csv"</span>) , <span class="fu">all</span>(T) )</span>
<span id="cb115-92"><a href="#cb115-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-93"><a href="#cb115-93" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(twitter) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(twitter))</span>
<span id="cb115-94"><a href="#cb115-94" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> </span>
<span id="cb115-95"><a href="#cb115-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="st">'tweet'</span>, <span class="sc">~</span> <span class="st">'text'</span>, </span>
<span id="cb115-96"><a href="#cb115-96" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Date'</span> <span class="sc">~</span> <span class="st">'date'</span>)</span>
<span id="cb115-97"><a href="#cb115-97" aria-hidden="true" tabindex="-1"></a>twitter<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">strftime</span>(twitter<span class="sc">$</span>date, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>))</span>
<span id="cb115-98"><a href="#cb115-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-99"><a href="#cb115-99" aria-hidden="true" tabindex="-1"></a><span class="co"># remove duplicate tweets</span></span>
<span id="cb115-100"><a href="#cb115-100" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(text, date, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-101"><a href="#cb115-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-102"><a href="#cb115-102" aria-hidden="true" tabindex="-1"></a><span class="co">#check for duplicate tweets</span></span>
<span id="cb115-103"><a href="#cb115-103" aria-hidden="true" tabindex="-1"></a>twitter <span class="sc">%in%</span> <span class="fu">unique</span>(twitter[ <span class="fu">duplicated</span>(twitter)]) </span>
<span id="cb115-104"><a href="#cb115-104" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-105"><a href="#cb115-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-108"><a href="#cb115-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-109"><a href="#cb115-109" aria-hidden="true" tabindex="-1"></a>allsocialmedia <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter, reddit, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'text'</span>,<span class="st">'text'</span>, <span class="st">'date'</span>, <span class="st">'date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb115-110"><a href="#cb115-110" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(twitter, here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblind_socialmedia.csv"</span>) , <span class="fu">all</span>(T) )</span>
<span id="cb115-111"><a href="#cb115-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-112"><a href="#cb115-112" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-113"><a href="#cb115-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-114"><a href="#cb115-114" aria-hidden="true" tabindex="-1"></a><span class="fu">## Using HunSpell</span></span>
<span id="cb115-115"><a href="#cb115-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-116"><a href="#cb115-116" aria-hidden="true" tabindex="-1"></a>After listening to class lectures, I decided to go ahead and download the "hunspell" package so I could look at my errors.</span>
<span id="cb115-117"><a href="#cb115-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-120"><a href="#cb115-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-121"><a href="#cb115-121" aria-hidden="true" tabindex="-1"></a>spell_check_reddit <span class="ot">&lt;-</span> <span class="fu">hunspell</span>(reddit<span class="sc">$</span>text)</span>
<span id="cb115-122"><a href="#cb115-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-123"><a href="#cb115-123" aria-hidden="true" tabindex="-1"></a>spell_check_twitter <span class="ot">&lt;-</span> <span class="fu">hunspell</span>(twitter<span class="sc">$</span>text)</span>
<span id="cb115-124"><a href="#cb115-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-125"><a href="#cb115-125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-126"><a href="#cb115-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-127"><a href="#cb115-127" aria-hidden="true" tabindex="-1"></a>Here I'm able to see that Twitter more often used shortened words (i.e. "ppl" instead of "people"). However I also noticed that Twitter more often used non english. This is likely due to Reddit being a mostly English speaking platform compared to Twitter.</span>
<span id="cb115-128"><a href="#cb115-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-129"><a href="#cb115-129" aria-hidden="true" tabindex="-1"></a>Overall though I think that the data wasn't too bad. I still would like to remove htmls (they aren't helpful to analyzing). However in class a good point was brought up that emojis do often display emotions. Thus I think for now I will leave them in.</span>
<span id="cb115-130"><a href="#cb115-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-131"><a href="#cb115-131" aria-hidden="true" tabindex="-1"></a>For non English I'll still remove them as I can't accurately analyze them without knowing the language.</span>
<span id="cb115-132"><a href="#cb115-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-133"><a href="#cb115-133" aria-hidden="true" tabindex="-1"></a>Below you will find ways that didn't seem to work for me,</span>
<span id="cb115-134"><a href="#cb115-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-135"><a href="#cb115-135" aria-hidden="true" tabindex="-1"></a><span class="fu">### Cleaning the Data and Creating Tokens</span></span>
<span id="cb115-136"><a href="#cb115-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-137"><a href="#cb115-137" aria-hidden="true" tabindex="-1"></a>To see if cleaning the data works I'll go ahead and test first with Reddit data.</span>
<span id="cb115-138"><a href="#cb115-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-141"><a href="#cb115-141" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-142"><a href="#cb115-142" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb115-143"><a href="#cb115-143" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb115-144"><a href="#cb115-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-145"><a href="#cb115-145" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-146"><a href="#cb115-146" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_corpus, <span class="fu">detect_language</span>(reddit_corpus) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb115-147"><a href="#cb115-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-148"><a href="#cb115-148" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-149"><a href="#cb115-149" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_corpus)</span>
<span id="cb115-150"><a href="#cb115-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-151"><a href="#cb115-151" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb115-152"><a href="#cb115-152" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-153"><a href="#cb115-153" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb115-154"><a href="#cb115-154" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-155"><a href="#cb115-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-156"><a href="#cb115-156" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-157"><a href="#cb115-157" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_corpus)</span>
<span id="cb115-158"><a href="#cb115-158" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb115-159"><a href="#cb115-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-160"><a href="#cb115-160" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-161"><a href="#cb115-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-164"><a href="#cb115-164" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-165"><a href="#cb115-165" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb115-166"><a href="#cb115-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-167"><a href="#cb115-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb115-168"><a href="#cb115-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-169"><a href="#cb115-169" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb115-170"><a href="#cb115-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-171"><a href="#cb115-171" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-172"><a href="#cb115-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-173"><a href="#cb115-173" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb115-174"><a href="#cb115-174" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-175"><a href="#cb115-175" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-176"><a href="#cb115-176" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-177"><a href="#cb115-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-178"><a href="#cb115-178" aria-hidden="true" tabindex="-1"></a><span class="fu">### Trying to create a DTM</span></span>
<span id="cb115-179"><a href="#cb115-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-180"><a href="#cb115-180" aria-hidden="true" tabindex="-1"></a><span class="in">```{r creating a dtm 1}</span></span>
<span id="cb115-181"><a href="#cb115-181" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(reddit_lemmitized) </span>
<span id="cb115-182"><a href="#cb115-182" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm) </span>
<span id="cb115-183"><a href="#cb115-183" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb115-184"><a href="#cb115-184" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span>
<span id="cb115-185"><a href="#cb115-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-186"><a href="#cb115-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-187"><a href="#cb115-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-188"><a href="#cb115-188" aria-hidden="true" tabindex="-1"></a>While this works for creating tokens, unfortunately it has removed the date column. While this is fine to gather an overall sentiment, it would be nice to keep the other column there.</span>
<span id="cb115-189"><a href="#cb115-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-190"><a href="#cb115-190" aria-hidden="true" tabindex="-1"></a>Additionally trying to create a dtm from this doesn't seem to work.</span>
<span id="cb115-191"><a href="#cb115-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-192"><a href="#cb115-192" aria-hidden="true" tabindex="-1"></a><span class="fu">### Trying a Different Way</span></span>
<span id="cb115-193"><a href="#cb115-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-194"><a href="#cb115-194" aria-hidden="true" tabindex="-1"></a>Below you will see me attempt to have a corpus vector date (where it says large simple corpus). This is because I would like the date columns. I will once again try with Reddit first.</span>
<span id="cb115-195"><a href="#cb115-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-198"><a href="#cb115-198" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-199"><a href="#cb115-199" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb115-200"><a href="#cb115-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-201"><a href="#cb115-201" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-202"><a href="#cb115-202" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">subset</span>(test<span class="sc">$</span>text, <span class="fu">detect_language</span>(test) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb115-203"><a href="#cb115-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-204"><a href="#cb115-204" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-205"><a href="#cb115-205" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test<span class="sc">$</span>text)</span>
<span id="cb115-206"><a href="#cb115-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-207"><a href="#cb115-207" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb115-208"><a href="#cb115-208" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-209"><a href="#cb115-209" aria-hidden="true" tabindex="-1"></a>test<span class="sc">$</span>text <span class="ot">&lt;-</span> test<span class="sc">$</span>text <span class="sc">%&gt;%</span> </span>
<span id="cb115-210"><a href="#cb115-210" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-211"><a href="#cb115-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-212"><a href="#cb115-212" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(test))</span>
<span id="cb115-213"><a href="#cb115-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-214"><a href="#cb115-214" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb115-215"><a href="#cb115-215" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeNumbers) <span class="sc">%&gt;%</span></span>
<span id="cb115-216"><a href="#cb115-216" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb115-217"><a href="#cb115-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove stop words</span></span>
<span id="cb115-218"><a href="#cb115-218" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-219"><a href="#cb115-219" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span>
<span id="cb115-220"><a href="#cb115-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-221"><a href="#cb115-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-222"><a href="#cb115-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-223"><a href="#cb115-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-224"><a href="#cb115-224" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Trying to Create Tokens</span></span>
<span id="cb115-225"><a href="#cb115-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-228"><a href="#cb115-228" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-229"><a href="#cb115-229" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(test, </span>
<span id="cb115-230"><a href="#cb115-230" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-231"><a href="#cb115-231" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb115-232"><a href="#cb115-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-233"><a href="#cb115-233" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(test_tokens)</span>
<span id="cb115-234"><a href="#cb115-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-235"><a href="#cb115-235" aria-hidden="true" tabindex="-1"></a>lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(test_tokens, </span>
<span id="cb115-236"><a href="#cb115-236" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-237"><a href="#cb115-237" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-238"><a href="#cb115-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-239"><a href="#cb115-239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-240"><a href="#cb115-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-241"><a href="#cb115-241" aria-hidden="true" tabindex="-1"></a>While this has created a large simple corpus which has included the two columns I mentioned, I can't seem to create "tokens" this way which could make researching difficult.</span>
<span id="cb115-242"><a href="#cb115-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-243"><a href="#cb115-243" aria-hidden="true" tabindex="-1"></a><span class="fu">#### DTM &amp; Word Cloud</span></span>
<span id="cb115-244"><a href="#cb115-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-247"><a href="#cb115-247" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-248"><a href="#cb115-248" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(test) </span>
<span id="cb115-249"><a href="#cb115-249" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm) </span>
<span id="cb115-250"><a href="#cb115-250" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb115-251"><a href="#cb115-251" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span>
<span id="cb115-252"><a href="#cb115-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-253"><a href="#cb115-253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-254"><a href="#cb115-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-257"><a href="#cb115-257" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-258"><a href="#cb115-258" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb115-259"><a href="#cb115-259" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb115-260"><a href="#cb115-260" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># for reproducibility </span></span>
<span id="cb115-261"><a href="#cb115-261" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> df<span class="sc">$</span>word, <span class="at">freq =</span> df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">50</span>,           <span class="at">max.words=</span><span class="dv">100</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>,            <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb115-262"><a href="#cb115-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-263"><a href="#cb115-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-264"><a href="#cb115-264" aria-hidden="true" tabindex="-1"></a>Here we can see the word cloud worked!</span>
<span id="cb115-265"><a href="#cb115-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-266"><a href="#cb115-266" aria-hidden="true" tabindex="-1"></a>I also noticed despite removing emojis and other languages this way it seems to still be in the matrix. While it only shows up once and awhile it is sort of strange.</span>
<span id="cb115-267"><a href="#cb115-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-268"><a href="#cb115-268" aria-hidden="true" tabindex="-1"></a><span class="fu">### Additional TM code</span></span>
<span id="cb115-269"><a href="#cb115-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-270"><a href="#cb115-270" aria-hidden="true" tabindex="-1"></a>To try to help to remove more I will use addition tm code.</span>
<span id="cb115-271"><a href="#cb115-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-274"><a href="#cb115-274" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-275"><a href="#cb115-275" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb115-276"><a href="#cb115-276" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb115-277"><a href="#cb115-277" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeNumbers) <span class="sc">%&gt;%</span></span>
<span id="cb115-278"><a href="#cb115-278" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb115-279"><a href="#cb115-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> </span>
<span id="cb115-280"><a href="#cb115-280" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-281"><a href="#cb115-281" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-282"><a href="#cb115-282" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>)</span>
<span id="cb115-283"><a href="#cb115-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-284"><a href="#cb115-284" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-285"><a href="#cb115-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-286"><a href="#cb115-286" aria-hidden="true" tabindex="-1"></a><span class="fu">### Dealing with some issues</span></span>
<span id="cb115-287"><a href="#cb115-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-288"><a href="#cb115-288" aria-hidden="true" tabindex="-1"></a>I realized my current removing non English is not working completely. Thus I'm trying a different formula in addition to make it work.</span>
<span id="cb115-289"><a href="#cb115-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-290"><a href="#cb115-290" aria-hidden="true" tabindex="-1"></a>I also realized I was using tm_map to remove numbers which may have caused an issue.</span>
<span id="cb115-291"><a href="#cb115-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-292"><a href="#cb115-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit}</span></span>
<span id="cb115-293"><a href="#cb115-293" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb115-294"><a href="#cb115-294" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(test2, <span class="fu">detect_language</span>(test2) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb115-295"><a href="#cb115-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-296"><a href="#cb115-296" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(test2, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-297"><a href="#cb115-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-298"><a href="#cb115-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-299"><a href="#cb115-299" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-300"><a href="#cb115-300" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test2)</span>
<span id="cb115-301"><a href="#cb115-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-302"><a href="#cb115-302" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(reddit_tm))</span>
<span id="cb115-303"><a href="#cb115-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-304"><a href="#cb115-304" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(test2, <span class="fu">detect_language</span>(test2) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb115-305"><a href="#cb115-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-306"><a href="#cb115-306" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(test2, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-307"><a href="#cb115-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-308"><a href="#cb115-308" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-309"><a href="#cb115-309" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test3)</span>
<span id="cb115-310"><a href="#cb115-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-311"><a href="#cb115-311" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb115-312"><a href="#cb115-312" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-313"><a href="#cb115-313" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> test2 <span class="sc">%&gt;%</span> </span>
<span id="cb115-314"><a href="#cb115-314" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-315"><a href="#cb115-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-316"><a href="#cb115-316" aria-hidden="true" tabindex="-1"></a><span class="co">#change non letters to spaces</span></span>
<span id="cb115-317"><a href="#cb115-317" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb115-318"><a href="#cb115-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-319"><a href="#cb115-319" aria-hidden="true" tabindex="-1"></a>test2 <span class="ot">&lt;-</span> test <span class="sc">%&gt;%</span></span>
<span id="cb115-320"><a href="#cb115-320" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb115-321"><a href="#cb115-321" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove stop words</span></span>
<span id="cb115-322"><a href="#cb115-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-323"><a href="#cb115-323" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-324"><a href="#cb115-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-325"><a href="#cb115-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-326"><a href="#cb115-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span>
<span id="cb115-327"><a href="#cb115-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-328"><a href="#cb115-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-329"><a href="#cb115-329" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Trying a DTM &amp; Word Cloud Again</span></span>
<span id="cb115-330"><a href="#cb115-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-333"><a href="#cb115-333" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-334"><a href="#cb115-334" aria-hidden="true" tabindex="-1"></a>dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(test2) </span>
<span id="cb115-335"><a href="#cb115-335" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(dtm) </span>
<span id="cb115-336"><a href="#cb115-336" aria-hidden="true" tabindex="-1"></a>words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb115-337"><a href="#cb115-337" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">word =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span>
<span id="cb115-338"><a href="#cb115-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-339"><a href="#cb115-339" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-340"><a href="#cb115-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-343"><a href="#cb115-343" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-344"><a href="#cb115-344" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(wordcloud)</span>
<span id="cb115-345"><a href="#cb115-345" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># for reproducibility </span></span>
<span id="cb115-346"><a href="#cb115-346" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> df<span class="sc">$</span>word, <span class="at">freq =</span> df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">500</span>, <span class="at">max.words=</span><span class="dv">200</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>, <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb115-347"><a href="#cb115-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-348"><a href="#cb115-348" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-349"><a href="#cb115-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-350"><a href="#cb115-350" aria-hidden="true" tabindex="-1"></a>This seems to have kept the dates in the corpus! However here I noticed that the dates are also in the word cloud which I don't want.</span>
<span id="cb115-351"><a href="#cb115-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-352"><a href="#cb115-352" aria-hidden="true" tabindex="-1"></a>Additionally I learned I need a high minimum frequency to really have this work well. Otherwise there was an error saying it couldn't show multiple words.</span>
<span id="cb115-353"><a href="#cb115-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-354"><a href="#cb115-354" aria-hidden="true" tabindex="-1"></a><span class="fu"># Way that Worked - Word Cloud with Lemmitized</span></span>
<span id="cb115-355"><a href="#cb115-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-356"><a href="#cb115-356" aria-hidden="true" tabindex="-1"></a><span class="fu">### Another way for Word Clouds</span></span>
<span id="cb115-357"><a href="#cb115-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-358"><a href="#cb115-358" aria-hidden="true" tabindex="-1"></a>I was able to find another way to do text plots that don't involve using the "tm" package to create a corpus thanks to the class blog! Below you will see the word cloud for Reddit Post.</span>
<span id="cb115-359"><a href="#cb115-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-362"><a href="#cb115-362" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-363"><a href="#cb115-363" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-364"><a href="#cb115-364" aria-hidden="true" tabindex="-1"></a>reddit_corpus_edit <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-365"><a href="#cb115-365" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-366"><a href="#cb115-366" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-367"><a href="#cb115-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-368"><a href="#cb115-368" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_edit, <span class="at">max_words=</span><span class="dv">100</span>, <span class="at">color=</span><span class="st">"red"</span>)</span>
<span id="cb115-369"><a href="#cb115-369" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-370"><a href="#cb115-370" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-371"><a href="#cb115-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-372"><a href="#cb115-372" aria-hidden="true" tabindex="-1"></a>I first tried to do it allowing stop words, however it seems that it was overtaken by words such as "I", "the", and "and". So I put the remove stop words back in.</span>
<span id="cb115-373"><a href="#cb115-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-374"><a href="#cb115-374" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Twitter Word Cloud</span></span>
<span id="cb115-375"><a href="#cb115-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-376"><a href="#cb115-376" aria-hidden="true" tabindex="-1"></a>Below you will see the word cloud for Twitter posts.</span>
<span id="cb115-377"><a href="#cb115-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-380"><a href="#cb115-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-381"><a href="#cb115-381" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter)</span>
<span id="cb115-382"><a href="#cb115-382" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb115-383"><a href="#cb115-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-384"><a href="#cb115-384" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-385"><a href="#cb115-385" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter_corpus, <span class="fu">detect_language</span>(twitter_corpus) <span class="sc">==</span> <span class="st">"en"</span>) </span>
<span id="cb115-386"><a href="#cb115-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-387"><a href="#cb115-387" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(twitter_corpus, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-388"><a href="#cb115-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-389"><a href="#cb115-389" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-390"><a href="#cb115-390" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twitter_corpus)</span>
<span id="cb115-391"><a href="#cb115-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-392"><a href="#cb115-392" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb115-393"><a href="#cb115-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-394"><a href="#cb115-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-395"><a href="#cb115-395" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb115-396"><a href="#cb115-396" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-397"><a href="#cb115-397" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb115-398"><a href="#cb115-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-399"><a href="#cb115-399" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb115-400"><a href="#cb115-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-401"><a href="#cb115-401" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-402"><a href="#cb115-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-403"><a href="#cb115-403" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb115-404"><a href="#cb115-404" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-405"><a href="#cb115-405" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-406"><a href="#cb115-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-407"><a href="#cb115-407" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-408"><a href="#cb115-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-409"><a href="#cb115-409" aria-hidden="true" tabindex="-1"></a>twitter_corpus_edit <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-410"><a href="#cb115-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-411"><a href="#cb115-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-412"><a href="#cb115-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-413"><a href="#cb115-413" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_edit, <span class="at">max_words=</span><span class="dv">100</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb115-414"><a href="#cb115-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-415"><a href="#cb115-415" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-416"><a href="#cb115-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-417"><a href="#cb115-417" aria-hidden="true" tabindex="-1"></a>Something I noticed was that when I tried to subset with English, the amount of tweets in the Twitter corpus went down by almost half. This seemed to be an error issue as when I looked at my data it shouldn't have gone down more than 1,000. This has lead me to remove the detect language function. I have added a new function that strip non-ascii characters which will remove emojis and non English.</span>
<span id="cb115-418"><a href="#cb115-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-419"><a href="#cb115-419" aria-hidden="true" tabindex="-1"></a>Something else I noticed for Twitter is that it seems that some non English or emojis are frequently used. My guess is that it's mostly "love is blind japan" in Japanese.</span>
<span id="cb115-420"><a href="#cb115-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-423"><a href="#cb115-423" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-424"><a href="#cb115-424" aria-hidden="true" tabindex="-1"></a><span class="co">#library(emojifont) #reads japanese?</span></span>
<span id="cb115-425"><a href="#cb115-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-426"><a href="#cb115-426" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-427"><a href="#cb115-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-428"><a href="#cb115-428" aria-hidden="true" tabindex="-1"></a>twittertest <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb115-429"><a href="#cb115-429" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-430"><a href="#cb115-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-431"><a href="#cb115-431" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-432"><a href="#cb115-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-433"><a href="#cb115-433" aria-hidden="true" tabindex="-1"></a><span class="co">#twittertest &lt;- stringi::stri_trans_general(twitter_corpus, "latin-ascii")</span></span>
<span id="cb115-434"><a href="#cb115-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-435"><a href="#cb115-435" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-436"><a href="#cb115-436" aria-hidden="true" tabindex="-1"></a>twittertest <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twittertest)</span>
<span id="cb115-437"><a href="#cb115-437" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-438"><a href="#cb115-438" aria-hidden="true" tabindex="-1"></a>twittertest <span class="ot">&lt;-</span> twittertest[<span class="sc">!</span><span class="fu">is.na</span>(twittertest)]</span>
<span id="cb115-439"><a href="#cb115-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-440"><a href="#cb115-440" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens1 <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twittertest, </span>
<span id="cb115-441"><a href="#cb115-441" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-442"><a href="#cb115-442" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb115-443"><a href="#cb115-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-444"><a href="#cb115-444" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens1 <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens1)</span>
<span id="cb115-445"><a href="#cb115-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-446"><a href="#cb115-446" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens1 <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens1, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-447"><a href="#cb115-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-448"><a href="#cb115-448" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized1 <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens1, </span>
<span id="cb115-449"><a href="#cb115-449" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-450"><a href="#cb115-450" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-451"><a href="#cb115-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-452"><a href="#cb115-452" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-453"><a href="#cb115-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-454"><a href="#cb115-454" aria-hidden="true" tabindex="-1"></a>twittertest1 <span class="ot">&lt;-</span> twittertest <span class="sc">%&gt;%</span> </span>
<span id="cb115-455"><a href="#cb115-455" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-456"><a href="#cb115-456" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-457"><a href="#cb115-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-458"><a href="#cb115-458" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twittertest1, <span class="at">max_words=</span><span class="dv">100</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb115-459"><a href="#cb115-459" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-460"><a href="#cb115-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-461"><a href="#cb115-461" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-462"><a href="#cb115-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-463"><a href="#cb115-463" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">**A quick note: For some reason the TM package and word clouds were a bit finicky. It sometimes seemed to work and sometimes did not.**</span><span class="co">]</span>{.underline}</span>
<span id="cb115-464"><a href="#cb115-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-465"><a href="#cb115-465" aria-hidden="true" tabindex="-1"></a><span class="fu"># Code For New Word Clouds</span></span>
<span id="cb115-466"><a href="#cb115-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-467"><a href="#cb115-467" aria-hidden="true" tabindex="-1"></a><span class="fu">### Lemmetize</span></span>
<span id="cb115-468"><a href="#cb115-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-471"><a href="#cb115-471" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-472"><a href="#cb115-472" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb115-473"><a href="#cb115-473" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb115-474"><a href="#cb115-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-475"><a href="#cb115-475" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-476"><a href="#cb115-476" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-477"><a href="#cb115-477" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb115-478"><a href="#cb115-478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-479"><a href="#cb115-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-480"><a href="#cb115-480" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-481"><a href="#cb115-481" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(reddit_corpus, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-482"><a href="#cb115-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-483"><a href="#cb115-483" aria-hidden="true" tabindex="-1"></a><span class="co">#remove emojis</span></span>
<span id="cb115-484"><a href="#cb115-484" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-485"><a href="#cb115-485" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus <span class="sc">%&gt;%</span> </span>
<span id="cb115-486"><a href="#cb115-486" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-487"><a href="#cb115-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-488"><a href="#cb115-488" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-489"><a href="#cb115-489" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_corpus)</span>
<span id="cb115-490"><a href="#cb115-490" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb115-491"><a href="#cb115-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-492"><a href="#cb115-492" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb115-493"><a href="#cb115-493" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-494"><a href="#cb115-494" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb115-495"><a href="#cb115-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-496"><a href="#cb115-496" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb115-497"><a href="#cb115-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-498"><a href="#cb115-498" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-499"><a href="#cb115-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-500"><a href="#cb115-500" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb115-501"><a href="#cb115-501" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-502"><a href="#cb115-502" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-503"><a href="#cb115-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-504"><a href="#cb115-504" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-505"><a href="#cb115-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-506"><a href="#cb115-506" aria-hidden="true" tabindex="-1"></a>reddit_corpus_edit <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-507"><a href="#cb115-507" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-508"><a href="#cb115-508" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-509"><a href="#cb115-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-510"><a href="#cb115-510" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_edit, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span>
<span id="cb115-511"><a href="#cb115-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-512"><a href="#cb115-512" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-513"><a href="#cb115-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-516"><a href="#cb115-516" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-517"><a href="#cb115-517" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(emojifont) <span class="co">#reads japanese?</span></span>
<span id="cb115-518"><a href="#cb115-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-519"><a href="#cb115-519" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-520"><a href="#cb115-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-521"><a href="#cb115-521" aria-hidden="true" tabindex="-1"></a>twitter_corpus<span class="ot">&lt;-</span> twitter<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb115-522"><a href="#cb115-522" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-523"><a href="#cb115-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-524"><a href="#cb115-524" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb115-525"><a href="#cb115-525" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb115-526"><a href="#cb115-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-527"><a href="#cb115-527" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-528"><a href="#cb115-528" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(twitter_corpus, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-529"><a href="#cb115-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-530"><a href="#cb115-530" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-531"><a href="#cb115-531" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twitter_corpus)</span>
<span id="cb115-532"><a href="#cb115-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-533"><a href="#cb115-533" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb115-534"><a href="#cb115-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-535"><a href="#cb115-535" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb115-536"><a href="#cb115-536" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-537"><a href="#cb115-537" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb115-538"><a href="#cb115-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-539"><a href="#cb115-539" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb115-540"><a href="#cb115-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-541"><a href="#cb115-541" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-542"><a href="#cb115-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-543"><a href="#cb115-543" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb115-544"><a href="#cb115-544" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-545"><a href="#cb115-545" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-546"><a href="#cb115-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-547"><a href="#cb115-547" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-548"><a href="#cb115-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-549"><a href="#cb115-549" aria-hidden="true" tabindex="-1"></a>twitter_corpus_edit <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-550"><a href="#cb115-550" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-551"><a href="#cb115-551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-552"><a href="#cb115-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-553"><a href="#cb115-553" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_edit, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb115-554"><a href="#cb115-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-555"><a href="#cb115-555" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-556"><a href="#cb115-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-557"><a href="#cb115-557" aria-hidden="true" tabindex="-1"></a>Some interesting facts for Lemmetize plot</span>
<span id="cb115-558"><a href="#cb115-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-559"><a href="#cb115-559" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>#loveisblindjapan is one of the largest along with blind, love and japan for twitter. This is unsurprising as that's the name of the show.</span>
<span id="cb115-560"><a href="#cb115-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-561"><a href="#cb115-561" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Reddit used the word like and think a lot. However interestingly Japanese is mentioned more than the word Japan.</span>
<span id="cb115-562"><a href="#cb115-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-563"><a href="#cb115-563" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The names of the actual contestants are not mentioned as much as I would think. They're still mentioned often but are not major words in the word cloud.</span>
<span id="cb115-564"><a href="#cb115-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-565"><a href="#cb115-565" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Japanese characters and possibly emojis both made there way into the word cloud. I'm unsure why.</span>
<span id="cb115-566"><a href="#cb115-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-567"><a href="#cb115-567" aria-hidden="true" tabindex="-1"></a><span class="fu">### TM Package</span></span>
<span id="cb115-568"><a href="#cb115-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-571"><a href="#cb115-571" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-572"><a href="#cb115-572" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb115-573"><a href="#cb115-573" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-574"><a href="#cb115-574" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-575"><a href="#cb115-575" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-576"><a href="#cb115-576" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> reddit<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb115-577"><a href="#cb115-577" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-578"><a href="#cb115-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-579"><a href="#cb115-579" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-580"><a href="#cb115-580" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(reddit_tm, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-581"><a href="#cb115-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-582"><a href="#cb115-582" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-583"><a href="#cb115-583" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, reddit_tm)</span>
<span id="cb115-584"><a href="#cb115-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-585"><a href="#cb115-585" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(reddit_tm))</span>
<span id="cb115-586"><a href="#cb115-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-587"><a href="#cb115-587" aria-hidden="true" tabindex="-1"></a><span class="co">#change non letters to spaces</span></span>
<span id="cb115-588"><a href="#cb115-588" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb115-589"><a href="#cb115-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-590"><a href="#cb115-590" aria-hidden="true" tabindex="-1"></a>reddit_tm <span class="ot">&lt;-</span> reddit_tm <span class="sc">%&gt;%</span></span>
<span id="cb115-591"><a href="#cb115-591" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb115-592"><a href="#cb115-592" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove multiple white space</span></span>
<span id="cb115-593"><a href="#cb115-593" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-594"><a href="#cb115-594" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-595"><a href="#cb115-595" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-596"><a href="#cb115-596" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-597"><a href="#cb115-597" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span>
<span id="cb115-598"><a href="#cb115-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-599"><a href="#cb115-599" aria-hidden="true" tabindex="-1"></a>reddit_dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(reddit_tm) </span>
<span id="cb115-600"><a href="#cb115-600" aria-hidden="true" tabindex="-1"></a>reddit_matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(reddit_dtm) </span>
<span id="cb115-601"><a href="#cb115-601" aria-hidden="true" tabindex="-1"></a>reddit_words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(reddit_matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb115-602"><a href="#cb115-602" aria-hidden="true" tabindex="-1"></a>reddit_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">words =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span>
<span id="cb115-603"><a href="#cb115-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-604"><a href="#cb115-604" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>) <span class="co"># for reproducibility </span></span>
<span id="cb115-605"><a href="#cb115-605" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> reddit_df<span class="sc">$</span>word, <span class="at">freq =</span> reddit_df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">50</span>,           <span class="at">max.words=</span><span class="dv">100</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>,            <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb115-606"><a href="#cb115-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-607"><a href="#cb115-607" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-608"><a href="#cb115-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-611"><a href="#cb115-611" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-612"><a href="#cb115-612" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter)</span>
<span id="cb115-613"><a href="#cb115-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-614"><a href="#cb115-614" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u03FF]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb115-615"><a href="#cb115-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-616"><a href="#cb115-616" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text <span class="sc">%&gt;%</span></span>
<span id="cb115-617"><a href="#cb115-617" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-618"><a href="#cb115-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-619"><a href="#cb115-619" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-620"><a href="#cb115-620" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(twitter_tm, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-621"><a href="#cb115-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-622"><a href="#cb115-622" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-623"><a href="#cb115-623" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, twitter_tm)</span>
<span id="cb115-624"><a href="#cb115-624" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-625"><a href="#cb115-625" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> <span class="fu">Corpus</span>(<span class="fu">VectorSource</span>(twitter_tm))</span>
<span id="cb115-626"><a href="#cb115-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-627"><a href="#cb115-627" aria-hidden="true" tabindex="-1"></a><span class="co">#change non letters to spaces</span></span>
<span id="cb115-628"><a href="#cb115-628" aria-hidden="true" tabindex="-1"></a>toSpace <span class="ot">&lt;-</span> <span class="fu">content_transformer</span>(<span class="cf">function</span> (x , pattern ) <span class="fu">gsub</span>(pattern, <span class="st">" "</span>, x))</span>
<span id="cb115-629"><a href="#cb115-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-630"><a href="#cb115-630" aria-hidden="true" tabindex="-1"></a>twitter_tm <span class="ot">&lt;-</span> twitter_tm <span class="sc">%&gt;%</span></span>
<span id="cb115-631"><a href="#cb115-631" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removePunctuation) <span class="sc">%&gt;%</span></span>
<span id="cb115-632"><a href="#cb115-632" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(stripWhitespace) <span class="sc">%&gt;%</span> <span class="co"># remove multiple white space</span></span>
<span id="cb115-633"><a href="#cb115-633" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"/"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-634"><a href="#cb115-634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"@"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-635"><a href="#cb115-635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(toSpace, <span class="st">"</span><span class="sc">\\</span><span class="st">|"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb115-636"><a href="#cb115-636" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(<span class="fu">content_transformer</span>(tolower)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-637"><a href="#cb115-637" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tm_map</span>(removeWords, <span class="fu">stopwords</span>(<span class="st">"english"</span>)) <span class="co"># remove stop words</span></span>
<span id="cb115-638"><a href="#cb115-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-639"><a href="#cb115-639" aria-hidden="true" tabindex="-1"></a>twitter_dtm <span class="ot">&lt;-</span> <span class="fu">TermDocumentMatrix</span>(twitter_tm) </span>
<span id="cb115-640"><a href="#cb115-640" aria-hidden="true" tabindex="-1"></a>twitter_matrix <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(twitter_dtm) </span>
<span id="cb115-641"><a href="#cb115-641" aria-hidden="true" tabindex="-1"></a>twitter_words <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">rowSums</span>(twitter_matrix),<span class="at">decreasing=</span><span class="cn">TRUE</span>) </span>
<span id="cb115-642"><a href="#cb115-642" aria-hidden="true" tabindex="-1"></a>twitter_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">words =</span> <span class="fu">names</span>(words),<span class="at">freq=</span>words)</span>
<span id="cb115-643"><a href="#cb115-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-644"><a href="#cb115-644" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">12345</span>) <span class="co"># for reproducibility </span></span>
<span id="cb115-645"><a href="#cb115-645" aria-hidden="true" tabindex="-1"></a><span class="fu">wordcloud</span>(<span class="at">words =</span> twitter_df<span class="sc">$</span>word, <span class="at">freq =</span> twitter_df<span class="sc">$</span>freq, <span class="at">min.freq =</span> <span class="dv">50</span>,           <span class="at">max.words=</span><span class="dv">100</span>, <span class="at">random.order=</span><span class="cn">FALSE</span>, <span class="at">rot.per=</span><span class="fl">0.35</span>,            <span class="at">colors=</span><span class="fu">brewer.pal</span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</span>
<span id="cb115-646"><a href="#cb115-646" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-647"><a href="#cb115-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-648"><a href="#cb115-648" aria-hidden="true" tabindex="-1"></a>Some interesting facts for TM:</span>
<span id="cb115-649"><a href="#cb115-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-650"><a href="#cb115-650" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I thought that the 's was part of some sort of stop word. However it seems that it isn't for either. My guess is it may follow names of people in the show.</span>
<span id="cb115-651"><a href="#cb115-651" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Even with another version of removing emojis and non English there still seems to be some in the data, however not very much.</span>
<span id="cb115-652"><a href="#cb115-652" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Like and think were both very popular words for Twitter and Reddit.</span>
<span id="cb115-653"><a href="#cb115-653" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Not all the contestants were posted about the same amount.</span>
<span id="cb115-654"><a href="#cb115-654" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Despite the show being about marriage, the words married, marry, or marriage weren't the top words for either Twitter or Reddit.</span>
<span id="cb115-655"><a href="#cb115-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-656"><a href="#cb115-656" aria-hidden="true" tabindex="-1"></a>Overall between the two types of word clouds, I prefer the **lemmitized version** so I will continue using that one.</span>
<span id="cb115-657"><a href="#cb115-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-658"><a href="#cb115-658" aria-hidden="true" tabindex="-1"></a>However I am surprised by the fact that they're so different. The only difference in code is really the "toSpace" which removes just a couple of extra things.</span>
<span id="cb115-659"><a href="#cb115-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-660"><a href="#cb115-660" aria-hidden="true" tabindex="-1"></a><span class="fu">## Emoji Thoughts</span></span>
<span id="cb115-661"><a href="#cb115-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-662"><a href="#cb115-662" aria-hidden="true" tabindex="-1"></a>Using the function that I found from the DACSS slack channel I found that it also has a nice side affect of removing non English as well.</span>
<span id="cb115-663"><a href="#cb115-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-664"><a href="#cb115-664" aria-hidden="true" tabindex="-1"></a>Additionally I've noticed that there's has been few emojis that have made it into the word cloud. I also don't feel confident in decoding emojis and being able to do a sentiment analysis.</span>
<span id="cb115-665"><a href="#cb115-665" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-666"><a href="#cb115-666" aria-hidden="true" tabindex="-1"></a>**Thus for this project I will not keep emojis.**</span>
<span id="cb115-667"><a href="#cb115-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-668"><a href="#cb115-668" aria-hidden="true" tabindex="-1"></a><span class="fu">### Attempting to Remove Japanese</span></span>
<span id="cb115-669"><a href="#cb115-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-670"><a href="#cb115-670" aria-hidden="true" tabindex="-1"></a>Since I noticed there was a lot of Japanese still left in the word cloud I went to test if I could remove more with the previous function I had used. This along with the other three options seems to have the best results!</span>
<span id="cb115-671"><a href="#cb115-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-672"><a href="#cb115-672" aria-hidden="true" tabindex="-1"></a>Below you will see a test version.</span>
<span id="cb115-673"><a href="#cb115-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-676"><a href="#cb115-676" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-677"><a href="#cb115-677" aria-hidden="true" tabindex="-1"></a>str_rm_jap <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb115-678"><a href="#cb115-678" aria-hidden="true" tabindex="-1"></a>  <span class="co">#we replace japanese blocks with nothing, and clean any double whitespace from this</span></span>
<span id="cb115-679"><a href="#cb115-679" aria-hidden="true" tabindex="-1"></a>  <span class="co">#reference at http://www.rikai.com/library/kanjitables/kanji_codes.unicode.shtml</span></span>
<span id="cb115-680"><a href="#cb115-680" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span> </span>
<span id="cb115-681"><a href="#cb115-681" aria-hidden="true" tabindex="-1"></a>    <span class="co">#japanese style punctuation</span></span>
<span id="cb115-682"><a href="#cb115-682" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3000-\u303F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-683"><a href="#cb115-683" aria-hidden="true" tabindex="-1"></a>    <span class="co">#katakana</span></span>
<span id="cb115-684"><a href="#cb115-684" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u30A0-\u30FF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-685"><a href="#cb115-685" aria-hidden="true" tabindex="-1"></a>    <span class="co">#hiragana</span></span>
<span id="cb115-686"><a href="#cb115-686" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3040-\u309F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-687"><a href="#cb115-687" aria-hidden="true" tabindex="-1"></a>    <span class="co">#kanji</span></span>
<span id="cb115-688"><a href="#cb115-688" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u4E00-\u9FAF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-689"><a href="#cb115-689" aria-hidden="true" tabindex="-1"></a>    <span class="co">#remove excess whitespace</span></span>
<span id="cb115-690"><a href="#cb115-690" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"  +"</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-691"><a href="#cb115-691" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb115-692"><a href="#cb115-692" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb115-693"><a href="#cb115-693" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-694"><a href="#cb115-694" aria-hidden="true" tabindex="-1"></a>test_corpus<span class="ot">&lt;-</span> twitter<span class="sc">$</span>text<span class="sc">%&gt;%</span> str_rm_jap</span>
<span id="cb115-695"><a href="#cb115-695" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-696"><a href="#cb115-696" aria-hidden="true" tabindex="-1"></a>test_posts <span class="ot">&lt;-</span> test_corpus <span class="sc">%&gt;%</span></span>
<span id="cb115-697"><a href="#cb115-697" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb115-698"><a href="#cb115-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-699"><a href="#cb115-699" aria-hidden="true" tabindex="-1"></a><span class="co">#remove non english languages </span></span>
<span id="cb115-700"><a href="#cb115-700" aria-hidden="true" tabindex="-1"></a>test_posts <span class="ot">&lt;-</span> stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(test_posts, <span class="st">"latin-ascii"</span>)</span>
<span id="cb115-701"><a href="#cb115-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-702"><a href="#cb115-702" aria-hidden="true" tabindex="-1"></a><span class="co">#remove htmls</span></span>
<span id="cb115-703"><a href="#cb115-703" aria-hidden="true" tabindex="-1"></a>test_corpus <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test_corpus)</span>
<span id="cb115-704"><a href="#cb115-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-705"><a href="#cb115-705" aria-hidden="true" tabindex="-1"></a>test_corpus <span class="ot">&lt;-</span> test_corpus[<span class="sc">!</span><span class="fu">is.na</span>(test_corpus)]</span>
<span id="cb115-706"><a href="#cb115-706" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-707"><a href="#cb115-707" aria-hidden="true" tabindex="-1"></a>test_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(test_corpus, </span>
<span id="cb115-708"><a href="#cb115-708" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-709"><a href="#cb115-709" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb115-710"><a href="#cb115-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-711"><a href="#cb115-711" aria-hidden="true" tabindex="-1"></a>test_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(test_corpus_tokens)</span>
<span id="cb115-712"><a href="#cb115-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-713"><a href="#cb115-713" aria-hidden="true" tabindex="-1"></a>test_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(test_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-714"><a href="#cb115-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-715"><a href="#cb115-715" aria-hidden="true" tabindex="-1"></a>test_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(test_corpus_tokens, </span>
<span id="cb115-716"><a href="#cb115-716" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-717"><a href="#cb115-717" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-718"><a href="#cb115-718" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-719"><a href="#cb115-719" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-720"><a href="#cb115-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-721"><a href="#cb115-721" aria-hidden="true" tabindex="-1"></a>test_corpus_edit <span class="ot">&lt;-</span> test_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-722"><a href="#cb115-722" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-723"><a href="#cb115-723" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">50</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-724"><a href="#cb115-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-725"><a href="#cb115-725" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(test_corpus_edit, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb115-726"><a href="#cb115-726" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-727"><a href="#cb115-727" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-728"><a href="#cb115-728" aria-hidden="true" tabindex="-1"></a>While doing this I noticed there were a lot of Spanish words as well. In order to combat this I decided to go back to using the subset function.</span>
<span id="cb115-729"><a href="#cb115-729" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-730"><a href="#cb115-730" aria-hidden="true" tabindex="-1"></a><span class="fu">### Removing all non English</span></span>
<span id="cb115-731"><a href="#cb115-731" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-732"><a href="#cb115-732" aria-hidden="true" tabindex="-1"></a>While this has taken care of a lot of issues, unfortunately it has removed a lot of data. This has left me with only **7,990 tweets** out of the original 14,866.</span>
<span id="cb115-733"><a href="#cb115-733" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-734"><a href="#cb115-734" aria-hidden="true" tabindex="-1"></a>I also have added remove_symbols to the tokens.</span>
<span id="cb115-735"><a href="#cb115-735" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-738"><a href="#cb115-738" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-739"><a href="#cb115-739" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter<span class="sc">$</span>text)</span>
<span id="cb115-740"><a href="#cb115-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-741"><a href="#cb115-741" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb115-742"><a href="#cb115-742" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">subset</span>(test, <span class="fu">detect_language</span>(test) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb115-743"><a href="#cb115-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-744"><a href="#cb115-744" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, test)</span>
<span id="cb115-745"><a href="#cb115-745" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-746"><a href="#cb115-746" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> test[<span class="sc">!</span><span class="fu">is.na</span>(test)]</span>
<span id="cb115-747"><a href="#cb115-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-748"><a href="#cb115-748" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(test, </span>
<span id="cb115-749"><a href="#cb115-749" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-750"><a href="#cb115-750" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb115-751"><a href="#cb115-751" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T)</span>
<span id="cb115-752"><a href="#cb115-752" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-753"><a href="#cb115-753" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(test_tokens)</span>
<span id="cb115-754"><a href="#cb115-754" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-755"><a href="#cb115-755" aria-hidden="true" tabindex="-1"></a>test_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(test_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-756"><a href="#cb115-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-757"><a href="#cb115-757" aria-hidden="true" tabindex="-1"></a>tests_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(test_tokens, </span>
<span id="cb115-758"><a href="#cb115-758" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-759"><a href="#cb115-759" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-760"><a href="#cb115-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-761"><a href="#cb115-761" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-762"><a href="#cb115-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-763"><a href="#cb115-763" aria-hidden="true" tabindex="-1"></a>test_edit <span class="ot">&lt;-</span> tests_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-764"><a href="#cb115-764" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>(<span class="at">remove =</span> <span class="fu">stopwords</span>(<span class="st">'english'</span>), <span class="at">remove_punct =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-765"><a href="#cb115-765" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">50</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-766"><a href="#cb115-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-767"><a href="#cb115-767" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(test_edit, <span class="at">max_words=</span><span class="dv">300</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb115-768"><a href="#cb115-768" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-769"><a href="#cb115-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-770"><a href="#cb115-770" aria-hidden="true" tabindex="-1"></a><span class="fu"># Updated Word Cloud Code</span></span>
<span id="cb115-771"><a href="#cb115-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-772"><a href="#cb115-772" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit word cloud 2}</span></span>
<span id="cb115-773"><a href="#cb115-773" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb115-774"><a href="#cb115-774" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb115-775"><a href="#cb115-775" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb115-776"><a href="#cb115-776" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb115-777"><a href="#cb115-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-778"><a href="#cb115-778" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb115-779"><a href="#cb115-779" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-780"><a href="#cb115-780" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb115-781"><a href="#cb115-781" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb115-782"><a href="#cb115-782" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb115-783"><a href="#cb115-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-784"><a href="#cb115-784" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb115-785"><a href="#cb115-785" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-786"><a href="#cb115-786" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-787"><a href="#cb115-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-788"><a href="#cb115-788" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb115-789"><a href="#cb115-789" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-790"><a href="#cb115-790" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-791"><a href="#cb115-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-792"><a href="#cb115-792" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-793"><a href="#cb115-793" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-794"><a href="#cb115-794" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-795"><a href="#cb115-795" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb115-796"><a href="#cb115-796" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-797"><a href="#cb115-797" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-798"><a href="#cb115-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-799"><a href="#cb115-799" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span>
<span id="cb115-800"><a href="#cb115-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-801"><a href="#cb115-801" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-802"><a href="#cb115-802" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-805"><a href="#cb115-805" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-806"><a href="#cb115-806" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb115-807"><a href="#cb115-807" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb115-808"><a href="#cb115-808" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb115-809"><a href="#cb115-809" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb115-810"><a href="#cb115-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-811"><a href="#cb115-811" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb115-812"><a href="#cb115-812" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-813"><a href="#cb115-813" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb115-814"><a href="#cb115-814" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb115-815"><a href="#cb115-815" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb115-816"><a href="#cb115-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-817"><a href="#cb115-817" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb115-818"><a href="#cb115-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-819"><a href="#cb115-819" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-820"><a href="#cb115-820" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-821"><a href="#cb115-821" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb115-822"><a href="#cb115-822" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-823"><a href="#cb115-823" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-824"><a href="#cb115-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-825"><a href="#cb115-825" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-826"><a href="#cb115-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-827"><a href="#cb115-827" aria-hidden="true" tabindex="-1"></a>twitter_corpus_dfm <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-828"><a href="#cb115-828" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb115-829"><a href="#cb115-829" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-830"><a href="#cb115-830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-831"><a href="#cb115-831" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-832"><a href="#cb115-832" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb115-833"><a href="#cb115-833" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-834"><a href="#cb115-834" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-835"><a href="#cb115-835" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-836"><a href="#cb115-836" aria-hidden="true" tabindex="-1"></a><span class="in">```{r both social medias word cloud}</span></span>
<span id="cb115-837"><a href="#cb115-837" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(allsocialmedia, <span class="fu">detect_language</span>(allsocialmedia) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb115-838"><a href="#cb115-838" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(social_corpus)</span>
<span id="cb115-839"><a href="#cb115-839" aria-hidden="true" tabindex="-1"></a>socialsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(social_corpus)</span>
<span id="cb115-840"><a href="#cb115-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-841"><a href="#cb115-841" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> social_corpus[<span class="sc">!</span><span class="fu">is.na</span>(social_corpus)]</span>
<span id="cb115-842"><a href="#cb115-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-843"><a href="#cb115-843" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(social_corpus, </span>
<span id="cb115-844"><a href="#cb115-844" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-845"><a href="#cb115-845" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb115-846"><a href="#cb115-846" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb115-847"><a href="#cb115-847" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb115-848"><a href="#cb115-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-849"><a href="#cb115-849" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(social_corpus_tokens)</span>
<span id="cb115-850"><a href="#cb115-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-851"><a href="#cb115-851" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(social_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-852"><a href="#cb115-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-853"><a href="#cb115-853" aria-hidden="true" tabindex="-1"></a>social_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(social_corpus_tokens, </span>
<span id="cb115-854"><a href="#cb115-854" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-855"><a href="#cb115-855" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-856"><a href="#cb115-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-857"><a href="#cb115-857" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-858"><a href="#cb115-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-859"><a href="#cb115-859" aria-hidden="true" tabindex="-1"></a>social_corpus_dfm <span class="ot">&lt;-</span> social_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-860"><a href="#cb115-860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb115-861"><a href="#cb115-861" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-862"><a href="#cb115-862" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-863"><a href="#cb115-863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-864"><a href="#cb115-864" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(social_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"orange"</span>)</span>
<span id="cb115-865"><a href="#cb115-865" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-866"><a href="#cb115-866" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-867"><a href="#cb115-867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-868"><a href="#cb115-868" aria-hidden="true" tabindex="-1"></a><span class="fu"># Looking at the Data Closer</span></span>
<span id="cb115-869"><a href="#cb115-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-870"><a href="#cb115-870" aria-hidden="true" tabindex="-1"></a>Below you will see some quick looks at data.</span>
<span id="cb115-871"><a href="#cb115-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-874"><a href="#cb115-874" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-875"><a href="#cb115-875" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(social_corpus_dfm, <span class="dv">10</span>)</span>
<span id="cb115-876"><a href="#cb115-876" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(twitter_corpus_dfm, <span class="dv">10</span>)</span>
<span id="cb115-877"><a href="#cb115-877" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(reddit_corpus_dfm, <span class="dv">10</span>)</span>
<span id="cb115-878"><a href="#cb115-878" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-879"><a href="#cb115-879" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-880"><a href="#cb115-880" aria-hidden="true" tabindex="-1"></a>Here we can see that overall the top ten words:</span>
<span id="cb115-881"><a href="#cb115-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-882"><a href="#cb115-882" aria-hidden="true" tabindex="-1"></a>| All Social Media  | Twitter           | Reddit |</span>
<span id="cb115-883"><a href="#cb115-883" aria-hidden="true" tabindex="-1"></a>|-------------------|-------------------|--------|</span>
<span id="cb115-884"><a href="#cb115-884" aria-hidden="true" tabindex="-1"></a>| love              | love              | like   |</span>
<span id="cb115-885"><a href="#cb115-885" aria-hidden="true" tabindex="-1"></a>| japan             | blind             | think  |</span>
<span id="cb115-886"><a href="#cb115-886" aria-hidden="true" tabindex="-1"></a>| like              | japan             | say    |</span>
<span id="cb115-887"><a href="#cb115-887" aria-hidden="true" tabindex="-1"></a>| blind             | #loveisblindjapan | just   |</span>
<span id="cb115-888"><a href="#cb115-888" aria-hidden="true" tabindex="-1"></a>| think             | watch             | good   |</span>
<span id="cb115-889"><a href="#cb115-889" aria-hidden="true" tabindex="-1"></a>| just              | like              | get    |</span>
<span id="cb115-890"><a href="#cb115-890" aria-hidden="true" tabindex="-1"></a>| #loveisblindjapan | good              | show   |</span>
<span id="cb115-891"><a href="#cb115-891" aria-hidden="true" tabindex="-1"></a>| good              | just              | really |</span>
<span id="cb115-892"><a href="#cb115-892" aria-hidden="true" tabindex="-1"></a>| say               | get               | see    |</span>
<span id="cb115-893"><a href="#cb115-893" aria-hidden="true" tabindex="-1"></a>| get               | show              | feel   |</span>
<span id="cb115-894"><a href="#cb115-894" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-895"><a href="#cb115-895" aria-hidden="true" tabindex="-1"></a>: ~Love&nbsp;is&nbsp;Blind&nbsp;Japan&nbsp;Top&nbsp;Features~</span>
<span id="cb115-896"><a href="#cb115-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-897"><a href="#cb115-897" aria-hidden="true" tabindex="-1"></a>Here we can see a few things:</span>
<span id="cb115-898"><a href="#cb115-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-899"><a href="#cb115-899" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>While "love", "blind", and "japan" are the top features in Twitter, this is most likely due to the show's name. When comparing this to both the category social media that combine them and Reddit, like made it much higher.</span>
<span id="cb115-900"><a href="#cb115-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-901"><a href="#cb115-901" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>All three column's top ten words have multiple words that are focusing on how people are watching the show feel.</span>
<span id="cb115-902"><a href="#cb115-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-903"><a href="#cb115-903" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>From this brief look it seems there's a positive thought on show as "good" were both in the top ten for Twitter and Reddit.</span>
<span id="cb115-904"><a href="#cb115-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-905"><a href="#cb115-905" aria-hidden="true" tabindex="-1"></a><span class="fu">## Trying a Co-occurrence Matrix</span></span>
<span id="cb115-906"><a href="#cb115-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-907"><a href="#cb115-907" aria-hidden="true" tabindex="-1"></a>I will give a test try to having a max term frequency for Twitter, as Twitter's top four words have to do with the shows name.</span>
<span id="cb115-908"><a href="#cb115-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-911"><a href="#cb115-911" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-912"><a href="#cb115-912" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb115-913"><a href="#cb115-913" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(twitter_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">30</span>)</span>
<span id="cb115-914"><a href="#cb115-914" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(smaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb115-915"><a href="#cb115-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-916"><a href="#cb115-916" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(smaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb115-917"><a href="#cb115-917" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-918"><a href="#cb115-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-919"><a href="#cb115-919" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb115-920"><a href="#cb115-920" aria-hidden="true" tabindex="-1"></a>smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(smaller_dfm)</span>
<span id="cb115-921"><a href="#cb115-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-922"><a href="#cb115-922" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb115-923"><a href="#cb115-923" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb115-924"><a href="#cb115-924" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(smaller_fcm)</span>
<span id="cb115-925"><a href="#cb115-925" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-926"><a href="#cb115-926" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(smaller_fcm, <span class="dv">30</span>))</span>
<span id="cb115-927"><a href="#cb115-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-928"><a href="#cb115-928" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb115-929"><a href="#cb115-929" aria-hidden="true" tabindex="-1"></a>even_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(smaller_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb115-930"><a href="#cb115-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-931"><a href="#cb115-931" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb115-932"><a href="#cb115-932" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(even_smaller_fcm)</span>
<span id="cb115-933"><a href="#cb115-933" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-934"><a href="#cb115-934" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb115-935"><a href="#cb115-935" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(even_smaller_fcm))</span>
<span id="cb115-936"><a href="#cb115-936" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-937"><a href="#cb115-937" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb115-938"><a href="#cb115-938" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(even_smaller_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span>
<span id="cb115-939"><a href="#cb115-939" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-940"><a href="#cb115-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-941"><a href="#cb115-941" aria-hidden="true" tabindex="-1"></a><span class="fu"># Final Thoughts (TLDR)</span></span>
<span id="cb115-942"><a href="#cb115-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-943"><a href="#cb115-943" aria-hidden="true" tabindex="-1"></a><span class="fu">## Final thoughts</span></span>
<span id="cb115-944"><a href="#cb115-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-945"><a href="#cb115-945" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I did end up looking at Youtube to see if there were clips of this show online that were from Netflix. There unfortunately only seemed to be a trailer for the show. Clips of this season were fairly rare there.</span>
<span id="cb115-946"><a href="#cb115-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-947"><a href="#cb115-947" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>After debating for awhile I decided to use the subset language option to remove all other languages for Twitter (Reddit did not have this problem most likely due to the main user base being English speaking Americans). Although this did cut my database down significantly I believe this was the best option as it removes any other language that I'm currently unable to analyze properly.</span>
<span id="cb115-948"><a href="#cb115-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-949"><a href="#cb115-949" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Conversely Reddit had very few other languages. However to keep the data similar I used subset for Reddit too.</span>
<span id="cb115-950"><a href="#cb115-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-951"><a href="#cb115-951" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>This was also done so if I would like to use both the separate data and the data combined it is the same.</span>
<span id="cb115-952"><a href="#cb115-952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-953"><a href="#cb115-953" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I decided to use the quanteda.textplots for the word cloud instead of the TM package. This is due to the TM package having issues when I try to reload the word clouds.</span>
<span id="cb115-954"><a href="#cb115-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-955"><a href="#cb115-955" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I have decided to lemmitize my tokens as it works to create a more accurate picture of words that were important to both Twitter and Reddit posters.</span>
<span id="cb115-956"><a href="#cb115-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-957"><a href="#cb115-957" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I have removed emojis due to the issues of most of the emoji packages I have found not working. Additionally I'm not confident that I could accurately use them for a sentiment analysis, or that there are that many in the first place.</span>
<span id="cb115-958"><a href="#cb115-958" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-959"><a href="#cb115-959" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>For my tokens I have added remove_symbols and remove_url for both Reddit and Twitter to help out with people spamming urls to shows or gifs, and the "\@" sign.</span>
<span id="cb115-960"><a href="#cb115-960" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-961"><a href="#cb115-961" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>When I checked the top features it was interesting to see what words were used the most. While none of it was surprising, it did help me to understand the words a bit more.</span>
<span id="cb115-962"><a href="#cb115-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-963"><a href="#cb115-963" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I believe a co-occurance matrix may be useful for Twitter as it allows me to remove the name of the show and the hashtag better.</span>
<span id="cb115-964"><a href="#cb115-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-965"><a href="#cb115-965" aria-hidden="true" tabindex="-1"></a><span class="fu">## Questions and frustrations I still have</span></span>
<span id="cb115-966"><a href="#cb115-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-967"><a href="#cb115-967" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I'm still unsure how to keep **both the date and the text** as separate columns using the corpus() function from quanteda. I can keep it in the summary, but I'm not sure if I can use the dates outside of that.</span>
<span id="cb115-968"><a href="#cb115-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-969"><a href="#cb115-969" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>The summary also only goes to 100, I'm not sure how I can make it show me all of the data either.</span>
<span id="cb115-970"><a href="#cb115-970" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>When I tried having a maximum frequency for Twitter's word cloud it did bring out the dates in the word cloud but I'm not sure if that solves my problem either.</span>
<span id="cb115-971"><a href="#cb115-971" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-972"><a href="#cb115-972" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I am unsure if looking at all the data together or separately is currently the best. I have a word cloud using all the social media data below. This would change my research question.</span>
<span id="cb115-973"><a href="#cb115-973" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-974"><a href="#cb115-974" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**Current Research Question:** How do Reddit and Twitter users feel about the show *Love is Blind Japan*?</span>
<span id="cb115-975"><a href="#cb115-975" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-976"><a href="#cb115-976" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>**Possibly Research Question:** How do Reddit and Twitter users sentiment differentiate about the show *Love is Blind Japan*?</span>
<span id="cb115-977"><a href="#cb115-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-978"><a href="#cb115-978" aria-hidden="true" tabindex="-1"></a><span class="ss">        -   </span>This is the question I had previously.</span>
<span id="cb115-979"><a href="#cb115-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-980"><a href="#cb115-980" aria-hidden="true" tabindex="-1"></a><span class="fu">## Future Work</span></span>
<span id="cb115-981"><a href="#cb115-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-982"><a href="#cb115-982" aria-hidden="true" tabindex="-1"></a>Here are a few things I'd like to do in blog post 4:</span>
<span id="cb115-983"><a href="#cb115-983" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-984"><a href="#cb115-984" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Try to group by date.** With the date column seemingly working now I'd like to see if grouping by date would work.</span>
<span id="cb115-985"><a href="#cb115-985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-986"><a href="#cb115-986" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Try to use the textplot_network on reddit as well as the combined data set.** Although I'm not sure if I will I think it could produce some interesting results.</span>
<span id="cb115-987"><a href="#cb115-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-988"><a href="#cb115-988" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Try to find a way to remove the dates from the word clouds.** My current thought is to just make a separate r chunk that only has twitter\$text to remove the dates.</span>
<span id="cb115-989"><a href="#cb115-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-990"><a href="#cb115-990" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**Try to decide on how or if I want to use co-occurrence.**</span>
<span id="cb115-991"><a href="#cb115-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-992"><a href="#cb115-992" aria-hidden="true" tabindex="-1"></a><span class="fu"># Final Code</span></span>
<span id="cb115-993"><a href="#cb115-993" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-996"><a href="#cb115-996" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-997"><a href="#cb115-997" aria-hidden="true" tabindex="-1"></a><span class="co">#write csv has been commented out due to it continously trying to save an "updated version" in Git. </span></span>
<span id="cb115-998"><a href="#cb115-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-999"><a href="#cb115-999" aria-hidden="true" tabindex="-1"></a>reddit_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblindjapan.csv"</span>))</span>
<span id="cb115-1000"><a href="#cb115-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1001"><a href="#cb115-1001" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets.csv"</span>))</span>
<span id="cb115-1002"><a href="#cb115-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1003"><a href="#cb115-1003" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets#.csv"</span>))</span>
<span id="cb115-1004"><a href="#cb115-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1005"><a href="#cb115-1005" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_data, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"body"</span>, <span class="st">"created_utc"</span>)) </span>
<span id="cb115-1006"><a href="#cb115-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1007"><a href="#cb115-1007" aria-hidden="true" tabindex="-1"></a>reddit<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.Date.POSIXct</span>(reddit<span class="sc">$</span>created_utc)</span>
<span id="cb115-1008"><a href="#cb115-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1009"><a href="#cb115-1009" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb115-1010"><a href="#cb115-1010" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">text =</span> body, </span>
<span id="cb115-1011"><a href="#cb115-1011" aria-hidden="true" tabindex="-1"></a>            <span class="at">date =</span> created_utc)</span>
<span id="cb115-1012"><a href="#cb115-1012" aria-hidden="true" tabindex="-1"></a><span class="co"># remove deleted or removed comments by moderators of the subreddit (ones that only contain [deleted] or [removed])</span></span>
<span id="cb115-1013"><a href="#cb115-1013" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb115-1014"><a href="#cb115-1014" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[deleted]'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-1015"><a href="#cb115-1015" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[removed]'</span>)</span>
<span id="cb115-1016"><a href="#cb115-1016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1017"><a href="#cb115-1017" aria-hidden="true" tabindex="-1"></a><span class="co">#remove counting column</span></span>
<span id="cb115-1018"><a href="#cb115-1018" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> twitter1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb115-1019"><a href="#cb115-1019" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> twitter2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb115-1020"><a href="#cb115-1020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1021"><a href="#cb115-1021" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter1, twitter2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'Tweet'</span>,<span class="st">'Tweet'</span>, <span class="st">'Date'</span>, <span class="st">'Date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb115-1022"><a href="#cb115-1022" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "twitter.csv") , all(T) )</span></span>
<span id="cb115-1023"><a href="#cb115-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1024"><a href="#cb115-1024" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(twitter) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(twitter))</span>
<span id="cb115-1025"><a href="#cb115-1025" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> </span>
<span id="cb115-1026"><a href="#cb115-1026" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="st">'tweet'</span>, <span class="sc">~</span> <span class="st">'text'</span>, </span>
<span id="cb115-1027"><a href="#cb115-1027" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Date'</span> <span class="sc">~</span> <span class="st">'date'</span>)</span>
<span id="cb115-1028"><a href="#cb115-1028" aria-hidden="true" tabindex="-1"></a>twitter<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">strftime</span>(twitter<span class="sc">$</span>date, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>))</span>
<span id="cb115-1029"><a href="#cb115-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1030"><a href="#cb115-1030" aria-hidden="true" tabindex="-1"></a><span class="co"># remove duplicate tweets</span></span>
<span id="cb115-1031"><a href="#cb115-1031" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(text, date, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb115-1032"><a href="#cb115-1032" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1033"><a href="#cb115-1033" aria-hidden="true" tabindex="-1"></a><span class="co">#check for duplicate tweets</span></span>
<span id="cb115-1034"><a href="#cb115-1034" aria-hidden="true" tabindex="-1"></a>twitter <span class="sc">%in%</span> <span class="fu">unique</span>(twitter[ <span class="fu">duplicated</span>(twitter)]) </span>
<span id="cb115-1035"><a href="#cb115-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1036"><a href="#cb115-1036" aria-hidden="true" tabindex="-1"></a>allsocialmedia <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter, reddit, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'text'</span>,<span class="st">'text'</span>, <span class="st">'date'</span>, <span class="st">'date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb115-1037"><a href="#cb115-1037" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "loveisblind_socialmedia.csv") , all(T) )</span></span>
<span id="cb115-1038"><a href="#cb115-1038" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-1039"><a href="#cb115-1039" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1042"><a href="#cb115-1042" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-1043"><a href="#cb115-1043" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb115-1044"><a href="#cb115-1044" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb115-1045"><a href="#cb115-1045" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit)</span>
<span id="cb115-1046"><a href="#cb115-1046" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb115-1047"><a href="#cb115-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1048"><a href="#cb115-1048" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb115-1049"><a href="#cb115-1049" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-1050"><a href="#cb115-1050" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb115-1051"><a href="#cb115-1051" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb115-1052"><a href="#cb115-1052" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb115-1053"><a href="#cb115-1053" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1054"><a href="#cb115-1054" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_corpus_tokens)</span>
<span id="cb115-1055"><a href="#cb115-1055" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1056"><a href="#cb115-1056" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-1057"><a href="#cb115-1057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1058"><a href="#cb115-1058" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb115-1059"><a href="#cb115-1059" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-1060"><a href="#cb115-1060" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-1061"><a href="#cb115-1061" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1062"><a href="#cb115-1062" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-1063"><a href="#cb115-1063" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1064"><a href="#cb115-1064" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-1065"><a href="#cb115-1065" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb115-1066"><a href="#cb115-1066" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-1067"><a href="#cb115-1067" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-1068"><a href="#cb115-1068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1069"><a href="#cb115-1069" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span>
<span id="cb115-1070"><a href="#cb115-1070" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-1071"><a href="#cb115-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1072"><a href="#cb115-1072" aria-hidden="true" tabindex="-1"></a><span class="in">```{r twitter word cloud 2}</span></span>
<span id="cb115-1073"><a href="#cb115-1073" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1074"><a href="#cb115-1074" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb115-1075"><a href="#cb115-1075" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb115-1076"><a href="#cb115-1076" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb115-1077"><a href="#cb115-1077" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb115-1078"><a href="#cb115-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1079"><a href="#cb115-1079" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb115-1080"><a href="#cb115-1080" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-1081"><a href="#cb115-1081" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb115-1082"><a href="#cb115-1082" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb115-1083"><a href="#cb115-1083" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb115-1084"><a href="#cb115-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1085"><a href="#cb115-1085" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(twitter_corpus_tokens)</span>
<span id="cb115-1086"><a href="#cb115-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1087"><a href="#cb115-1087" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(twitter_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-1088"><a href="#cb115-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1089"><a href="#cb115-1089" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb115-1090"><a href="#cb115-1090" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-1091"><a href="#cb115-1091" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-1092"><a href="#cb115-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1093"><a href="#cb115-1093" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-1094"><a href="#cb115-1094" aria-hidden="true" tabindex="-1"></a>twitter_corpus_dfm <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-1095"><a href="#cb115-1095" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb115-1096"><a href="#cb115-1096" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-1097"><a href="#cb115-1097" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-1098"><a href="#cb115-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1099"><a href="#cb115-1099" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb115-1100"><a href="#cb115-1100" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-1101"><a href="#cb115-1101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1104"><a href="#cb115-1104" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb115-1105"><a href="#cb115-1105" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(allsocialmedia, <span class="fu">detect_language</span>(allsocialmedia) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb115-1106"><a href="#cb115-1106" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(social_corpus)</span>
<span id="cb115-1107"><a href="#cb115-1107" aria-hidden="true" tabindex="-1"></a>socialsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(social_corpus)</span>
<span id="cb115-1108"><a href="#cb115-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1109"><a href="#cb115-1109" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> social_corpus[<span class="sc">!</span><span class="fu">is.na</span>(social_corpus)]</span>
<span id="cb115-1110"><a href="#cb115-1110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1111"><a href="#cb115-1111" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(social_corpus, </span>
<span id="cb115-1112"><a href="#cb115-1112" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb115-1113"><a href="#cb115-1113" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb115-1114"><a href="#cb115-1114" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb115-1115"><a href="#cb115-1115" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T)</span>
<span id="cb115-1116"><a href="#cb115-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1117"><a href="#cb115-1117" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(social_corpus_tokens)</span>
<span id="cb115-1118"><a href="#cb115-1118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1119"><a href="#cb115-1119" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(social_corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb115-1120"><a href="#cb115-1120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1121"><a href="#cb115-1121" aria-hidden="true" tabindex="-1"></a>social_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(social_corpus_tokens, </span>
<span id="cb115-1122"><a href="#cb115-1122" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb115-1123"><a href="#cb115-1123" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb115-1124"><a href="#cb115-1124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1125"><a href="#cb115-1125" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb115-1126"><a href="#cb115-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1127"><a href="#cb115-1127" aria-hidden="true" tabindex="-1"></a>social_corpus_dfm <span class="ot">&lt;-</span> social_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb115-1128"><a href="#cb115-1128" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb115-1129"><a href="#cb115-1129" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-1130"><a href="#cb115-1130" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-1131"><a href="#cb115-1131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1132"><a href="#cb115-1132" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(social_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"orange"</span>)</span>
<span id="cb115-1133"><a href="#cb115-1133" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-1134"><a href="#cb115-1134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1135"><a href="#cb115-1135" aria-hidden="true" tabindex="-1"></a><span class="in">```{r top features 2}</span></span>
<span id="cb115-1136"><a href="#cb115-1136" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(social_corpus_dfm, <span class="dv">10</span>)</span>
<span id="cb115-1137"><a href="#cb115-1137" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(twitter_corpus_dfm, <span class="dv">10</span>)</span>
<span id="cb115-1138"><a href="#cb115-1138" aria-hidden="true" tabindex="-1"></a><span class="fu">topfeatures</span>(reddit_corpus_dfm, <span class="dv">10</span>)</span>
<span id="cb115-1139"><a href="#cb115-1139" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb115-1140"><a href="#cb115-1140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1141"><a href="#cb115-1141" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cooccurrence 2}</span></span>
<span id="cb115-1142"><a href="#cb115-1142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1143"><a href="#cb115-1143" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb115-1144"><a href="#cb115-1144" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(twitter_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">30</span>)</span>
<span id="cb115-1145"><a href="#cb115-1145" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(smaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb115-1146"><a href="#cb115-1146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1147"><a href="#cb115-1147" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(smaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb115-1148"><a href="#cb115-1148" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb115-1149"><a href="#cb115-1149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1150"><a href="#cb115-1150" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb115-1151"><a href="#cb115-1151" aria-hidden="true" tabindex="-1"></a>smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(smaller_dfm)</span>
<span id="cb115-1152"><a href="#cb115-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1153"><a href="#cb115-1153" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb115-1154"><a href="#cb115-1154" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb115-1155"><a href="#cb115-1155" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(smaller_fcm)</span>
<span id="cb115-1156"><a href="#cb115-1156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1157"><a href="#cb115-1157" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(smaller_fcm, <span class="dv">30</span>))</span>
<span id="cb115-1158"><a href="#cb115-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1159"><a href="#cb115-1159" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb115-1160"><a href="#cb115-1160" aria-hidden="true" tabindex="-1"></a>even_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(smaller_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb115-1161"><a href="#cb115-1161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1162"><a href="#cb115-1162" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb115-1163"><a href="#cb115-1163" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(even_smaller_fcm)</span>
<span id="cb115-1164"><a href="#cb115-1164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1165"><a href="#cb115-1165" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb115-1166"><a href="#cb115-1166" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(even_smaller_fcm))</span>
<span id="cb115-1167"><a href="#cb115-1167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-1168"><a href="#cb115-1168" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb115-1169"><a href="#cb115-1169" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(even_smaller_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span>
<span id="cb115-1170"><a href="#cb115-1170" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>