<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Molly Hackbarth">
<meta name="dcterms.date" content="2022-10-29">
<meta name="description" content="Working with the data">

<title>Text-as-Data Fall 2022 - Blog Post Four</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<meta name="twitter:title" content="Text-as-Data Fall 2022 - Blog Post Four">
<meta name="twitter:description" content="Working with the data">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:site" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/UMass White Wordmark Horiz.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Text-as-Data Fall 2022</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/Text_as_Data_Fall_2022/">
 <span class="menu-text">Fall 2022</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">Contributors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss">
 <span class="menu-text">DACSS</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS/Text_as_Data_Fall_2022"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#research-question" id="toc-research-question" class="nav-link active" data-scroll-target="#research-question">Research Question</a></li>
  <li><a href="#reading-in-the-data" id="toc-reading-in-the-data" class="nav-link" data-scroll-target="#reading-in-the-data">Reading in the Data</a></li>
  <li><a href="#creating-a-separate-word-cloud-for-twitter" id="toc-creating-a-separate-word-cloud-for-twitter" class="nav-link" data-scroll-target="#creating-a-separate-word-cloud-for-twitter">Creating a Separate Word Cloud for Twitter</a>
  <ul class="collapse">
  <li><a href="#removing-the-shows-name" id="toc-removing-the-shows-name" class="nav-link" data-scroll-target="#removing-the-shows-name">Removing The Show’s Name</a></li>
  </ul></li>
  <li><a href="#reddit-and-updated-social-media-word-cloud" id="toc-reddit-and-updated-social-media-word-cloud" class="nav-link" data-scroll-target="#reddit-and-updated-social-media-word-cloud">Reddit and Updated Social Media word cloud</a></li>
  <li><a href="#text-plot-for-reddit" id="toc-text-plot-for-reddit" class="nav-link" data-scroll-target="#text-plot-for-reddit">Text Plot for Reddit</a></li>
  <li><a href="#all-social-media-tex-plot" id="toc-all-social-media-tex-plot" class="nav-link" data-scroll-target="#all-social-media-tex-plot">All Social Media Tex Plot</a></li>
  <li><a href="#dictionary-approach-with-twitter" id="toc-dictionary-approach-with-twitter" class="nav-link" data-scroll-target="#dictionary-approach-with-twitter">Dictionary Approach with Twitter</a></li>
  <li><a href="#dictionary-approach-with-reddit" id="toc-dictionary-approach-with-reddit" class="nav-link" data-scroll-target="#dictionary-approach-with-reddit">Dictionary Approach with Reddit</a></li>
  <li><a href="#dictionary-approach-with-all-social-media" id="toc-dictionary-approach-with-all-social-media" class="nav-link" data-scroll-target="#dictionary-approach-with-all-social-media">Dictionary Approach with All Social Media</a></li>
  <li><a href="#choosing-a-dictionary" id="toc-choosing-a-dictionary" class="nav-link" data-scroll-target="#choosing-a-dictionary">Choosing a Dictionary</a></li>
  <li><a href="#choosing-a-research-question" id="toc-choosing-a-research-question" class="nav-link" data-scroll-target="#choosing-a-research-question">Choosing a Research Question</a></li>
  <li><a href="#final-thoughts-tldr" id="toc-final-thoughts-tldr" class="nav-link" data-scroll-target="#final-thoughts-tldr">Final Thoughts (TLDR)</a>
  <ul class="collapse">
  <li><a href="#final-thoughts" id="toc-final-thoughts" class="nav-link" data-scroll-target="#final-thoughts">Final thoughts</a></li>
  <li><a href="#future-work" id="toc-future-work" class="nav-link" data-scroll-target="#future-work">Future Work</a></li>
  </ul></li>
  <li><a href="#final-code-moving-forward" id="toc-final-code-moving-forward" class="nav-link" data-scroll-target="#final-code-moving-forward">Final Code Moving Forward</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Blog Post Four</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">blog posts</div>
    <div class="quarto-category">hw4</div>
    <div class="quarto-category">Molly Hackbarth</div>
  </div>
  </div>

<div>
  <div class="description">
    Working with the data
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Molly Hackbarth </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 29, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textmodels)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">#new packages</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("kbenoit/quanteda.dictionaries") </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.dictionaries)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("quanteda/quanteda.sentiment")</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="research-question" class="level1">
<h1>Research Question</h1>
<p><strong>My current research question:</strong> How do Reddit and Twitter users feel about the show <em>Love is Blind Japan</em>?</p>
</section>
<section id="reading-in-the-data" class="level1">
<h1>Reading in the Data</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#write csv has been commented out due to it continously trying to save an "updated version" in Git. </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>reddit_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblindjapan.csv"</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets.csv"</span>))</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets#.csv"</span>))</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_data, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"body"</span>, <span class="st">"created_utc"</span>)) </span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>reddit<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.Date.POSIXct</span>(reddit<span class="sc">$</span>created_utc)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">text =</span> body, </span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            <span class="at">date =</span> created_utc)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co"># remove deleted or removed comments by moderators of the subreddit (ones that only contain [deleted] or [removed])</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[deleted]'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[removed]'</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co">#remove counting column</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> twitter1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> twitter2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter1, twitter2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'Tweet'</span>,<span class="st">'Tweet'</span>, <span class="st">'Date'</span>, <span class="st">'Date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "twitter.csv") , all(T) )</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(twitter) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(twitter))</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> </span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="st">'tweet'</span>, <span class="sc">~</span> <span class="st">'text'</span>, </span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Date'</span> <span class="sc">~</span> <span class="st">'date'</span>)</span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>twitter<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">strftime</span>(twitter<span class="sc">$</span>date, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>))</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a><span class="co"># remove duplicate tweets</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(text, date, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a><span class="co">#check for duplicate tweets</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>twitter <span class="sc">%in%</span> <span class="fu">unique</span>(twitter[ <span class="fu">duplicated</span>(twitter)]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>allsocialmedia <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter, reddit, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'text'</span>,<span class="st">'text'</span>, <span class="st">'date'</span>, <span class="st">'date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "loveisblind_socialmedia.csv") , all(T) )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="creating-a-separate-word-cloud-for-twitter" class="level1">
<h1>Creating a Separate Word Cloud for Twitter</h1>
<p>In order to remove the dates from Twitter I decided to run the same formula only on the Twitter text column.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>twitter_text <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter_text, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> twitter_text_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_text_corpus)]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_text_corpus)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>twittertextsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_text_corpus)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_text_corpus, </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>twitter_text_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_text_corpus_tokens, </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>twitter_corpus_text_dfm <span class="ot">&lt;-</span> twitter_text_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_text_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/twitter text word cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="removing-the-shows-name" class="level2">
<h2 class="anchored" data-anchor-id="removing-the-shows-name">Removing The Show’s Name</h2>
<p>Although the data is a lot cleaner now I do wonder if removing the key words “love”, “blind”, “japan” and “#loveisblindjapan” will give a better picture of how posters are feeling. I will go ahead and remove the phrases.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>twitter_text <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter_text, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> twitter_text_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_text_corpus)]</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_text_corpus)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>twittertextsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_text_corpus)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_text_corpus, </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>twitter_text_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_text_corpus_tokens, </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>twitter_corpus_text_dfm <span class="ot">&lt;-</span> twitter_text_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_text_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/removing the shows title-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Here is we can see a more accurate idea of how people are tweeting about the show. Even with the show’s title being remove love is still a large part of tweets.</p>
<p>I also noticed that “blind” was used often. Looking at the tweets it seems unlikely that the word blind was used in any other way than to mention the show. Thus I’d like to remove the word blind as well since it seems unlikely to be useful to sentiment analysis.</p>
<p>I will also remove the word “show” as show seemingly is only talking about the series rather than any emotions.</p>
<p>I have also found a different way to remove dates and have done so below.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_text_corpus)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> twitter_text_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_text_corpus)]</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>twittertextsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_text_corpus)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, twitter_text_corpus))</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>, <span class="st">"blind"</span>, <span class="st">"show"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_text_corpus, </span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>twitter_text_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_text_corpus_tokens, </span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>twitter_corpus_text_dfm <span class="ot">&lt;-</span> twitter_text_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_text_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/removing the words blind and show-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I have found out why the dates column has become messy. This is because originally I had put the corpus() function after the [!is.na()]. However when put first it still shows the date column in the summary.</p>
</section>
</section>
<section id="reddit-and-updated-social-media-word-cloud" class="level1">
<h1>Reddit and Updated Social Media word cloud</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit_corpus)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, reddit_corpus))</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit word cloud same-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(allsocialmedia, <span class="fu">detect_language</span>(allsocialmedia) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(social_corpus)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>socialsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(social_corpus)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> social_corpus[<span class="sc">!</span><span class="fu">is.na</span>(social_corpus)]</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>, <span class="st">"blind"</span>, <span class="st">"show"</span>)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(social_corpus, </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>social_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(social_corpus_tokens, </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>social_corpus_dfm <span class="ot">&lt;-</span> social_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(social_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"orange"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/social updated word cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="text-plot-for-reddit" class="level1">
<h1>Text Plot for Reddit</h1>
<p>I mentioned previously I would like to test a textplot for Reddit. Below you will see my test.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(reddit_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(rsmaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(rsmaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/text plot reddit-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>rsmaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(rsmaller_dfm)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rsmaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1185 1185</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>rmyFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(rsmaller_fcm, <span class="dv">30</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>reven_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(rsmaller_fcm, <span class="at">pattern =</span> rmyFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(reven_smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 30</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>rsize <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(reven_smaller_fcm))</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(reven_smaller_fcm, <span class="at">vertex_size =</span> rsize <span class="sc">/</span> <span class="fu">max</span>(rsize) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/text plot reddit-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It’s interesting to see that the contestants names seem to be much more connected. Overall Reddit’s text plot feels a lot more interconnected than Twitter’s.</p>
<p>I will also test this for the combined data set.</p>
</section>
<section id="all-social-media-tex-plot" class="level1">
<h1>All Social Media Tex Plot</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>ssmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(social_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>ssmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(ssmaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(ssmaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
personally could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
putting could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
figure could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
comedian could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
expensive could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
negative could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
pressure could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
likely could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
ceremony could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in wordcloud(x, min_size, max_size, min_count, max_words, color, :
instagram could not be fit on page. It will not be plotted.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/text plot socials-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>ssmaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(ssmaller_dfm)</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ssmaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1405 1405</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>smyFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(ssmaller_fcm, <span class="dv">30</span>))</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>seven_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(ssmaller_fcm, <span class="at">pattern =</span> smyFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(seven_smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 30</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>ssize <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(seven_smaller_fcm))</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(seven_smaller_fcm, <span class="at">vertex_size =</span> ssize <span class="sc">/</span> <span class="fu">max</span>(ssize) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/text plot socials-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Interestingly the text plot has a similarity more to Reddit than to Twitter. Perhaps this is because Reddit has more tokens as there is not a character limit.</p>
</section>
<section id="dictionary-approach-with-twitter" class="level1">
<h1>Dictionary Approach with Twitter</h1>
<p>I will now try the dictionary approach using reddit, twitter, and the data combined (allsocialmedia).</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_text_lemmitized,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(twitterDfm_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7977   10</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 7,977 documents, 10 features (59.55% sparse) and 1 docvar.
       features
docs    anger anticipation disgust fear joy negative positive sadness surprise
  text1     0            1       0    1   0        0        2       0        0
  text2     0            1       0    0   1        0        1       0        0
  text3     1            1       0    1   1        1        2       1        0
  text4     1            2       2    1   3        3        3       2        2
  text5     0            0       0    0   1        0        2       0        0
  text6     0            1       0    0   1        1        1       0        1
       features
docs    trust
  text1     1
  text2     1
  text3     1
  text4     2
  text5     1
  text6     1
[ reached max_ndoc ... 7,971 more documents ]</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>tdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> tdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tdf_nrc) <span class="sc">+</span> </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/review sentiment twitter-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Here we can see that for twitter most people were more positive about the show! That does correlate from what I often saw from skimming the tweets.</p>
<p>Still we should double check to make sure that these actually do skew positively.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the LSD2015 dictionary</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>twitterDfm_lsd2015 <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_text_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">dfm_lookup</span>(data_dictionary_LSD2015)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the General Inquirer dictionary</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>twitterDfm_geninq <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_text_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_geninqposneg)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for LSD2015</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>tdf_lsd2015 <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_lsd2015, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>tdf_lsd2015<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_lsd2015<span class="sc">$</span>positive <span class="sc">-</span> tdf_lsd2015<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> tdf_lsd2015<span class="sc">$</span>negative)</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>tdf_lsd2015<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> tdf_lsd2015<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tdf_lsd2015)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id negative positive neg_positive neg_negative  polarity
1  text1        0        0            0            0 0.0000000
2  text2        0        1            0            0 1.0000000
3  text3        2        3            0            0 0.2000000
4  text4        1        4            0            0 0.6000000
5  text5        1        2            0            0 0.3333333
6  text6        1        3            0            0 0.5000000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for GenInq</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>tdf_geninq <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_geninq, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>tdf_geninq<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_geninq<span class="sc">$</span>positive <span class="sc">-</span> tdf_geninq<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> tdf_geninq<span class="sc">$</span>negative)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>tdf_geninq<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> tdf_geninq<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tdf_geninq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id positive negative  polarity
1  text1        3        1 0.5000000
2  text2        2        0 1.0000000
3  text3        5        1 0.6666667
4  text4        3        1 0.5000000
5  text5        4        0 1.0000000
6  text6        4        3 0.1428571</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create unique names for each dataframe</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tdf_nrc) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"nrc"</span>, <span class="fu">colnames</span>(tdf_nrc), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tdf_lsd2015) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"lsd2015"</span>, <span class="fu">colnames</span>(tdf_lsd2015), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tdf_geninq) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"geninq"</span>, <span class="fu">colnames</span>(tdf_geninq), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's compare our estimates</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>tsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(tdf_nrc, tdf_lsd2015, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"lsd2015_doc_id"</span>)</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>tsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(tsent_df, tdf_geninq, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"geninq_doc_id"</span>)</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tsent_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  nrc_doc_id nrc_anger nrc_anticipation nrc_disgust nrc_fear nrc_joy
1      text1         0                1           0        1       0
2     text10         0                2           0        0       2
3    text100         1                2           0        0       1
4   text1000         0                4           0        3       2
5   text1001         0                1           0        0       2
6   text1002         0                2           1        2       1
  nrc_negative nrc_positive nrc_sadness nrc_surprise nrc_trust nrc_polarity
1            0            2           0            0         1    1.0000000
2            0            2           0            0         2    1.0000000
3            2            1           0            0         0   -0.3333333
4            0            2           0            1         1    1.0000000
5            0            3           0            1         2    1.0000000
6            1            3           1            1         1    0.5000000
  lsd2015_negative lsd2015_positive lsd2015_neg_positive lsd2015_neg_negative
1                0                0                    0                    0
2                0                2                    0                    0
3                2                1                    0                    0
4                0                2                    0                    0
5                0                4                    0                    0
6                1                1                    0                    0
  lsd2015_polarity geninq_positive geninq_negative geninq_polarity
1        0.0000000               3               1       0.5000000
2        1.0000000               7               3       0.4000000
3       -0.3333333               2               3      -0.2000000
4        1.0000000               4               1       0.6000000
5        1.0000000               5               1       0.6666667
6        0.0000000               3               1       0.5000000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(tsent_df<span class="sc">$</span>nrc_polarity, tsent_df<span class="sc">$</span>lsd2015_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6708384</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(tsent_df<span class="sc">$</span>nrc_polarity, tsent_df<span class="sc">$</span>geninq_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5309834</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(tsent_df<span class="sc">$</span>lsd2015_polarity, tsent_df<span class="sc">$</span>geninq_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6357448</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these out. You can update this to check the look of other combinations</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tsent_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>nrc_polarity, <span class="at">y=</span>lsd2015_polarity)) <span class="sc">+</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>,<span class="at">slope=</span><span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/comparing dictionaries twitter-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Interestingly it seems there is a good amount of correlation between the two. Although not as strong as the tutorial it does seem that the dictionary is fairly accurate. Let’s test this for both reddit and allsocialmedia.</p>
</section>
<section id="dictionary-approach-with-reddit" class="level1">
<h1>Dictionary Approach with Reddit</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(redditDfm_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10062    10</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 10,062 documents, 10 features (48.16% sparse) and 1 docvar.
       features
docs    anger anticipation disgust fear joy negative positive sadness surprise
  text1     0            0       0    0   0        0        2       0        0
  text2     0            0       0    0   1        1        1       0        0
  text3     0            1       0    0   1        0        1       0        0
  text4     1            2       0    2   1        1        2       0        1
  text5     0            1       0    1   0        1        1       1        0
  text6     0            4       1    0   2        0        2       0        1
       features
docs    trust
  text1     0
  text2     1
  text3     1
  text4     1
  text5     0
  text6     2
[ reached max_ndoc ... 10,056 more documents ]</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>rdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> rdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rdf_nrc) <span class="sc">+</span> </span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit dictionary-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>rdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> rdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rdf_nrc) <span class="sc">+</span> </span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit sentiment-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the LSD2015 dictionary</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>redditDfm_lsd2015 <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">dfm_lookup</span>(data_dictionary_LSD2015)</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the General Inquirer dictionary</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>redditDfm_geninq <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_geninqposneg)</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for LSD2015</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>rdf_lsd2015 <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_lsd2015, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>rdf_lsd2015<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_lsd2015<span class="sc">$</span>positive <span class="sc">-</span> rdf_lsd2015<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> rdf_lsd2015<span class="sc">$</span>negative)</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>rdf_lsd2015<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> rdf_lsd2015<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rdf_lsd2015)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id negative positive neg_positive neg_negative polarity
1  text1        0        4            0            0        1
2  text2        0        2            0            0        1
3  text3        0        0            0            0        0
4  text4        1        1            0            0        0
5  text5        1        1            0            0        0
6  text6        0        1            0            0        1</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for GenInq</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>rdf_geninq <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_geninq, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>rdf_geninq<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_geninq<span class="sc">$</span>positive <span class="sc">-</span> rdf_geninq<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> rdf_geninq<span class="sc">$</span>negative)</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>rdf_geninq<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> rdf_geninq<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rdf_geninq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id positive negative polarity
1  text1        6        0      1.0
2  text2        4        1      0.6
3  text3        3        0      1.0
4  text4        3        1      0.5
5  text5        1        0      1.0
6  text6        4        1      0.6</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create unique names for each dataframe</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rdf_nrc) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"nrc"</span>, <span class="fu">colnames</span>(rdf_nrc), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rdf_lsd2015) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"lsd2015"</span>, <span class="fu">colnames</span>(rdf_lsd2015), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rdf_geninq) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"geninq"</span>, <span class="fu">colnames</span>(rdf_geninq), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's compare our estimates</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>rsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(rdf_nrc, rdf_lsd2015, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"lsd2015_doc_id"</span>)</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>rsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(rsent_df, rdf_geninq, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"geninq_doc_id"</span>)</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rsent_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  nrc_doc_id nrc_anger nrc_anticipation nrc_disgust nrc_fear nrc_joy
1      text1         0                0           0        0       0
2     text10         0                3           1        2       4
3    text100         0                0           0        0       0
4   text1000         2                1           1        2       1
5  text10000         0                2           0        2       2
6  text10001         0                1           0        0       1
  nrc_negative nrc_positive nrc_sadness nrc_surprise nrc_trust nrc_polarity
1            0            2           0            0         0    1.0000000
2            6            9           2            2         4    0.2000000
3            0            0           0            0         1    0.0000000
4            2            3           2            1         2    0.2000000
5            1            2           0            0         2    0.3333333
6            0            3           0            0         1    1.0000000
  lsd2015_negative lsd2015_positive lsd2015_neg_positive lsd2015_neg_negative
1                0                4                    0                    0
2                7                9                    0                    0
3                0                0                    0                    0
4                2                3                    0                    0
5                2                4                    0                    0
6                0                4                    0                    0
  lsd2015_polarity geninq_positive geninq_negative geninq_polarity
1        1.0000000               6               0             1.0
2        0.1250000              18               6             0.5
3        0.0000000               0               0             0.0
4        0.2000000               3               2             0.2
5        0.3333333               3               2             0.2
6        1.0000000               8               2             0.6</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(rsent_df<span class="sc">$</span>nrc_polarity, rsent_df<span class="sc">$</span>lsd2015_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.564723</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(rsent_df<span class="sc">$</span>nrc_polarity, rsent_df<span class="sc">$</span>geninq_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4608733</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(rsent_df<span class="sc">$</span>lsd2015_polarity, rsent_df<span class="sc">$</span>geninq_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5894939</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these out. You can update this to check the look of other combinations</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rsent_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>nrc_polarity, <span class="at">y=</span>lsd2015_polarity)) <span class="sc">+</span> </span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>,<span class="at">slope=</span><span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit sentiment-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="dictionary-approach-with-all-social-media" class="level1">
<h1>Dictionary Approach with All Social Media</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>socialDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(social_lemmitized,</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(socialDfm_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18039    10</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>socialDfm_nrc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 18,039 documents, 10 features (53.35% sparse) and 1 docvar.
       features
docs    anger anticipation disgust fear joy negative positive sadness surprise
  text1     0            1       0    1   0        0        2       0        0
  text2     0            1       0    0   1        0        1       0        0
  text3     1            1       0    1   1        1        2       1        0
  text4     1            2       2    1   3        3        3       2        2
  text5     1            5       0    1   4        2        9       1        5
  text6     0            0       0    0   1        0        2       0        0
       features
docs    trust
  text1     1
  text2     1
  text3     1
  text4     2
  text5     5
  text6     1
[ reached max_ndoc ... 18,033 more documents ]</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>df_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(socialDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_nrc<span class="sc">$</span>positive <span class="sc">-</span> df_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative)</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_nrc) <span class="sc">+</span> </span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/social media dictionary-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the LSD2015 dictionary</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>socialDfm_lsd2015 <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(social_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">dfm_lookup</span>(data_dictionary_LSD2015)</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the General Inquirer dictionary</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>socialDfm_geninq <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(social_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_geninqposneg)</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for LSD2015</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>df_lsd2015 <span class="ot">&lt;-</span> <span class="fu">convert</span>(socialDfm_lsd2015, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>df_lsd2015<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_lsd2015<span class="sc">$</span>positive <span class="sc">-</span> df_lsd2015<span class="sc">$</span>negative)<span class="sc">/</span>(df_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> df_lsd2015<span class="sc">$</span>negative)</span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>df_lsd2015<span class="sc">$</span>polarity[<span class="fu">which</span>((df_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> df_lsd2015<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_lsd2015)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id negative positive neg_positive neg_negative  polarity
1  text1        0        0            0            0 0.0000000
2  text2        0        1            0            0 1.0000000
3  text3        2        3            0            0 0.2000000
4  text4        1        4            0            0 0.6000000
5  text5        1        8            0            0 0.7777778
6  text6        1        2            0            0 0.3333333</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for GenInq</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>df_geninq <span class="ot">&lt;-</span> <span class="fu">convert</span>(socialDfm_geninq, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>df_geninq<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_geninq<span class="sc">$</span>positive <span class="sc">-</span> df_geninq<span class="sc">$</span>negative)<span class="sc">/</span>(df_geninq<span class="sc">$</span>positive <span class="sc">+</span> df_geninq<span class="sc">$</span>negative)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>df_geninq<span class="sc">$</span>polarity[<span class="fu">which</span>((df_geninq<span class="sc">$</span>positive <span class="sc">+</span> df_geninq<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_geninq)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  doc_id positive negative  polarity
1  text1        3        1 0.5000000
2  text2        2        0 1.0000000
3  text3        5        1 0.6666667
4  text4        3        1 0.5000000
5  text5       13        3 0.6250000
6  text6        4        0 1.0000000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create unique names for each dataframe</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_nrc) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"nrc"</span>, <span class="fu">colnames</span>(df_nrc), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_lsd2015) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"lsd2015"</span>, <span class="fu">colnames</span>(df_lsd2015), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_geninq) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"geninq"</span>, <span class="fu">colnames</span>(df_geninq), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's compare our estimates</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>sent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df_nrc, df_lsd2015, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"lsd2015_doc_id"</span>)</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>sent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(sent_df, df_geninq, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"geninq_doc_id"</span>)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sent_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  nrc_doc_id nrc_anger nrc_anticipation nrc_disgust nrc_fear nrc_joy
1      text1         0                1           0        1       0
2     text10         1                0           1        1       0
3    text100         0                2           0        2       0
4   text1000         0                2           0        0       1
5  text10000         2                0           3        3       1
6  text10001         0                1           0        0       1
  nrc_negative nrc_positive nrc_sadness nrc_surprise nrc_trust nrc_polarity
1            0            2           0            0         1          1.0
2            1            0           1            1         0         -1.0
3            0            0           0            0         0          0.0
4            1            1           0            0         0          0.0
5            4            1           2            2         2         -0.6
6            0            2           1            1         2          1.0
  lsd2015_negative lsd2015_positive lsd2015_neg_positive lsd2015_neg_negative
1                0                0                    0                    0
2                1                0                    0                    0
3                0                0                    0                    0
4                2                1                    0                    0
5                5                2                    0                    0
6                0                4                    0                    0
  lsd2015_polarity geninq_positive geninq_negative geninq_polarity
1        0.0000000               3               1       0.5000000
2       -1.0000000               0               2      -1.0000000
3        0.0000000               0               0       0.0000000
4       -0.3333333               1               1       0.0000000
5       -0.4285714               2               4      -0.3333333
6        1.0000000               4               0       1.0000000</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(sent_df<span class="sc">$</span>nrc_polarity, sent_df<span class="sc">$</span>lsd2015_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6179578</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(sent_df<span class="sc">$</span>nrc_polarity, sent_df<span class="sc">$</span>geninq_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5042873</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(sent_df<span class="sc">$</span>lsd2015_polarity, sent_df<span class="sc">$</span>geninq_polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.6198002</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these out. You can update this to check the look of other combinations</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sent_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>nrc_polarity, <span class="at">y=</span>lsd2015_polarity)) <span class="sc">+</span> </span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>,<span class="at">slope=</span><span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using method = 'gam' and formula 'y ~ s(x, bs = "cs")'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/all social media sentiment-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="choosing-a-dictionary" class="level1">
<h1>Choosing a Dictionary</h1>
<p>Interestingly compared to Twitter, Reddit and “allsocialmedia” were a fair amount lower in correlation. Although it was still a fairly high correlation this may because of the different types of words used by Reddit.</p>
<p>However when you compare the graphs all three are nearly identical in nature.</p>
<p>I think I will use the NRC dictionary. I have chosen this one because I believe it’s the strongest dictionary for my set of data because it explores through multiple categories of emotions. While both other dictionaries are good, NRC is a much larger dictionary. If you are interested I have found some more information on the dictionaries <a href="https://journodev.tech/blog-12-main-dictionaries-for-sentiment-analysis/">here</a>!</p>
</section>
<section id="choosing-a-research-question" class="level1">
<h1>Choosing a Research Question</h1>
<p>After looking through all of the data using the dictionary method I have decided to go back to this research question: How do Reddit and Twitter users sentiment differentiate about the show <em>Love is Blind Japan</em>?</p>
<p>I have decided to do this because I believe there’s more information that could be compared. Additionally while it is useful to know an overall sentiment for social media, I think that since each user base may be different we could see more interesting results when it is not mixed together.</p>
</section>
<section id="final-thoughts-tldr" class="level1">
<h1>Final Thoughts (TLDR)</h1>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final thoughts</h2>
<ul>
<li><p>I have found a way to keep the date column in the summary but remove it from the actual tokens afterwards.</p></li>
<li><p>I have made a list of stop words that are related to the title of the show from Twitter.</p>
<ul>
<li><p>I have also included the removal of the word “show” as for tweets it only referenced show as a TV series. However for Reddit I have not removed the word show as Redditors seemed to use the word show outside of of meaning a TV show.</p></li>
<li><p>Reddit also did not have the same issues with the title of the show due to all of the posts in the sub reddit being related to Love is Blind Japan.</p></li>
</ul></li>
<li><p>I have decided to use the NRC dictionary.</p></li>
<li><p>I have changed my question: How do Reddit and Twitter users sentiment differentiate about the show <em>Love is Blind Japan</em>?</p>
<ul>
<li>This means I will no longer use the combined data set.</li>
</ul></li>
<li><p>I am unsure how I will use co-occurrence.</p></li>
</ul>
</section>
<section id="future-work" class="level2">
<h2 class="anchored" data-anchor-id="future-work">Future Work</h2>
<p>Here are a few things I’d like to do in blog post 5:</p>
<ul>
<li><p>I would like to look at co-occurrence more closely and decide if the code I have now is the one I would like to use for the final project. I currently have chosen it based off prior issues (such as having the show’s name showing up).</p>
<ul>
<li>This may include using a maxium document frequency and a minimum word frequency.</li>
</ul></li>
<li><p>I would like to see if I can create an emotional rating comparison using the dictionary method. This would include using the NRC for twitter and reddit to compare the average emotional response.</p></li>
</ul>
</section>
</section>
<section id="final-code-moving-forward" class="level1">
<h1>Final Code Moving Forward</h1>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit_corpus)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, reddit_corpus))</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb94-25"><a href="#cb94-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-26"><a href="#cb94-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-27"><a href="#cb94-27" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit word cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, twitter_corpus))</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>, <span class="st">"blind"</span>, <span class="st">"show"</span>)</span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb95-20"><a href="#cb95-20" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb95-21"><a href="#cb95-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-22"><a href="#cb95-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb95-23"><a href="#cb95-23" aria-hidden="true" tabindex="-1"></a>twitter_corpus_dfm <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb95-24"><a href="#cb95-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb95-25"><a href="#cb95-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb95-26"><a href="#cb95-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb95-27"><a href="#cb95-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-28"><a href="#cb95-28" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/twitter word cloud-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(twitter_corpus_text_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(smaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(smaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/twitter cooccurrence-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(smaller_dfm)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 440 440</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(smaller_fcm, <span class="dv">30</span>))</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>even_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(smaller_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(even_smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 30</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(even_smaller_fcm))</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(even_smaller_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/twitter cooccurrence-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(reddit_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(rsmaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(rsmaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit cooccurrence-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>rsmaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(rsmaller_dfm)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rsmaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1185 1185</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>rmyFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(rsmaller_fcm, <span class="dv">30</span>))</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>reven_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(rsmaller_fcm, <span class="at">pattern =</span> rmyFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(reven_smaller_fcm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30 30</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>rsize <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(reven_smaller_fcm))</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(reven_smaller_fcm, <span class="at">vertex_size =</span> rsize <span class="sc">/</span> <span class="fu">max</span>(rsize) <span class="sc">*</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit cooccurrence-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized,</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(redditDfm_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 10062    10</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 10,062 documents, 10 features (48.16% sparse) and 1 docvar.
       features
docs    anger anticipation disgust fear joy negative positive sadness surprise
  text1     0            0       0    0   0        0        2       0        0
  text2     0            0       0    0   1        1        1       0        0
  text3     0            1       0    0   1        0        1       0        0
  text4     1            2       0    2   1        1        2       0        1
  text5     0            1       0    1   0        1        1       1        0
  text6     0            4       1    0   2        0        2       0        1
       features
docs    trust
  text1     0
  text2     1
  text3     1
  text4     1
  text5     0
  text6     2
[ reached max_ndoc ... 10,056 more documents ]</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>rdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> rdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rdf_nrc) <span class="sc">+</span> </span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/reddit dfm dictionary-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_lemmitized,</span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(twitterDfm_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7977   10</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 7,977 documents, 10 features (59.55% sparse) and 1 docvar.
       features
docs    anger anticipation disgust fear joy negative positive sadness surprise
  text1     0            1       0    1   0        0        2       0        0
  text2     0            1       0    0   1        0        1       0        0
  text3     1            1       0    1   1        1        2       1        0
  text4     1            2       2    1   3        3        3       2        2
  text5     0            0       0    0   1        0        2       0        0
  text6     0            1       0    0   1        1        1       0        1
       features
docs    trust
  text1     1
  text2     1
  text3     1
  text4     2
  text5     1
  text6     1
[ reached max_ndoc ... 7,971 more documents ]</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>tdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> tdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tdf_nrc) <span class="sc">+</span> </span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="BlogPost4_MollyHackbarth_files/figure-html/twitter dfm dictionary-1.png" class="img-fluid" width="672"></p>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/Text_as_Data_Fall_2022" data-repo-id="R_kgDOH5675w" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb120" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Blog Post Four"</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Molly Hackbarth"</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Working with the data"</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "10/29/2022"</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - blog posts</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a><span class="co">  - hw4</span></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - Molly Hackbarth</span></span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb120-25"><a href="#cb120-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb120-26"><a href="#cb120-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb120-27"><a href="#cb120-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb120-28"><a href="#cb120-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb120-29"><a href="#cb120-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb120-30"><a href="#cb120-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb120-31"><a href="#cb120-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textstats)</span>
<span id="cb120-32"><a href="#cb120-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textmodels)</span>
<span id="cb120-33"><a href="#cb120-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-34"><a href="#cb120-34" aria-hidden="true" tabindex="-1"></a><span class="co">#new packages</span></span>
<span id="cb120-35"><a href="#cb120-35" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("kbenoit/quanteda.dictionaries") </span></span>
<span id="cb120-36"><a href="#cb120-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.dictionaries)</span>
<span id="cb120-37"><a href="#cb120-37" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("quanteda/quanteda.sentiment")</span></span>
<span id="cb120-38"><a href="#cb120-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span>
<span id="cb120-39"><a href="#cb120-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-40"><a href="#cb120-40" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-41"><a href="#cb120-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-42"><a href="#cb120-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-43"><a href="#cb120-43" aria-hidden="true" tabindex="-1"></a><span class="fu"># Research Question</span></span>
<span id="cb120-44"><a href="#cb120-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-45"><a href="#cb120-45" aria-hidden="true" tabindex="-1"></a>**My current research question:** How do Reddit and Twitter users feel about the show *Love is Blind Japan*?</span>
<span id="cb120-46"><a href="#cb120-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-47"><a href="#cb120-47" aria-hidden="true" tabindex="-1"></a><span class="fu"># Reading in the Data</span></span>
<span id="cb120-48"><a href="#cb120-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-49"><a href="#cb120-49" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reading data}</span></span>
<span id="cb120-50"><a href="#cb120-50" aria-hidden="true" tabindex="-1"></a><span class="co">#write csv has been commented out due to it continously trying to save an "updated version" in Git. </span></span>
<span id="cb120-51"><a href="#cb120-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-52"><a href="#cb120-52" aria-hidden="true" tabindex="-1"></a>reddit_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"loveisblindjapan.csv"</span>))</span>
<span id="cb120-53"><a href="#cb120-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-54"><a href="#cb120-54" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets.csv"</span>))</span>
<span id="cb120-55"><a href="#cb120-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-56"><a href="#cb120-56" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"posts"</span>, <span class="st">"_data"</span>, <span class="st">"tweets#.csv"</span>))</span>
<span id="cb120-57"><a href="#cb120-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-58"><a href="#cb120-58" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit_data, <span class="at">select =</span> <span class="fu">c</span>(<span class="st">"body"</span>, <span class="st">"created_utc"</span>)) </span>
<span id="cb120-59"><a href="#cb120-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-60"><a href="#cb120-60" aria-hidden="true" tabindex="-1"></a>reddit<span class="sc">$</span>created_utc <span class="ot">&lt;-</span> <span class="fu">as.Date.POSIXct</span>(reddit<span class="sc">$</span>created_utc)</span>
<span id="cb120-61"><a href="#cb120-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-62"><a href="#cb120-62" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb120-63"><a href="#cb120-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">text =</span> body, </span>
<span id="cb120-64"><a href="#cb120-64" aria-hidden="true" tabindex="-1"></a>            <span class="at">date =</span> created_utc)</span>
<span id="cb120-65"><a href="#cb120-65" aria-hidden="true" tabindex="-1"></a><span class="co"># remove deleted or removed comments by moderators of the subreddit (ones that only contain [deleted] or [removed])</span></span>
<span id="cb120-66"><a href="#cb120-66" aria-hidden="true" tabindex="-1"></a>reddit <span class="ot">&lt;-</span> reddit <span class="sc">%&gt;%</span> </span>
<span id="cb120-67"><a href="#cb120-67" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[deleted]'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-68"><a href="#cb120-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text <span class="sc">==</span> <span class="st">'[removed]'</span>)</span>
<span id="cb120-69"><a href="#cb120-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-70"><a href="#cb120-70" aria-hidden="true" tabindex="-1"></a><span class="co">#remove counting column</span></span>
<span id="cb120-71"><a href="#cb120-71" aria-hidden="true" tabindex="-1"></a>twitter1 <span class="ot">&lt;-</span> twitter1 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb120-72"><a href="#cb120-72" aria-hidden="true" tabindex="-1"></a>twitter2 <span class="ot">&lt;-</span> twitter2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(X, User))</span>
<span id="cb120-73"><a href="#cb120-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-74"><a href="#cb120-74" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter1, twitter2, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'Tweet'</span>,<span class="st">'Tweet'</span>, <span class="st">'Date'</span>, <span class="st">'Date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb120-75"><a href="#cb120-75" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "twitter.csv") , all(T) )</span></span>
<span id="cb120-76"><a href="#cb120-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-77"><a href="#cb120-77" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(twitter) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(twitter))</span>
<span id="cb120-78"><a href="#cb120-78" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> </span>
<span id="cb120-79"><a href="#cb120-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_at</span>(<span class="st">'tweet'</span>, <span class="sc">~</span> <span class="st">'text'</span>, </span>
<span id="cb120-80"><a href="#cb120-80" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Date'</span> <span class="sc">~</span> <span class="st">'date'</span>)</span>
<span id="cb120-81"><a href="#cb120-81" aria-hidden="true" tabindex="-1"></a>twitter<span class="sc">$</span>date <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="fu">strftime</span>(twitter<span class="sc">$</span>date, <span class="at">format=</span><span class="st">"%Y-%m-%d"</span>))</span>
<span id="cb120-82"><a href="#cb120-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-83"><a href="#cb120-83" aria-hidden="true" tabindex="-1"></a><span class="co"># remove duplicate tweets</span></span>
<span id="cb120-84"><a href="#cb120-84" aria-hidden="true" tabindex="-1"></a>twitter <span class="ot">&lt;-</span> twitter <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(text, date, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb120-85"><a href="#cb120-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-86"><a href="#cb120-86" aria-hidden="true" tabindex="-1"></a><span class="co">#check for duplicate tweets</span></span>
<span id="cb120-87"><a href="#cb120-87" aria-hidden="true" tabindex="-1"></a>twitter <span class="sc">%in%</span> <span class="fu">unique</span>(twitter[ <span class="fu">duplicated</span>(twitter)]) </span>
<span id="cb120-88"><a href="#cb120-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-89"><a href="#cb120-89" aria-hidden="true" tabindex="-1"></a>allsocialmedia <span class="ot">&lt;-</span> <span class="fu">merge</span>(twitter, reddit, <span class="at">by=</span><span class="fu">c</span>(<span class="st">'text'</span>,<span class="st">'text'</span>, <span class="st">'date'</span>, <span class="st">'date'</span>),<span class="at">all=</span>T, <span class="at">ignore_case =</span>T)</span>
<span id="cb120-90"><a href="#cb120-90" aria-hidden="true" tabindex="-1"></a><span class="co">#write.csv(twitter, here::here("posts", "_data", "loveisblind_socialmedia.csv") , all(T) )</span></span>
<span id="cb120-91"><a href="#cb120-91" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-92"><a href="#cb120-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-93"><a href="#cb120-93" aria-hidden="true" tabindex="-1"></a><span class="fu"># Creating a Separate Word Cloud for Twitter</span></span>
<span id="cb120-94"><a href="#cb120-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-95"><a href="#cb120-95" aria-hidden="true" tabindex="-1"></a>In order to remove the dates from Twitter I decided to run the same formula only on the Twitter text column.</span>
<span id="cb120-96"><a href="#cb120-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-97"><a href="#cb120-97" aria-hidden="true" tabindex="-1"></a><span class="in">```{r twitter text word cloud}</span></span>
<span id="cb120-98"><a href="#cb120-98" aria-hidden="true" tabindex="-1"></a>twitter_text <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text</span>
<span id="cb120-99"><a href="#cb120-99" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter_text, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb120-100"><a href="#cb120-100" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> twitter_text_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_text_corpus)]</span>
<span id="cb120-101"><a href="#cb120-101" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_text_corpus)</span>
<span id="cb120-102"><a href="#cb120-102" aria-hidden="true" tabindex="-1"></a>twittertextsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_text_corpus)</span>
<span id="cb120-103"><a href="#cb120-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-104"><a href="#cb120-104" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_text_corpus, </span>
<span id="cb120-105"><a href="#cb120-105" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb120-106"><a href="#cb120-106" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb120-107"><a href="#cb120-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb120-108"><a href="#cb120-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-109"><a href="#cb120-109" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-110"><a href="#cb120-110" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb120-111"><a href="#cb120-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-112"><a href="#cb120-112" aria-hidden="true" tabindex="-1"></a>twitter_text_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_text_corpus_tokens, </span>
<span id="cb120-113"><a href="#cb120-113" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb120-114"><a href="#cb120-114" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb120-115"><a href="#cb120-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-116"><a href="#cb120-116" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-117"><a href="#cb120-117" aria-hidden="true" tabindex="-1"></a>twitter_corpus_text_dfm <span class="ot">&lt;-</span> twitter_text_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb120-118"><a href="#cb120-118" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-119"><a href="#cb120-119" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-120"><a href="#cb120-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-121"><a href="#cb120-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-122"><a href="#cb120-122" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_text_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb120-123"><a href="#cb120-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-124"><a href="#cb120-124" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-125"><a href="#cb120-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-126"><a href="#cb120-126" aria-hidden="true" tabindex="-1"></a><span class="fu">## Removing The Show's Name</span></span>
<span id="cb120-127"><a href="#cb120-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-128"><a href="#cb120-128" aria-hidden="true" tabindex="-1"></a>Although the data is a lot cleaner now I do wonder if removing the key words "love", "blind", "japan" and "#loveisblindjapan" will give a better picture of how posters are feeling. I will go ahead and remove the phrases.</span>
<span id="cb120-129"><a href="#cb120-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-130"><a href="#cb120-130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r removing the shows title}</span></span>
<span id="cb120-131"><a href="#cb120-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-132"><a href="#cb120-132" aria-hidden="true" tabindex="-1"></a>twitter_text <span class="ot">&lt;-</span> twitter<span class="sc">$</span>text</span>
<span id="cb120-133"><a href="#cb120-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-134"><a href="#cb120-134" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter_text, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb120-135"><a href="#cb120-135" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> twitter_text_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_text_corpus)]</span>
<span id="cb120-136"><a href="#cb120-136" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_text_corpus)</span>
<span id="cb120-137"><a href="#cb120-137" aria-hidden="true" tabindex="-1"></a>twittertextsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_text_corpus)</span>
<span id="cb120-138"><a href="#cb120-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-139"><a href="#cb120-139" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>)</span>
<span id="cb120-140"><a href="#cb120-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-141"><a href="#cb120-141" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_text_corpus, </span>
<span id="cb120-142"><a href="#cb120-142" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb120-143"><a href="#cb120-143" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb120-144"><a href="#cb120-144" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb120-145"><a href="#cb120-145" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-146"><a href="#cb120-146" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-147"><a href="#cb120-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-148"><a href="#cb120-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb120-149"><a href="#cb120-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-150"><a href="#cb120-150" aria-hidden="true" tabindex="-1"></a>twitter_text_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_text_corpus_tokens, </span>
<span id="cb120-151"><a href="#cb120-151" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb120-152"><a href="#cb120-152" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb120-153"><a href="#cb120-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-154"><a href="#cb120-154" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-155"><a href="#cb120-155" aria-hidden="true" tabindex="-1"></a>twitter_corpus_text_dfm <span class="ot">&lt;-</span> twitter_text_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb120-156"><a href="#cb120-156" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-157"><a href="#cb120-157" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-158"><a href="#cb120-158" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-159"><a href="#cb120-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-160"><a href="#cb120-160" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_text_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb120-161"><a href="#cb120-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-162"><a href="#cb120-162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-163"><a href="#cb120-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-164"><a href="#cb120-164" aria-hidden="true" tabindex="-1"></a>Here is we can see a more accurate idea of how people are tweeting about the show. Even with the show's title being remove love is still a large part of tweets.</span>
<span id="cb120-165"><a href="#cb120-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-166"><a href="#cb120-166" aria-hidden="true" tabindex="-1"></a>I also noticed that "blind" was used often. Looking at the tweets it seems unlikely that the word blind was used in any other way than to mention the show. Thus I'd like to remove the word blind as well since it seems unlikely to be useful to sentiment analysis.</span>
<span id="cb120-167"><a href="#cb120-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-168"><a href="#cb120-168" aria-hidden="true" tabindex="-1"></a>I will also remove the word "show" as show seemingly is only talking about the series rather than any emotions.</span>
<span id="cb120-169"><a href="#cb120-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-170"><a href="#cb120-170" aria-hidden="true" tabindex="-1"></a>I have also found a different way to remove dates and have done so below.</span>
<span id="cb120-171"><a href="#cb120-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-172"><a href="#cb120-172" aria-hidden="true" tabindex="-1"></a><span class="in">```{r removing the words blind and show}</span></span>
<span id="cb120-173"><a href="#cb120-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-174"><a href="#cb120-174" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb120-175"><a href="#cb120-175" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_text_corpus)</span>
<span id="cb120-176"><a href="#cb120-176" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> twitter_text_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_text_corpus)]</span>
<span id="cb120-177"><a href="#cb120-177" aria-hidden="true" tabindex="-1"></a>twittertextsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_text_corpus)</span>
<span id="cb120-178"><a href="#cb120-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-179"><a href="#cb120-179" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, twitter_text_corpus))</span>
<span id="cb120-180"><a href="#cb120-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-181"><a href="#cb120-181" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>, <span class="st">"blind"</span>, <span class="st">"show"</span>)</span>
<span id="cb120-182"><a href="#cb120-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-183"><a href="#cb120-183" aria-hidden="true" tabindex="-1"></a>twitter_text_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_text_corpus, </span>
<span id="cb120-184"><a href="#cb120-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb120-185"><a href="#cb120-185" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb120-186"><a href="#cb120-186" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb120-187"><a href="#cb120-187" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-188"><a href="#cb120-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-189"><a href="#cb120-189" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-190"><a href="#cb120-190" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb120-191"><a href="#cb120-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-192"><a href="#cb120-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-193"><a href="#cb120-193" aria-hidden="true" tabindex="-1"></a>twitter_text_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_text_corpus_tokens, </span>
<span id="cb120-194"><a href="#cb120-194" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb120-195"><a href="#cb120-195" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb120-196"><a href="#cb120-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-197"><a href="#cb120-197" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-198"><a href="#cb120-198" aria-hidden="true" tabindex="-1"></a>twitter_corpus_text_dfm <span class="ot">&lt;-</span> twitter_text_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb120-199"><a href="#cb120-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-200"><a href="#cb120-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-201"><a href="#cb120-201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-202"><a href="#cb120-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-203"><a href="#cb120-203" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_text_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb120-204"><a href="#cb120-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-205"><a href="#cb120-205" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-206"><a href="#cb120-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-207"><a href="#cb120-207" aria-hidden="true" tabindex="-1"></a>I have found out why the dates column has become messy. This is because originally I had put the corpus() function after the <span class="sc">\[</span>!is.na()<span class="sc">\]</span>. However when put first it still shows the date column in the summary.</span>
<span id="cb120-208"><a href="#cb120-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-209"><a href="#cb120-209" aria-hidden="true" tabindex="-1"></a><span class="fu"># Reddit and Updated Social Media word cloud</span></span>
<span id="cb120-210"><a href="#cb120-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-211"><a href="#cb120-211" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit word cloud same}</span></span>
<span id="cb120-212"><a href="#cb120-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-213"><a href="#cb120-213" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb120-214"><a href="#cb120-214" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit_corpus)</span>
<span id="cb120-215"><a href="#cb120-215" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb120-216"><a href="#cb120-216" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb120-217"><a href="#cb120-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-218"><a href="#cb120-218" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, reddit_corpus))</span>
<span id="cb120-219"><a href="#cb120-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-220"><a href="#cb120-220" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb120-221"><a href="#cb120-221" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb120-222"><a href="#cb120-222" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb120-223"><a href="#cb120-223" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb120-224"><a href="#cb120-224" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-225"><a href="#cb120-225" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-226"><a href="#cb120-226" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb120-227"><a href="#cb120-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-228"><a href="#cb120-228" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb120-229"><a href="#cb120-229" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb120-230"><a href="#cb120-230" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb120-231"><a href="#cb120-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-232"><a href="#cb120-232" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-233"><a href="#cb120-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-234"><a href="#cb120-234" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb120-235"><a href="#cb120-235" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-236"><a href="#cb120-236" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-237"><a href="#cb120-237" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-238"><a href="#cb120-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-239"><a href="#cb120-239" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span>
<span id="cb120-240"><a href="#cb120-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-241"><a href="#cb120-241" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-242"><a href="#cb120-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-243"><a href="#cb120-243" aria-hidden="true" tabindex="-1"></a><span class="in">```{r social updated word cloud}</span></span>
<span id="cb120-244"><a href="#cb120-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-245"><a href="#cb120-245" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(allsocialmedia, <span class="fu">detect_language</span>(allsocialmedia) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb120-246"><a href="#cb120-246" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(social_corpus)</span>
<span id="cb120-247"><a href="#cb120-247" aria-hidden="true" tabindex="-1"></a>socialsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(social_corpus)</span>
<span id="cb120-248"><a href="#cb120-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-249"><a href="#cb120-249" aria-hidden="true" tabindex="-1"></a>social_corpus <span class="ot">&lt;-</span> social_corpus[<span class="sc">!</span><span class="fu">is.na</span>(social_corpus)]</span>
<span id="cb120-250"><a href="#cb120-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-251"><a href="#cb120-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-252"><a href="#cb120-252" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>, <span class="st">"blind"</span>, <span class="st">"show"</span>)</span>
<span id="cb120-253"><a href="#cb120-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-254"><a href="#cb120-254" aria-hidden="true" tabindex="-1"></a>social_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(social_corpus, </span>
<span id="cb120-255"><a href="#cb120-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb120-256"><a href="#cb120-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb120-257"><a href="#cb120-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb120-258"><a href="#cb120-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-259"><a href="#cb120-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-260"><a href="#cb120-260" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-261"><a href="#cb120-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb120-262"><a href="#cb120-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-263"><a href="#cb120-263" aria-hidden="true" tabindex="-1"></a>social_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(social_corpus_tokens, </span>
<span id="cb120-264"><a href="#cb120-264" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb120-265"><a href="#cb120-265" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb120-266"><a href="#cb120-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-267"><a href="#cb120-267" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-268"><a href="#cb120-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-269"><a href="#cb120-269" aria-hidden="true" tabindex="-1"></a>social_corpus_dfm <span class="ot">&lt;-</span> social_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb120-270"><a href="#cb120-270" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-271"><a href="#cb120-271" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-272"><a href="#cb120-272" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-273"><a href="#cb120-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-274"><a href="#cb120-274" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(social_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"orange"</span>)</span>
<span id="cb120-275"><a href="#cb120-275" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-276"><a href="#cb120-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-277"><a href="#cb120-277" aria-hidden="true" tabindex="-1"></a><span class="fu"># Text Plot for Reddit</span></span>
<span id="cb120-278"><a href="#cb120-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-279"><a href="#cb120-279" aria-hidden="true" tabindex="-1"></a>I mentioned previously I would like to test a textplot for Reddit. Below you will see my test.</span>
<span id="cb120-280"><a href="#cb120-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-281"><a href="#cb120-281" aria-hidden="true" tabindex="-1"></a><span class="in">```{r text plot reddit}</span></span>
<span id="cb120-282"><a href="#cb120-282" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb120-283"><a href="#cb120-283" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(reddit_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb120-284"><a href="#cb120-284" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(rsmaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb120-285"><a href="#cb120-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-286"><a href="#cb120-286" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(rsmaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb120-287"><a href="#cb120-287" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-288"><a href="#cb120-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-289"><a href="#cb120-289" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb120-290"><a href="#cb120-290" aria-hidden="true" tabindex="-1"></a>rsmaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(rsmaller_dfm)</span>
<span id="cb120-291"><a href="#cb120-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-292"><a href="#cb120-292" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb120-293"><a href="#cb120-293" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb120-294"><a href="#cb120-294" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rsmaller_fcm)</span>
<span id="cb120-295"><a href="#cb120-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-296"><a href="#cb120-296" aria-hidden="true" tabindex="-1"></a>rmyFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(rsmaller_fcm, <span class="dv">30</span>))</span>
<span id="cb120-297"><a href="#cb120-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-298"><a href="#cb120-298" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb120-299"><a href="#cb120-299" aria-hidden="true" tabindex="-1"></a>reven_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(rsmaller_fcm, <span class="at">pattern =</span> rmyFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb120-300"><a href="#cb120-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-301"><a href="#cb120-301" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb120-302"><a href="#cb120-302" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(reven_smaller_fcm)</span>
<span id="cb120-303"><a href="#cb120-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-304"><a href="#cb120-304" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb120-305"><a href="#cb120-305" aria-hidden="true" tabindex="-1"></a>rsize <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(reven_smaller_fcm))</span>
<span id="cb120-306"><a href="#cb120-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-307"><a href="#cb120-307" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb120-308"><a href="#cb120-308" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(reven_smaller_fcm, <span class="at">vertex_size =</span> rsize <span class="sc">/</span> <span class="fu">max</span>(rsize) <span class="sc">*</span> <span class="dv">3</span>)</span>
<span id="cb120-309"><a href="#cb120-309" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-310"><a href="#cb120-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-311"><a href="#cb120-311" aria-hidden="true" tabindex="-1"></a>It's interesting to see that the contestants names seem to be much more connected. Overall Reddit's text plot feels a lot more interconnected than Twitter's.</span>
<span id="cb120-312"><a href="#cb120-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-313"><a href="#cb120-313" aria-hidden="true" tabindex="-1"></a>I will also test this for the combined data set.</span>
<span id="cb120-314"><a href="#cb120-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-315"><a href="#cb120-315" aria-hidden="true" tabindex="-1"></a><span class="fu"># All Social Media Tex Plot</span></span>
<span id="cb120-316"><a href="#cb120-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-317"><a href="#cb120-317" aria-hidden="true" tabindex="-1"></a><span class="in">```{r text plot socials}</span></span>
<span id="cb120-318"><a href="#cb120-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-319"><a href="#cb120-319" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb120-320"><a href="#cb120-320" aria-hidden="true" tabindex="-1"></a>ssmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(social_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb120-321"><a href="#cb120-321" aria-hidden="true" tabindex="-1"></a>ssmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(ssmaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb120-322"><a href="#cb120-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-323"><a href="#cb120-323" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(ssmaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb120-324"><a href="#cb120-324" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-325"><a href="#cb120-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-326"><a href="#cb120-326" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb120-327"><a href="#cb120-327" aria-hidden="true" tabindex="-1"></a>ssmaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(ssmaller_dfm)</span>
<span id="cb120-328"><a href="#cb120-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-329"><a href="#cb120-329" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb120-330"><a href="#cb120-330" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb120-331"><a href="#cb120-331" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(ssmaller_fcm)</span>
<span id="cb120-332"><a href="#cb120-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-333"><a href="#cb120-333" aria-hidden="true" tabindex="-1"></a>smyFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(ssmaller_fcm, <span class="dv">30</span>))</span>
<span id="cb120-334"><a href="#cb120-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-335"><a href="#cb120-335" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb120-336"><a href="#cb120-336" aria-hidden="true" tabindex="-1"></a>seven_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(ssmaller_fcm, <span class="at">pattern =</span> smyFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb120-337"><a href="#cb120-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-338"><a href="#cb120-338" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb120-339"><a href="#cb120-339" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(seven_smaller_fcm)</span>
<span id="cb120-340"><a href="#cb120-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-341"><a href="#cb120-341" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb120-342"><a href="#cb120-342" aria-hidden="true" tabindex="-1"></a>ssize <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(seven_smaller_fcm))</span>
<span id="cb120-343"><a href="#cb120-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-344"><a href="#cb120-344" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb120-345"><a href="#cb120-345" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(seven_smaller_fcm, <span class="at">vertex_size =</span> ssize <span class="sc">/</span> <span class="fu">max</span>(ssize) <span class="sc">*</span> <span class="dv">3</span>)</span>
<span id="cb120-346"><a href="#cb120-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-347"><a href="#cb120-347" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-348"><a href="#cb120-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-349"><a href="#cb120-349" aria-hidden="true" tabindex="-1"></a>Interestingly the text plot has a similarity more to Reddit than to Twitter. Perhaps this is because Reddit has more tokens as there is not a character limit.</span>
<span id="cb120-350"><a href="#cb120-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-351"><a href="#cb120-351" aria-hidden="true" tabindex="-1"></a><span class="fu"># Dictionary Approach with Twitter</span></span>
<span id="cb120-352"><a href="#cb120-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-353"><a href="#cb120-353" aria-hidden="true" tabindex="-1"></a>I will now try the dictionary approach using reddit, twitter, and the data combined (allsocialmedia).</span>
<span id="cb120-354"><a href="#cb120-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-355"><a href="#cb120-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r review sentiment twitter}</span></span>
<span id="cb120-356"><a href="#cb120-356" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_text_lemmitized,</span>
<span id="cb120-357"><a href="#cb120-357" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-358"><a href="#cb120-358" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-359"><a href="#cb120-359" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb120-360"><a href="#cb120-360" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-361"><a href="#cb120-361" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(twitterDfm_nrc)</span>
<span id="cb120-362"><a href="#cb120-362" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc</span>
<span id="cb120-363"><a href="#cb120-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-364"><a href="#cb120-364" aria-hidden="true" tabindex="-1"></a>tdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-365"><a href="#cb120-365" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> tdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb120-366"><a href="#cb120-366" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-367"><a href="#cb120-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-368"><a href="#cb120-368" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tdf_nrc) <span class="sc">+</span> </span>
<span id="cb120-369"><a href="#cb120-369" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb120-370"><a href="#cb120-370" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-371"><a href="#cb120-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-372"><a href="#cb120-372" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-373"><a href="#cb120-373" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-374"><a href="#cb120-374" aria-hidden="true" tabindex="-1"></a>Here we can see that for twitter most people were more positive about the show! That does correlate from what I often saw from skimming the tweets.</span>
<span id="cb120-375"><a href="#cb120-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-376"><a href="#cb120-376" aria-hidden="true" tabindex="-1"></a>Still we should double check to make sure that these actually do skew positively.</span>
<span id="cb120-377"><a href="#cb120-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-378"><a href="#cb120-378" aria-hidden="true" tabindex="-1"></a><span class="in">```{r comparing dictionaries twitter}</span></span>
<span id="cb120-379"><a href="#cb120-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-380"><a href="#cb120-380" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the LSD2015 dictionary</span></span>
<span id="cb120-381"><a href="#cb120-381" aria-hidden="true" tabindex="-1"></a>twitterDfm_lsd2015 <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_text_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-382"><a href="#cb120-382" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-383"><a href="#cb120-383" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">dfm_lookup</span>(data_dictionary_LSD2015)</span>
<span id="cb120-384"><a href="#cb120-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-385"><a href="#cb120-385" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the General Inquirer dictionary</span></span>
<span id="cb120-386"><a href="#cb120-386" aria-hidden="true" tabindex="-1"></a>twitterDfm_geninq <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_text_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-387"><a href="#cb120-387" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-388"><a href="#cb120-388" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_geninqposneg)</span>
<span id="cb120-389"><a href="#cb120-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-390"><a href="#cb120-390" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for LSD2015</span></span>
<span id="cb120-391"><a href="#cb120-391" aria-hidden="true" tabindex="-1"></a>tdf_lsd2015 <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_lsd2015, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-392"><a href="#cb120-392" aria-hidden="true" tabindex="-1"></a>tdf_lsd2015<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_lsd2015<span class="sc">$</span>positive <span class="sc">-</span> tdf_lsd2015<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> tdf_lsd2015<span class="sc">$</span>negative)</span>
<span id="cb120-393"><a href="#cb120-393" aria-hidden="true" tabindex="-1"></a>tdf_lsd2015<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> tdf_lsd2015<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-394"><a href="#cb120-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-395"><a href="#cb120-395" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb120-396"><a href="#cb120-396" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tdf_lsd2015)</span>
<span id="cb120-397"><a href="#cb120-397" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-398"><a href="#cb120-398" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for GenInq</span></span>
<span id="cb120-399"><a href="#cb120-399" aria-hidden="true" tabindex="-1"></a>tdf_geninq <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_geninq, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-400"><a href="#cb120-400" aria-hidden="true" tabindex="-1"></a>tdf_geninq<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_geninq<span class="sc">$</span>positive <span class="sc">-</span> tdf_geninq<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> tdf_geninq<span class="sc">$</span>negative)</span>
<span id="cb120-401"><a href="#cb120-401" aria-hidden="true" tabindex="-1"></a>tdf_geninq<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> tdf_geninq<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-402"><a href="#cb120-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-403"><a href="#cb120-403" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb120-404"><a href="#cb120-404" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tdf_geninq)</span>
<span id="cb120-405"><a href="#cb120-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-406"><a href="#cb120-406" aria-hidden="true" tabindex="-1"></a><span class="co"># create unique names for each dataframe</span></span>
<span id="cb120-407"><a href="#cb120-407" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tdf_nrc) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"nrc"</span>, <span class="fu">colnames</span>(tdf_nrc), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-408"><a href="#cb120-408" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tdf_lsd2015) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"lsd2015"</span>, <span class="fu">colnames</span>(tdf_lsd2015), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-409"><a href="#cb120-409" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tdf_geninq) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"geninq"</span>, <span class="fu">colnames</span>(tdf_geninq), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-410"><a href="#cb120-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-411"><a href="#cb120-411" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's compare our estimates</span></span>
<span id="cb120-412"><a href="#cb120-412" aria-hidden="true" tabindex="-1"></a>tsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(tdf_nrc, tdf_lsd2015, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"lsd2015_doc_id"</span>)</span>
<span id="cb120-413"><a href="#cb120-413" aria-hidden="true" tabindex="-1"></a>tsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(tsent_df, tdf_geninq, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"geninq_doc_id"</span>)</span>
<span id="cb120-414"><a href="#cb120-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-415"><a href="#cb120-415" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tsent_df)</span>
<span id="cb120-416"><a href="#cb120-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-417"><a href="#cb120-417" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(tsent_df<span class="sc">$</span>nrc_polarity, tsent_df<span class="sc">$</span>lsd2015_polarity)</span>
<span id="cb120-418"><a href="#cb120-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-419"><a href="#cb120-419" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(tsent_df<span class="sc">$</span>nrc_polarity, tsent_df<span class="sc">$</span>geninq_polarity)</span>
<span id="cb120-420"><a href="#cb120-420" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-421"><a href="#cb120-421" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(tsent_df<span class="sc">$</span>lsd2015_polarity, tsent_df<span class="sc">$</span>geninq_polarity)</span>
<span id="cb120-422"><a href="#cb120-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-423"><a href="#cb120-423" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these out. You can update this to check the look of other combinations</span></span>
<span id="cb120-424"><a href="#cb120-424" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tsent_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>nrc_polarity, <span class="at">y=</span>lsd2015_polarity)) <span class="sc">+</span> </span>
<span id="cb120-425"><a href="#cb120-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb120-426"><a href="#cb120-426" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb120-427"><a href="#cb120-427" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>,<span class="at">slope=</span><span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb120-428"><a href="#cb120-428" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-429"><a href="#cb120-429" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-430"><a href="#cb120-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-431"><a href="#cb120-431" aria-hidden="true" tabindex="-1"></a>Interestingly it seems there is a good amount of correlation between the two. Although not as strong as the tutorial it does seem that the dictionary is fairly accurate. Let's test this for both reddit and allsocialmedia.</span>
<span id="cb120-432"><a href="#cb120-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-433"><a href="#cb120-433" aria-hidden="true" tabindex="-1"></a><span class="fu"># Dictionary Approach with Reddit</span></span>
<span id="cb120-434"><a href="#cb120-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-435"><a href="#cb120-435" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit dictionary}</span></span>
<span id="cb120-436"><a href="#cb120-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-437"><a href="#cb120-437" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized,</span>
<span id="cb120-438"><a href="#cb120-438" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-439"><a href="#cb120-439" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-440"><a href="#cb120-440" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb120-441"><a href="#cb120-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-442"><a href="#cb120-442" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(redditDfm_nrc)</span>
<span id="cb120-443"><a href="#cb120-443" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc</span>
<span id="cb120-444"><a href="#cb120-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-445"><a href="#cb120-445" aria-hidden="true" tabindex="-1"></a>rdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-446"><a href="#cb120-446" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> rdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb120-447"><a href="#cb120-447" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-448"><a href="#cb120-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-449"><a href="#cb120-449" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rdf_nrc) <span class="sc">+</span> </span>
<span id="cb120-450"><a href="#cb120-450" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb120-451"><a href="#cb120-451" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-452"><a href="#cb120-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-453"><a href="#cb120-453" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-454"><a href="#cb120-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-455"><a href="#cb120-455" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit sentiment}</span></span>
<span id="cb120-456"><a href="#cb120-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-457"><a href="#cb120-457" aria-hidden="true" tabindex="-1"></a>rdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-458"><a href="#cb120-458" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> rdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb120-459"><a href="#cb120-459" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-460"><a href="#cb120-460" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-461"><a href="#cb120-461" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rdf_nrc) <span class="sc">+</span> </span>
<span id="cb120-462"><a href="#cb120-462" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb120-463"><a href="#cb120-463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-464"><a href="#cb120-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-465"><a href="#cb120-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-466"><a href="#cb120-466" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the LSD2015 dictionary</span></span>
<span id="cb120-467"><a href="#cb120-467" aria-hidden="true" tabindex="-1"></a>redditDfm_lsd2015 <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-468"><a href="#cb120-468" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-469"><a href="#cb120-469" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">dfm_lookup</span>(data_dictionary_LSD2015)</span>
<span id="cb120-470"><a href="#cb120-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-471"><a href="#cb120-471" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the General Inquirer dictionary</span></span>
<span id="cb120-472"><a href="#cb120-472" aria-hidden="true" tabindex="-1"></a>redditDfm_geninq <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-473"><a href="#cb120-473" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-474"><a href="#cb120-474" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_geninqposneg)</span>
<span id="cb120-475"><a href="#cb120-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-476"><a href="#cb120-476" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for LSD2015</span></span>
<span id="cb120-477"><a href="#cb120-477" aria-hidden="true" tabindex="-1"></a>rdf_lsd2015 <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_lsd2015, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-478"><a href="#cb120-478" aria-hidden="true" tabindex="-1"></a>rdf_lsd2015<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_lsd2015<span class="sc">$</span>positive <span class="sc">-</span> rdf_lsd2015<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> rdf_lsd2015<span class="sc">$</span>negative)</span>
<span id="cb120-479"><a href="#cb120-479" aria-hidden="true" tabindex="-1"></a>rdf_lsd2015<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> rdf_lsd2015<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-480"><a href="#cb120-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-481"><a href="#cb120-481" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb120-482"><a href="#cb120-482" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rdf_lsd2015)</span>
<span id="cb120-483"><a href="#cb120-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-484"><a href="#cb120-484" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for GenInq</span></span>
<span id="cb120-485"><a href="#cb120-485" aria-hidden="true" tabindex="-1"></a>rdf_geninq <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_geninq, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-486"><a href="#cb120-486" aria-hidden="true" tabindex="-1"></a>rdf_geninq<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_geninq<span class="sc">$</span>positive <span class="sc">-</span> rdf_geninq<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> rdf_geninq<span class="sc">$</span>negative)</span>
<span id="cb120-487"><a href="#cb120-487" aria-hidden="true" tabindex="-1"></a>rdf_geninq<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_geninq<span class="sc">$</span>positive <span class="sc">+</span> rdf_geninq<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-488"><a href="#cb120-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-489"><a href="#cb120-489" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb120-490"><a href="#cb120-490" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rdf_geninq)</span>
<span id="cb120-491"><a href="#cb120-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-492"><a href="#cb120-492" aria-hidden="true" tabindex="-1"></a><span class="co"># create unique names for each dataframe</span></span>
<span id="cb120-493"><a href="#cb120-493" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rdf_nrc) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"nrc"</span>, <span class="fu">colnames</span>(rdf_nrc), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-494"><a href="#cb120-494" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rdf_lsd2015) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"lsd2015"</span>, <span class="fu">colnames</span>(rdf_lsd2015), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-495"><a href="#cb120-495" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(rdf_geninq) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"geninq"</span>, <span class="fu">colnames</span>(rdf_geninq), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-496"><a href="#cb120-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-497"><a href="#cb120-497" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's compare our estimates</span></span>
<span id="cb120-498"><a href="#cb120-498" aria-hidden="true" tabindex="-1"></a>rsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(rdf_nrc, rdf_lsd2015, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"lsd2015_doc_id"</span>)</span>
<span id="cb120-499"><a href="#cb120-499" aria-hidden="true" tabindex="-1"></a>rsent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(rsent_df, rdf_geninq, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"geninq_doc_id"</span>)</span>
<span id="cb120-500"><a href="#cb120-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-501"><a href="#cb120-501" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(rsent_df)</span>
<span id="cb120-502"><a href="#cb120-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-503"><a href="#cb120-503" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(rsent_df<span class="sc">$</span>nrc_polarity, rsent_df<span class="sc">$</span>lsd2015_polarity)</span>
<span id="cb120-504"><a href="#cb120-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-505"><a href="#cb120-505" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(rsent_df<span class="sc">$</span>nrc_polarity, rsent_df<span class="sc">$</span>geninq_polarity)</span>
<span id="cb120-506"><a href="#cb120-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-507"><a href="#cb120-507" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(rsent_df<span class="sc">$</span>lsd2015_polarity, rsent_df<span class="sc">$</span>geninq_polarity)</span>
<span id="cb120-508"><a href="#cb120-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-509"><a href="#cb120-509" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these out. You can update this to check the look of other combinations</span></span>
<span id="cb120-510"><a href="#cb120-510" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rsent_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>nrc_polarity, <span class="at">y=</span>lsd2015_polarity)) <span class="sc">+</span> </span>
<span id="cb120-511"><a href="#cb120-511" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb120-512"><a href="#cb120-512" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb120-513"><a href="#cb120-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>,<span class="at">slope=</span><span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb120-514"><a href="#cb120-514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-515"><a href="#cb120-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-516"><a href="#cb120-516" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-517"><a href="#cb120-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-518"><a href="#cb120-518" aria-hidden="true" tabindex="-1"></a><span class="fu"># Dictionary Approach with All Social Media</span></span>
<span id="cb120-519"><a href="#cb120-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-520"><a href="#cb120-520" aria-hidden="true" tabindex="-1"></a><span class="in">```{r social media dictionary}</span></span>
<span id="cb120-521"><a href="#cb120-521" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-522"><a href="#cb120-522" aria-hidden="true" tabindex="-1"></a>socialDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(social_lemmitized,</span>
<span id="cb120-523"><a href="#cb120-523" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-524"><a href="#cb120-524" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-525"><a href="#cb120-525" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb120-526"><a href="#cb120-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-527"><a href="#cb120-527" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(socialDfm_nrc)</span>
<span id="cb120-528"><a href="#cb120-528" aria-hidden="true" tabindex="-1"></a>socialDfm_nrc</span>
<span id="cb120-529"><a href="#cb120-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-530"><a href="#cb120-530" aria-hidden="true" tabindex="-1"></a>df_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(socialDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-531"><a href="#cb120-531" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_nrc<span class="sc">$</span>positive <span class="sc">-</span> df_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative)</span>
<span id="cb120-532"><a href="#cb120-532" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-533"><a href="#cb120-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-534"><a href="#cb120-534" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_nrc) <span class="sc">+</span> </span>
<span id="cb120-535"><a href="#cb120-535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb120-536"><a href="#cb120-536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-537"><a href="#cb120-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-538"><a href="#cb120-538" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-539"><a href="#cb120-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-540"><a href="#cb120-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{r all social media sentiment}</span></span>
<span id="cb120-541"><a href="#cb120-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-542"><a href="#cb120-542" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the LSD2015 dictionary</span></span>
<span id="cb120-543"><a href="#cb120-543" aria-hidden="true" tabindex="-1"></a>socialDfm_lsd2015 <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(social_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-544"><a href="#cb120-544" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-545"><a href="#cb120-545" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">dfm_lookup</span>(data_dictionary_LSD2015)</span>
<span id="cb120-546"><a href="#cb120-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-547"><a href="#cb120-547" aria-hidden="true" tabindex="-1"></a><span class="co"># convert corpus to DFM using the General Inquirer dictionary</span></span>
<span id="cb120-548"><a href="#cb120-548" aria-hidden="true" tabindex="-1"></a>socialDfm_geninq <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(social_lemmitized, <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-549"><a href="#cb120-549" aria-hidden="true" tabindex="-1"></a>                             <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-550"><a href="#cb120-550" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_geninqposneg)</span>
<span id="cb120-551"><a href="#cb120-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-552"><a href="#cb120-552" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for LSD2015</span></span>
<span id="cb120-553"><a href="#cb120-553" aria-hidden="true" tabindex="-1"></a>df_lsd2015 <span class="ot">&lt;-</span> <span class="fu">convert</span>(socialDfm_lsd2015, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-554"><a href="#cb120-554" aria-hidden="true" tabindex="-1"></a>df_lsd2015<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_lsd2015<span class="sc">$</span>positive <span class="sc">-</span> df_lsd2015<span class="sc">$</span>negative)<span class="sc">/</span>(df_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> df_lsd2015<span class="sc">$</span>negative)</span>
<span id="cb120-555"><a href="#cb120-555" aria-hidden="true" tabindex="-1"></a>df_lsd2015<span class="sc">$</span>polarity[<span class="fu">which</span>((df_lsd2015<span class="sc">$</span>positive <span class="sc">+</span> df_lsd2015<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-556"><a href="#cb120-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-557"><a href="#cb120-557" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb120-558"><a href="#cb120-558" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_lsd2015)</span>
<span id="cb120-559"><a href="#cb120-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-560"><a href="#cb120-560" aria-hidden="true" tabindex="-1"></a><span class="co"># create polarity measure for GenInq</span></span>
<span id="cb120-561"><a href="#cb120-561" aria-hidden="true" tabindex="-1"></a>df_geninq <span class="ot">&lt;-</span> <span class="fu">convert</span>(socialDfm_geninq, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-562"><a href="#cb120-562" aria-hidden="true" tabindex="-1"></a>df_geninq<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_geninq<span class="sc">$</span>positive <span class="sc">-</span> df_geninq<span class="sc">$</span>negative)<span class="sc">/</span>(df_geninq<span class="sc">$</span>positive <span class="sc">+</span> df_geninq<span class="sc">$</span>negative)</span>
<span id="cb120-563"><a href="#cb120-563" aria-hidden="true" tabindex="-1"></a>df_geninq<span class="sc">$</span>polarity[<span class="fu">which</span>((df_geninq<span class="sc">$</span>positive <span class="sc">+</span> df_geninq<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-564"><a href="#cb120-564" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-565"><a href="#cb120-565" aria-hidden="true" tabindex="-1"></a><span class="co"># look at first few rows</span></span>
<span id="cb120-566"><a href="#cb120-566" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_geninq)</span>
<span id="cb120-567"><a href="#cb120-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-568"><a href="#cb120-568" aria-hidden="true" tabindex="-1"></a><span class="co"># create unique names for each dataframe</span></span>
<span id="cb120-569"><a href="#cb120-569" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_nrc) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"nrc"</span>, <span class="fu">colnames</span>(df_nrc), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-570"><a href="#cb120-570" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_lsd2015) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"lsd2015"</span>, <span class="fu">colnames</span>(df_lsd2015), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-571"><a href="#cb120-571" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(df_geninq) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"geninq"</span>, <span class="fu">colnames</span>(df_geninq), <span class="at">sep =</span> <span class="st">"_"</span>)</span>
<span id="cb120-572"><a href="#cb120-572" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-573"><a href="#cb120-573" aria-hidden="true" tabindex="-1"></a><span class="co"># now let's compare our estimates</span></span>
<span id="cb120-574"><a href="#cb120-574" aria-hidden="true" tabindex="-1"></a>sent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(df_nrc, df_lsd2015, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"lsd2015_doc_id"</span>)</span>
<span id="cb120-575"><a href="#cb120-575" aria-hidden="true" tabindex="-1"></a>sent_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(sent_df, df_geninq, <span class="at">by.x =</span> <span class="st">"nrc_doc_id"</span>, <span class="at">by.y =</span> <span class="st">"geninq_doc_id"</span>)</span>
<span id="cb120-576"><a href="#cb120-576" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-577"><a href="#cb120-577" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sent_df)</span>
<span id="cb120-578"><a href="#cb120-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-579"><a href="#cb120-579" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(sent_df<span class="sc">$</span>nrc_polarity, sent_df<span class="sc">$</span>lsd2015_polarity)</span>
<span id="cb120-580"><a href="#cb120-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-581"><a href="#cb120-581" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(sent_df<span class="sc">$</span>nrc_polarity, sent_df<span class="sc">$</span>geninq_polarity)</span>
<span id="cb120-582"><a href="#cb120-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-583"><a href="#cb120-583" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(sent_df<span class="sc">$</span>lsd2015_polarity, sent_df<span class="sc">$</span>geninq_polarity)</span>
<span id="cb120-584"><a href="#cb120-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-585"><a href="#cb120-585" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot these out. You can update this to check the look of other combinations</span></span>
<span id="cb120-586"><a href="#cb120-586" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(sent_df, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x=</span>nrc_polarity, <span class="at">y=</span>lsd2015_polarity)) <span class="sc">+</span> </span>
<span id="cb120-587"><a href="#cb120-587" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb120-588"><a href="#cb120-588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span></span>
<span id="cb120-589"><a href="#cb120-589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept=</span><span class="dv">0</span>,<span class="at">slope=</span><span class="dv">1</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb120-590"><a href="#cb120-590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-591"><a href="#cb120-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-592"><a href="#cb120-592" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-593"><a href="#cb120-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-594"><a href="#cb120-594" aria-hidden="true" tabindex="-1"></a><span class="fu"># Choosing a Dictionary</span></span>
<span id="cb120-595"><a href="#cb120-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-596"><a href="#cb120-596" aria-hidden="true" tabindex="-1"></a>Interestingly compared to Twitter, Reddit and "allsocialmedia" were a fair amount lower in correlation. Although it was still a fairly high correlation this may because of the different types of words used by Reddit.</span>
<span id="cb120-597"><a href="#cb120-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-598"><a href="#cb120-598" aria-hidden="true" tabindex="-1"></a>However when you compare the graphs all three are nearly identical in nature.</span>
<span id="cb120-599"><a href="#cb120-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-600"><a href="#cb120-600" aria-hidden="true" tabindex="-1"></a>I think I will use the NRC dictionary. I have chosen this one because I believe it's the strongest dictionary for my set of data because it explores through multiple categories of emotions. While both other dictionaries are good, NRC is a much larger dictionary. If you are interested I have found some more information on the dictionaries <span class="co">[</span><span class="ot">here</span><span class="co">](https://journodev.tech/blog-12-main-dictionaries-for-sentiment-analysis/)</span>!</span>
<span id="cb120-601"><a href="#cb120-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-602"><a href="#cb120-602" aria-hidden="true" tabindex="-1"></a><span class="fu"># Choosing a Research Question</span></span>
<span id="cb120-603"><a href="#cb120-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-604"><a href="#cb120-604" aria-hidden="true" tabindex="-1"></a>After looking through all of the data using the dictionary method I have decided to go back to this research question: How do Reddit and Twitter users sentiment differentiate about the show *Love is Blind Japan*?</span>
<span id="cb120-605"><a href="#cb120-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-606"><a href="#cb120-606" aria-hidden="true" tabindex="-1"></a>I have decided to do this because I believe there's more information that could be compared. Additionally while it is useful to know an overall sentiment for social media, I think that since each user base may be different we could see more interesting results when it is not mixed together.</span>
<span id="cb120-607"><a href="#cb120-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-608"><a href="#cb120-608" aria-hidden="true" tabindex="-1"></a><span class="fu"># Final Thoughts (TLDR)</span></span>
<span id="cb120-609"><a href="#cb120-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-610"><a href="#cb120-610" aria-hidden="true" tabindex="-1"></a><span class="fu">## Final thoughts</span></span>
<span id="cb120-611"><a href="#cb120-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-612"><a href="#cb120-612" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I have found a way to keep the date column in the summary but remove it from the actual tokens afterwards.</span>
<span id="cb120-613"><a href="#cb120-613" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-614"><a href="#cb120-614" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I have made a list of stop words that are related to the title of the show from Twitter.</span>
<span id="cb120-615"><a href="#cb120-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-616"><a href="#cb120-616" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>I have also included the removal of the word "show" as for tweets it only referenced show as a TV series. However for Reddit I have not removed the word show as Redditors seemed to use the word show outside of of meaning a TV show.</span>
<span id="cb120-617"><a href="#cb120-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-618"><a href="#cb120-618" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Reddit also did not have the same issues with the title of the show due to all of the posts in the sub reddit being related to Love is Blind Japan.</span>
<span id="cb120-619"><a href="#cb120-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-620"><a href="#cb120-620" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I have decided to use the NRC dictionary.</span>
<span id="cb120-621"><a href="#cb120-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-622"><a href="#cb120-622" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I have changed my question: How do Reddit and Twitter users sentiment differentiate about the show *Love is Blind Japan*?</span>
<span id="cb120-623"><a href="#cb120-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-624"><a href="#cb120-624" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>This means I will no longer use the combined data set.</span>
<span id="cb120-625"><a href="#cb120-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-626"><a href="#cb120-626" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I am unsure how I will use co-occurrence.</span>
<span id="cb120-627"><a href="#cb120-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-628"><a href="#cb120-628" aria-hidden="true" tabindex="-1"></a><span class="fu">## Future Work</span></span>
<span id="cb120-629"><a href="#cb120-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-630"><a href="#cb120-630" aria-hidden="true" tabindex="-1"></a>Here are a few things I'd like to do in blog post 5:</span>
<span id="cb120-631"><a href="#cb120-631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-632"><a href="#cb120-632" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I would like to look at co-occurrence more closely and decide if the code I have now is the one I would like to use for the final project. I currently have chosen it based off prior issues (such as having the show's name showing up).</span>
<span id="cb120-633"><a href="#cb120-633" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-634"><a href="#cb120-634" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>This may include using a maxium document frequency and a minimum word frequency.</span>
<span id="cb120-635"><a href="#cb120-635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-636"><a href="#cb120-636" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I would like to see if I can create an emotional rating comparison using the dictionary method. This would include using the NRC for twitter and reddit to compare the average emotional response.</span>
<span id="cb120-637"><a href="#cb120-637" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-638"><a href="#cb120-638" aria-hidden="true" tabindex="-1"></a><span class="fu"># Final Code Moving Forward</span></span>
<span id="cb120-639"><a href="#cb120-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-640"><a href="#cb120-640" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit word cloud}</span></span>
<span id="cb120-641"><a href="#cb120-641" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(reddit, <span class="fu">detect_language</span>(reddit) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb120-642"><a href="#cb120-642" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit_corpus)</span>
<span id="cb120-643"><a href="#cb120-643" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> reddit_corpus[<span class="sc">!</span><span class="fu">is.na</span>(reddit_corpus)]</span>
<span id="cb120-644"><a href="#cb120-644" aria-hidden="true" tabindex="-1"></a>redditsummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb120-645"><a href="#cb120-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-646"><a href="#cb120-646" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, reddit_corpus))</span>
<span id="cb120-647"><a href="#cb120-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-648"><a href="#cb120-648" aria-hidden="true" tabindex="-1"></a>reddit_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, </span>
<span id="cb120-649"><a href="#cb120-649" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb120-650"><a href="#cb120-650" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T, </span>
<span id="cb120-651"><a href="#cb120-651" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb120-652"><a href="#cb120-652" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-653"><a href="#cb120-653" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-654"><a href="#cb120-654" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb120-655"><a href="#cb120-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-656"><a href="#cb120-656" aria-hidden="true" tabindex="-1"></a>reddit_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(reddit_corpus_tokens, </span>
<span id="cb120-657"><a href="#cb120-657" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb120-658"><a href="#cb120-658" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb120-659"><a href="#cb120-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-660"><a href="#cb120-660" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-661"><a href="#cb120-661" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-662"><a href="#cb120-662" aria-hidden="true" tabindex="-1"></a>reddit_corpus_dfm <span class="ot">&lt;-</span> reddit_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb120-663"><a href="#cb120-663" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-664"><a href="#cb120-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-665"><a href="#cb120-665" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-666"><a href="#cb120-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-667"><a href="#cb120-667" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"red"</span>)</span>
<span id="cb120-668"><a href="#cb120-668" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-669"><a href="#cb120-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-670"><a href="#cb120-670" aria-hidden="true" tabindex="-1"></a><span class="in">```{r twitter word cloud}</span></span>
<span id="cb120-671"><a href="#cb120-671" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-672"><a href="#cb120-672" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">subset</span>(twitter, <span class="fu">detect_language</span>(twitter) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb120-673"><a href="#cb120-673" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(twitter_corpus)</span>
<span id="cb120-674"><a href="#cb120-674" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> twitter_corpus[<span class="sc">!</span><span class="fu">is.na</span>(twitter_corpus)]</span>
<span id="cb120-675"><a href="#cb120-675" aria-hidden="true" tabindex="-1"></a>twittersummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(twitter_corpus)</span>
<span id="cb120-676"><a href="#cb120-676" aria-hidden="true" tabindex="-1"></a>twitter_corpus <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">gsub</span>(<span class="st">"[[:digit:]]{1,4}-[[:digit:]]{1,4}-[[:digit:]]{1,4}"</span>, <span class="st">""</span>, twitter_corpus))</span>
<span id="cb120-677"><a href="#cb120-677" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-678"><a href="#cb120-678" aria-hidden="true" tabindex="-1"></a>mystopwords <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"love is blind japan"</span>, <span class="st">"#loveisbindjapan"</span>, <span class="st">"#LoveIsBlindJapan"</span>,<span class="st">"Love Is Blind Japan"</span>,<span class="st">"Love is Blind Japan"</span>, <span class="st">"Love Is Blind: Japan"</span>, <span class="st">"#loveisblind"</span>, <span class="st">"ラブイズブラインドjapan"</span>, <span class="st">"#ラブイズブラインドjapan"</span>, <span class="st">"loveisblind"</span>, <span class="st">"#loveisblind2"</span>, <span class="st">"blind:japan"</span>, <span class="st">"blind"</span>, <span class="st">"show"</span>)</span>
<span id="cb120-679"><a href="#cb120-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-680"><a href="#cb120-680" aria-hidden="true" tabindex="-1"></a>twitter_corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(twitter_corpus, </span>
<span id="cb120-681"><a href="#cb120-681" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb120-682"><a href="#cb120-682" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T,</span>
<span id="cb120-683"><a href="#cb120-683" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_symbols =</span> T,</span>
<span id="cb120-684"><a href="#cb120-684" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_url =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-685"><a href="#cb120-685" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-686"><a href="#cb120-686" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> <span class="fu">phrase</span>(mystopwords), <span class="at">valuetype =</span> <span class="st">'fixed'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-687"><a href="#cb120-687" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_select</span>(<span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb120-688"><a href="#cb120-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-689"><a href="#cb120-689" aria-hidden="true" tabindex="-1"></a>twitter_lemmitized <span class="ot">&lt;-</span> <span class="fu">tokens_replace</span>(twitter_corpus_tokens, </span>
<span id="cb120-690"><a href="#cb120-690" aria-hidden="true" tabindex="-1"></a>                             <span class="at">pattern =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>token, </span>
<span id="cb120-691"><a href="#cb120-691" aria-hidden="true" tabindex="-1"></a>                             <span class="at">replacement =</span> lexicon<span class="sc">::</span>hash_lemmas<span class="sc">$</span>lemma)</span>
<span id="cb120-692"><a href="#cb120-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-693"><a href="#cb120-693" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb120-694"><a href="#cb120-694" aria-hidden="true" tabindex="-1"></a>twitter_corpus_dfm <span class="ot">&lt;-</span> twitter_lemmitized <span class="sc">%&gt;%</span> </span>
<span id="cb120-695"><a href="#cb120-695" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-696"><a href="#cb120-696" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">'english'</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb120-697"><a href="#cb120-697" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">30</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-698"><a href="#cb120-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-699"><a href="#cb120-699" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(twitter_corpus_dfm, <span class="at">max_words=</span><span class="dv">200</span>, <span class="at">color=</span><span class="st">"blue"</span>)</span>
<span id="cb120-700"><a href="#cb120-700" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-701"><a href="#cb120-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-702"><a href="#cb120-702" aria-hidden="true" tabindex="-1"></a><span class="in">```{r twitter cooccurrence}</span></span>
<span id="cb120-703"><a href="#cb120-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-704"><a href="#cb120-704" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb120-705"><a href="#cb120-705" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(twitter_corpus_text_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb120-706"><a href="#cb120-706" aria-hidden="true" tabindex="-1"></a>smaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(smaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb120-707"><a href="#cb120-707" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-708"><a href="#cb120-708" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(smaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb120-709"><a href="#cb120-709" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-710"><a href="#cb120-710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-711"><a href="#cb120-711" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb120-712"><a href="#cb120-712" aria-hidden="true" tabindex="-1"></a>smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(smaller_dfm)</span>
<span id="cb120-713"><a href="#cb120-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-714"><a href="#cb120-714" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb120-715"><a href="#cb120-715" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb120-716"><a href="#cb120-716" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(smaller_fcm)</span>
<span id="cb120-717"><a href="#cb120-717" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-718"><a href="#cb120-718" aria-hidden="true" tabindex="-1"></a>myFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(smaller_fcm, <span class="dv">30</span>))</span>
<span id="cb120-719"><a href="#cb120-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-720"><a href="#cb120-720" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb120-721"><a href="#cb120-721" aria-hidden="true" tabindex="-1"></a>even_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(smaller_fcm, <span class="at">pattern =</span> myFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb120-722"><a href="#cb120-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-723"><a href="#cb120-723" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb120-724"><a href="#cb120-724" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(even_smaller_fcm)</span>
<span id="cb120-725"><a href="#cb120-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-726"><a href="#cb120-726" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb120-727"><a href="#cb120-727" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(even_smaller_fcm))</span>
<span id="cb120-728"><a href="#cb120-728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-729"><a href="#cb120-729" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb120-730"><a href="#cb120-730" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(even_smaller_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">3</span>)</span>
<span id="cb120-731"><a href="#cb120-731" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-732"><a href="#cb120-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-733"><a href="#cb120-733" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit cooccurrence}</span></span>
<span id="cb120-734"><a href="#cb120-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-735"><a href="#cb120-735" aria-hidden="true" tabindex="-1"></a><span class="co"># let's create a nicer dfm by limiting to words that appear frequently and are in more than 30% of chapters</span></span>
<span id="cb120-736"><a href="#cb120-736" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(reddit_corpus_dfm, <span class="at">max_termfreq =</span> <span class="dv">3400</span>, <span class="at">min_termfreq =</span> <span class="dv">10</span>)</span>
<span id="cb120-737"><a href="#cb120-737" aria-hidden="true" tabindex="-1"></a>rsmaller_dfm <span class="ot">&lt;-</span> <span class="fu">dfm_trim</span>(rsmaller_dfm, <span class="at">max_docfreq =</span> .<span class="dv">3</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>)</span>
<span id="cb120-738"><a href="#cb120-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-739"><a href="#cb120-739" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(rsmaller_dfm, <span class="at">min_count =</span> <span class="dv">100</span>,</span>
<span id="cb120-740"><a href="#cb120-740" aria-hidden="true" tabindex="-1"></a>                   <span class="at">random_order =</span> <span class="cn">FALSE</span>)</span>
<span id="cb120-741"><a href="#cb120-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-742"><a href="#cb120-742" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm from dfm</span></span>
<span id="cb120-743"><a href="#cb120-743" aria-hidden="true" tabindex="-1"></a>rsmaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(rsmaller_dfm)</span>
<span id="cb120-744"><a href="#cb120-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-745"><a href="#cb120-745" aria-hidden="true" tabindex="-1"></a><span class="co"># check the dimensions (i.e., the number of rows and the number of columnns)</span></span>
<span id="cb120-746"><a href="#cb120-746" aria-hidden="true" tabindex="-1"></a><span class="co"># of the matrix we created</span></span>
<span id="cb120-747"><a href="#cb120-747" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(rsmaller_fcm)</span>
<span id="cb120-748"><a href="#cb120-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-749"><a href="#cb120-749" aria-hidden="true" tabindex="-1"></a>rmyFeatures <span class="ot">&lt;-</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(rsmaller_fcm, <span class="dv">30</span>))</span>
<span id="cb120-750"><a href="#cb120-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-751"><a href="#cb120-751" aria-hidden="true" tabindex="-1"></a><span class="co"># retain only those top features as part of our matrix</span></span>
<span id="cb120-752"><a href="#cb120-752" aria-hidden="true" tabindex="-1"></a>reven_smaller_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(rsmaller_fcm, <span class="at">pattern =</span> rmyFeatures, <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb120-753"><a href="#cb120-753" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-754"><a href="#cb120-754" aria-hidden="true" tabindex="-1"></a><span class="co"># check dimensions</span></span>
<span id="cb120-755"><a href="#cb120-755" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(reven_smaller_fcm)</span>
<span id="cb120-756"><a href="#cb120-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-757"><a href="#cb120-757" aria-hidden="true" tabindex="-1"></a><span class="co"># compute size weight for vertices in network</span></span>
<span id="cb120-758"><a href="#cb120-758" aria-hidden="true" tabindex="-1"></a>rsize <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(reven_smaller_fcm))</span>
<span id="cb120-759"><a href="#cb120-759" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-760"><a href="#cb120-760" aria-hidden="true" tabindex="-1"></a><span class="co"># create plot</span></span>
<span id="cb120-761"><a href="#cb120-761" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(reven_smaller_fcm, <span class="at">vertex_size =</span> rsize <span class="sc">/</span> <span class="fu">max</span>(rsize) <span class="sc">*</span> <span class="dv">3</span>)</span>
<span id="cb120-762"><a href="#cb120-762" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-763"><a href="#cb120-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-764"><a href="#cb120-764" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reddit dfm dictionary}</span></span>
<span id="cb120-765"><a href="#cb120-765" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-766"><a href="#cb120-766" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(reddit_lemmitized,</span>
<span id="cb120-767"><a href="#cb120-767" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-768"><a href="#cb120-768" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-769"><a href="#cb120-769" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb120-770"><a href="#cb120-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-771"><a href="#cb120-771" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(redditDfm_nrc)</span>
<span id="cb120-772"><a href="#cb120-772" aria-hidden="true" tabindex="-1"></a>redditDfm_nrc</span>
<span id="cb120-773"><a href="#cb120-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-774"><a href="#cb120-774" aria-hidden="true" tabindex="-1"></a>rdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(redditDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-775"><a href="#cb120-775" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (rdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> rdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb120-776"><a href="#cb120-776" aria-hidden="true" tabindex="-1"></a>rdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((rdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> rdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-777"><a href="#cb120-777" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-778"><a href="#cb120-778" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(rdf_nrc) <span class="sc">+</span> </span>
<span id="cb120-779"><a href="#cb120-779" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb120-780"><a href="#cb120-780" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-781"><a href="#cb120-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-782"><a href="#cb120-782" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb120-783"><a href="#cb120-783" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-784"><a href="#cb120-784" aria-hidden="true" tabindex="-1"></a><span class="in">```{r twitter dfm dictionary}</span></span>
<span id="cb120-785"><a href="#cb120-785" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc <span class="ot">&lt;-</span> <span class="fu">dfm</span>(<span class="fu">tokens</span>(twitter_lemmitized,</span>
<span id="cb120-786"><a href="#cb120-786" aria-hidden="true" tabindex="-1"></a>                              <span class="at">remove_punct =</span> <span class="cn">TRUE</span>),</span>
<span id="cb120-787"><a href="#cb120-787" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tolower =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-788"><a href="#cb120-788" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb120-789"><a href="#cb120-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-790"><a href="#cb120-790" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(twitterDfm_nrc)</span>
<span id="cb120-791"><a href="#cb120-791" aria-hidden="true" tabindex="-1"></a>twitterDfm_nrc</span>
<span id="cb120-792"><a href="#cb120-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-793"><a href="#cb120-793" aria-hidden="true" tabindex="-1"></a>tdf_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(twitterDfm_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb120-794"><a href="#cb120-794" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (tdf_nrc<span class="sc">$</span>positive <span class="sc">-</span> tdf_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative)</span>
<span id="cb120-795"><a href="#cb120-795" aria-hidden="true" tabindex="-1"></a>tdf_nrc<span class="sc">$</span>polarity[<span class="fu">which</span>((tdf_nrc<span class="sc">$</span>positive <span class="sc">+</span> tdf_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb120-796"><a href="#cb120-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-797"><a href="#cb120-797" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(tdf_nrc) <span class="sc">+</span> </span>
<span id="cb120-798"><a href="#cb120-798" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x=</span>polarity)) <span class="sc">+</span> </span>
<span id="cb120-799"><a href="#cb120-799" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span>
<span id="cb120-800"><a href="#cb120-800" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-801"><a href="#cb120-801" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>