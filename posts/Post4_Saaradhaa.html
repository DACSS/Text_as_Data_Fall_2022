<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Saaradhaa M">
<meta name="dcterms.date" content="2022-10-29">
<meta name="description" content="Cleaning Reddit Data; Analysing PDFs and Reddit Data">

<title>Text-as-Data Fall 2022 - Post 4</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="styles.css">
<meta name="twitter:title" content="Text-as-Data Fall 2022 - Post 4">
<meta name="twitter:description" content="Cleaning Reddit Data; Analysing PDFs and Reddit Data">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:site" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/UMass White Wordmark Horiz.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Text-as-Data Fall 2022</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/Text_as_Data_Fall_2022/">
 <span class="menu-text">Fall 2022</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">
 <span class="menu-text">Contributors</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss">
 <span class="menu-text">DACSS</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS/Text_as_Data_Fall_2022"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#oral-histories-cleaning-data" id="toc-oral-histories-cleaning-data" class="nav-link" data-scroll-target="#oral-histories-cleaning-data">Oral Histories: Cleaning Data</a></li>
  <li><a href="#oral-histories-text-plots" id="toc-oral-histories-text-plots" class="nav-link" data-scroll-target="#oral-histories-text-plots">Oral Histories: Text Plots</a></li>
  <li><a href="#oral-histories-n-grams" id="toc-oral-histories-n-grams" class="nav-link" data-scroll-target="#oral-histories-n-grams">Oral Histories: N-Grams</a></li>
  <li><a href="#reddit-generating-data" id="toc-reddit-generating-data" class="nav-link" data-scroll-target="#reddit-generating-data">Reddit: Generating Data</a></li>
  <li><a href="#reddit-cleaning-data" id="toc-reddit-cleaning-data" class="nav-link" data-scroll-target="#reddit-cleaning-data">Reddit: Cleaning Data</a></li>
  <li><a href="#reddit-text-plots" id="toc-reddit-text-plots" class="nav-link" data-scroll-target="#reddit-text-plots">Reddit: Text Plots</a></li>
  <li><a href="#comparing-the-two-datasets" id="toc-comparing-the-two-datasets" class="nav-link" data-scroll-target="#comparing-the-two-datasets">Comparing the Two Datasets</a></li>
  <li><a href="#moving-forward" id="toc-moving-forward" class="nav-link" data-scroll-target="#moving-forward">Moving Forward</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Post 4</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">post 4</div>
    <div class="quarto-category">saaradhaa</div>
  </div>
  </div>

<div>
  <div class="description">
    Cleaning Reddit Data; Analysing PDFs and Reddit Data
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Saaradhaa M </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 29, 2022</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readtext)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(phrasemachine)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in library(phrasemachine): there is no package called 'phrasemachine'</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RedditExtractoR)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"post4_saaradhaa.rdata"</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>In the first part of the post, I will revise some of the processing and preliminary analysis for the oral histories, which I worked on in the previous blog post. I will then work on generating and cleaning the Reddit data.</p>
</section>
<section id="oral-histories-cleaning-data" class="level2">
<h2 class="anchored" data-anchor-id="oral-histories-cleaning-data">Oral Histories: Cleaning Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list out files.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># file_list &lt;- dir("~/Desktop/2022_Fall/GitHub/Text_as_Data_Fall_2022/posts/Transcripts", full.names = TRUE, pattern = "*.txt")</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create list of text files.</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts &lt;- readtext(paste0(file_list), docvarnames = c("transcript", "text"))</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># remove references to 'interviewer:' and 'interviewee:', as well as line breaks, '\n'. I found this website really helpful in testing out regex: https://spannbaueradam.shinyapps.io/r_regex_tester/</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts$text &lt;- str_replace_all(transcripts$text, "[a-zA-Z]+:", "")</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts$text &lt;- str_replace_all(transcripts$text, "\n", "")</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(transcripts, "transcripts.rds")</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts &lt;- read_rds("transcripts.rds")</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># create 'quanteda' corpus. </span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>oh_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(transcripts<span class="sc">$</span>text)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># create my own list of stopwords, based on qualitative reading of the first transcript.</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>to_keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"do"</span>, <span class="st">"does"</span>, <span class="st">"did"</span>, <span class="st">"would"</span>, <span class="st">"should"</span>, <span class="st">"could"</span>, <span class="st">"ought"</span>, <span class="st">"isn't"</span>, <span class="st">"aren't"</span>, <span class="st">"wasn't"</span>, <span class="st">"weren't"</span>, <span class="st">"hasn't"</span>, <span class="st">"haven't"</span>, <span class="st">"hadn't"</span>, <span class="st">"doesn't"</span>, <span class="st">"don't"</span>, <span class="st">"didn't"</span>, <span class="st">"won't"</span>, <span class="st">"wouldn't"</span>, <span class="st">"shan't"</span>, <span class="st">"shouldn't"</span>, <span class="st">"can't"</span>, <span class="st">"cannot"</span>, <span class="st">"couldn't"</span>, <span class="st">"mustn't"</span>, <span class="st">"because"</span>, <span class="st">"against"</span>, <span class="st">"between"</span>, <span class="st">"into"</span>, <span class="st">"through"</span>, <span class="st">"during"</span>, <span class="st">"before"</span>, <span class="st">"after"</span>, <span class="st">"above"</span>, <span class="st">"below"</span>, <span class="st">"over"</span>, <span class="st">"under"</span>, <span class="st">"no"</span>, <span class="st">"nor"</span>, <span class="st">"not"</span>)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> Stopwords[<span class="sc">!</span>(Stopwords <span class="sc">%in%</span> to_keep)]</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># create tokens, remove punctuation, numbers, symbols and stopwords, then convert to lowercase.</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(oh_corpus, <span class="at">remove_punct =</span> T, <span class="at">remove_numbers =</span> T, <span class="at">remove_symbols =</span> T)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(oh_tokens, <span class="at">pattern =</span> Stopwords, <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(oh_tokens)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co"># remove tokens that appeared in previous wordcloud that are not too meaningful.</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_remove</span>(oh_tokens, <span class="fu">c</span>(<span class="st">"know"</span>, <span class="st">"even"</span>, <span class="st">"used"</span>, <span class="st">"thing"</span>, <span class="st">"lot"</span>, <span class="st">"yes"</span>, <span class="st">"say"</span>, <span class="st">"going"</span>, <span class="st">"went"</span>, <span class="st">"yeah"</span>, <span class="st">"come"</span>, <span class="st">"actually"</span>, <span class="st">"mean"</span>, <span class="st">"like"</span>, <span class="st">"think"</span>, <span class="st">"get"</span>, <span class="st">"go"</span>, <span class="st">"said"</span>, <span class="st">"see"</span>, <span class="st">"things"</span>, <span class="st">"really"</span>, <span class="st">"well"</span>, <span class="st">"still"</span>, <span class="st">"little"</span>, <span class="st">"got"</span>, <span class="st">"right"</span>, <span class="st">"can"</span>, <span class="st">"came"</span>, <span class="st">"um"</span>, <span class="st">"quite"</span>, <span class="st">"bit"</span>, <span class="st">"every"</span>, <span class="st">"oh"</span>, <span class="st">"many"</span>, <span class="st">"always"</span>, <span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"just"</span>, <span class="st">"much"</span>, <span class="st">"want"</span>, <span class="st">"wanted"</span>, <span class="st">"okay"</span>, <span class="st">"part"</span>, <span class="st">"also"</span>, <span class="st">"just"</span>, <span class="st">"us"</span>, <span class="st">"never"</span>, <span class="st">"many"</span>, <span class="st">"something"</span>, <span class="st">"want"</span>, <span class="st">"wanted"</span>, <span class="st">"uh"</span>))</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># get summary of corpus.</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>oh_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(oh_corpus)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co"># add metadata on interview phase and interviewee gender.</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>oh_summary<span class="sc">$</span>phase <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>oh_summary<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a><span class="co"># create metadata.</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(oh_corpus) <span class="ot">&lt;-</span> oh_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="oral-histories-text-plots" class="level2">
<h2 class="anchored" data-anchor-id="oral-histories-text-plots">Oral Histories: Text Plots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># re-create wordcloud with modified data.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> oh_tokens <span class="sc">%&gt;%</span> <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">min_docfreq =</span> .<span class="dv">1</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>) <span class="sc">%&gt;%</span> <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>))</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm, <span class="at">max_words=</span><span class="dv">50</span>, <span class="at">color=</span><span class="st">"purple"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Post4_Saaradhaa_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>I changed up the wordcloud by removing some tokens that were not as meaningful, and this seems to paint a much clearer picture of what the interviews were about - work, music, college, family, friends, and moving to a new country.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm.</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(dfm)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># keep only top features.</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>small_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(fcm, <span class="at">pattern =</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(fcm, <span class="dv">50</span>)), <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># compute weights.</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(small_fcm))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create network.</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(small_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Post4_Saaradhaa_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The network plot also looks a lot better after removing symbols; it’s much more inter-connected. It looks like many interviews referenced Seattle, which makes sense, since the interviews were conducted by UW. Lots of references to work, school and university, which might reflect (1) South Asian cultural focus on these themes, or (2) possibly many of the migrants moved to the US for these purposes.</p>
</section>
<section id="oral-histories-n-grams" class="level2">
<h2 class="anchored" data-anchor-id="oral-histories-n-grams">Oral Histories: N-Grams</h2>
<p>Since the oral histories were collected over a number of years, there did not seem to be a uniform structure that they followed. Hence, I will randomly select a subset of transcripts, and then try to identify common phrases.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># randomly choose 10 out of 41 transcripts.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">41</span>, <span class="dv">10</span>, <span class="at">replace=</span><span class="cn">FALSE</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>documents <span class="ot">&lt;-</span> transcripts<span class="sc">$</span>text[numbers]</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># generate phrases.</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>phrases <span class="ot">&lt;-</span> <span class="fu">phrasemachine</span>(documents, <span class="at">minimum_ngram_length =</span> <span class="dv">2</span>, <span class="at">maximum_ngram_length =</span> <span class="dv">4</span>, <span class="at">return_phrase_vectors =</span> <span class="cn">TRUE</span>, <span class="at">return_tag_sequences =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in phrasemachine(documents, minimum_ngram_length = 2, maximum_ngram_length = 4, : could not find function "phrasemachine"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">1</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "set_designer"                  "costume_designer"             
 [3] "early_years"                   "college_education"            
 [5] "future_career"                 "future_career_goals"          
 [7] "career_goals"                  "medical_school"               
 [9] "high_level"                    "high_level_of_Biology"        
[11] "level_of_Biology"              "medical_school"               
[13] "research_of_history"           "English_teacher"              
[15] "four_brothers"                 "English_Honors"               
[17] "Master’s_degree"               "Master’s_degree_in_Jadavpur"  
[19] "degree_in_Jadavpur"            "degree_in_Jadavpur_University"
[21] "Jadavpur_University"          </code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">2</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Institute_for_Advanced"         "Institute_for_Advanced_Studies"
 [3] "Advanced_Studies"               "state_school"                  
 [5] "New_Jersey"                     "New_Jersey_State"              
 [7] "New_Jersey_State_School"        "Jersey_State"                  
 [9] "Jersey_State_School"            "State_School"                  
[11] "School_for_the_Deaf"            "third_grade"                   
[13] "hardest_time"                   "following_year"                
[15] "classes_in_sign"                "classes_in_sign_language"      
[17] "sign_language"                  "other_people"                  
[19] "…_Yeah"                         "other_teachers"                
[21] "kinds_of_things"               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">3</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Norma_Morgan_from_Bozeman"      "Morgan_from_Bozeman"           
 [3] "Providence_Hospital"            "first_daughter"                
 [5] "job_in_a_steel"                 "steel_factory"                 
 [7] "Isaacson_Ironworks"             "Isaacson_Ironworks_on_Marginal"
 [9] "Ironworks_on_Marginal"          "Ironworks_on_Marginal_Way"     
[11] "Marginal_Way"                   "right_by_Boeing"               
[13] "right_by_Boeing_Plant"          "Boeing_Plant"                  
[15] "[my_wife"                       "Madagascar_for_a_year"         
[17] "19_years"                       "younger_brother"               
[19] "interesting_–"                  "[_Laughs"                      
[21] "Paris_–"                       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">4</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Hong_Kong_to_Tokyo"   "Kong_to_Tokyo"        "boat_in_Hong"        
 [4] "boat_in_Hong_Kong"    "Hong_Kong"            "name_of_this_boat"   
 [7] "little_shopping"      "Hong_Kong"            "nobody’s_business"   
[10] "lot_of_Indians"       "independent_country"  "champions_of_freedom"
[13] "good_business"        "taxi_drivers"         "own_businesses"      
[16] "good_time"            "big_boat"             "two_passengers"      
[19] "two_Ceylonese"        "States_for_studies"   "Indian_fruit"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">5</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "type_of_thing"              "thirty-some_people"        
 [3] "two_blocks"                 "blocks_from_the_university"
 [5] "exact_address"              "off_.ramp"                 
 [7] "three_blocks"               "other_street"              
 [9] "different_facility"         "long_time"                 
[11] "kind_of_set"                "[_Laughs"                  
[13] "least_nine_months"          "nine_months"               
[15] "nine_months"                "different_places"          
[17] "portable_housing"           "right_at_the_university"   
[19] "big_frosh_pond"             "frosh_pond"                
[21] "World_War"                 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">6</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "white_community"           "Asian_countries"          
 [3] "Sri_Lanka"                 "sort_of_racism"           
 [5] "university_community"      "certain_times"            
 [7] "university_environment"    "home_countries"           
 [9] "own_identity"              "struggles_of_identity"    
[11] "Sri_Lankan"                "American_Culture"         
[13] "100_years"                 "part_of_Sri"              
[15] "part_of_Sri_Lanka"         "Sri_Lanka"                
[17] "citizens_of_two_countries" "two_countries"            
[19] "Sri_Lanka"                 "whole_family"             
[21] "Sri_Lankan"               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">7</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "masters_program"                  "MIT_as_a_research"               
 [3] "research_faculty"                 "faculty_in_the_Design"           
 [5] "Islamic_Societies"                "Islamic_Societies_program"       
 [7] "Societies_program"                "student_to_faculty"              
 [9] "head_of_the_Aga"                  "Aga_Khan"                        
[11] "Aga_Khan_Program"                 "Khan_Program"                    
[13] "Khan_Program_for_Islamic"         "Program_for_Islamic"             
[15] "Program_for_Islamic_Architecture" "Islamic_Architecture"            
[17] "new_discipline"                   "Design_for_the_Islamic"          
[19] "Islamic_Society"                  "whole_new_discipline"            
[21] "new_discipline"                  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">8</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Asian_community"             "community_in_the_Seattle"   
 [3] "Pacific_Northwest"           "Pacific_Northwest_area"     
 [5] "Northwest_area"              "kind_of_music"              
 [7] "Hindustani_classical_music"  "classical_music"            
 [9] "many_cultural_organizations" "cultural_organizations"     
[11] "case_during_that_time"       "light_about_the_community"  
[13] "South_Asian_community"       "Asian_community"            
[15] "kind_of_art"                 "South_Asian_community"      
[17] "Asian_community"             "East_Pakistan"              
[19] "Pakistan_at_that_time"       "few_families"               
[21] "few_Indian_students"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">9</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "United_Nations"             "Lakshmi_teacher"           
 [3] "United_Nations"             "great_body"                
 [5] "great_reason"               "Hindi_courses"             
 [7] "Hindi_courses_after_school" "courses_after_school"      
 [9] "short_stories"              "Funny_thing"               
[11] "lot_of_[color"              "lot_of_[color_]"           
[13] "[color_]"                   "[color_]_complex"          
[15] "]_complex"                  "complex_in_those_days"     
[17] "respect_South"              "respect_South_Indians"     
[19] "South_Indians"              "kind_of_go"                
[21] "people’s_mind"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">10</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "new_workshop"           "brand_new_quarters"     "new_quarters"          
 [4] "Hong_Kong"              "Hong_Kong_brother"      "Hong_Kong_brother_]"   
 [7] "Kong_brother"           "Kong_brother_]"         "brother_]"             
[10] "big_deal"               "[My_cousin"             "[My_cousin_]"          
[13] "cousin_]"               "few_months"             "good_time"             
[16] "[_India"                "[_India_]"              "India_]"               
[19] "Commonwealth_country"   "job_with_BOAC"          "job_with_BOAC_[British"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save.image("post4_saaradhaa.RData")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>From the small selection of n-grams above, it seems like some topics that might arise are memories from South Asia, what prompted the move to the US (education, work), travel, experiences in the US, etc.</p>
<p><strong>How do I preserve sequences of two or four numbers in my tokens? These might reference years in history, which might be important to understand some topics that come up.</strong></p>
</section>
<section id="reddit-generating-data" class="level2">
<h2 class="anchored" data-anchor-id="reddit-generating-data">Reddit: Generating Data</h2>
<p>The previous time I tried to load the Reddit data, it just didn’t work. I’m going to try to leave RStudio alone for a longer time this time around and see if that might do the trick instead. Much of the code below is commented out, since it need not be re-run when rendering.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate top 1000 posts.</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top &lt;- find_thread_urls(subreddit="ABCDesis",period="all",sort_by="top")</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top &lt;- content_top[-1,]</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top$type &lt;- "top"</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(content_top, "content_top.rds")</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top &lt;- read_rds("content_top.rds")</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="co"># attempting to generate comments alone first - this took ~ 1hr.</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content &lt;- get_thread_content(content$url[1:1000])$comments$comment</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(url_content, "url_content.rds")</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_top &lt;- read_rds("url_content.rds")</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># i decided to try to get additional info on the comments as well.</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_info &lt;- get_thread_content(content$url[1:1000])$comments</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(url_content_info, "url_content_info.rds")</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_info_top &lt;- read_rds("url_content_info.rds")</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_info_top$type &lt;- "top"</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(url_content_info_top, "url_content_info_top.rds")</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_top &lt;- read_rds("url_content_info_top.rds")</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="co"># dr. song also wanted me to try generating more than 1000 posts, so i'm gonna try to create tables for 'hot' and 'rising' as well, not just 'top'.</span></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- find_thread_urls(subreddit="ABCDesis",period="all",sort_by="hot")</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot$id &lt;- 1:991</span></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a><span class="co"># check duplicates with top posts, then remove them.</span></span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates &lt;- inner_join(content_hot, content_top)</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a><span class="co"># remove_list &lt;- duplicates$id</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- content_hot %&gt;% slice(-c(remove_list))</span></span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a><span class="co"># save object.</span></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot$type &lt;- "hot"</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(content_hot, "content_hot.rds")</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- read_rds("content_hot.rds")</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a><span class="co"># generate comments for 'hot' posts.</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_hot &lt;- get_thread_content(content_hot$url[1:936])$comments</span></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_hot$type &lt;- "hot" </span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(comments_hot, "comments_hot.rds")</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_hot &lt;- read_rds("comments_hot.rds")</span></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a><span class="co"># ok, i'm not going to add rising' or 'new', because 'rising' only had 24 posts, and 'new' had many duplicates with 'hot'. so i'll just be using 'hot' and 'top' posts.</span></span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a><span class="co"># combine 'hot' and 'top' posts into 1 dataframe.</span></span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- content_hot[,-8]</span></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts &lt;- rbind(content_hot, content_top)</span></span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_posts, "reddit_posts.rds")</span></span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts &lt;- read_rds("reddit_posts.rds")</span></span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a><span class="co"># combine 'hot' and 'top' comments into 1 dataframe.</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments &lt;- rbind(comments_hot, comments_top)</span></span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_comments, "reddit_comments.rds")</span></span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments &lt;- read_rds("reddit_comments.rds")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ok, this is a quick summary of what I’ve done above - I generated both the ‘top’ and ‘hot’ posts of all time from the subreddit, as well as all the comments on the posts, and some associated information. I then combined them into two dataframes - one with all the posts (<em>N</em> = 1,936) and another with all the comments (<em>N</em> = 110,967). I’m going to clean up the two dataframes in the following code chunk.</p>
</section>
<section id="reddit-cleaning-data" class="level2">
<h2 class="anchored" data-anchor-id="reddit-cleaning-data">Reddit: Cleaning Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># check dataframe of comments.</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(reddit_comments)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 106,092
Columns: 9
$ url        &lt;chr&gt; "https://www.reddit.com/r/ABCDesis/comments/x6oivc/what_are…
$ author     &lt;chr&gt; "jubeer", "day1222", "ninithebeanie", "skinnybrownhippie", …
$ date       &lt;chr&gt; "2022-09-06", "2022-09-06", "2022-09-06", "2022-09-06", "20…
$ timestamp  &lt;dbl&gt; 1662424047, 1662427654, 1662445516, 1662479140, 1662475081,…
$ score      &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 5, 1, -4, 1, 1, 1, 1, -1, 0, 29, 15, 10, …
$ golds      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
$ comment    &lt;chr&gt; "The Baljeet meme cut", "Honestly works for a lot of brown …
$ comment_id &lt;chr&gt; "1", "1_1", "1_2", "2", "1", "2", "1", "2", "3", "4", "5", …
$ type       &lt;chr&gt; "hot", "hot", "hot", "hot", "hot", "hot", "hot", "hot", "ho…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove 'upvotes' and 'downvotes' as they haves no useful info.</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>reddit_comments <span class="ot">&lt;-</span> reddit_comments <span class="sc">%&gt;%</span> <span class="fu">select</span> (<span class="sc">-</span><span class="fu">c</span>(upvotes, downvotes))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `select()`:
! Can't subset columns that don't exist.
✖ Column `upvotes` doesn't exist.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove 'deleted' / 'removed' comments.</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>reddit_comments<span class="sc">$</span>comment <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(reddit_comments<span class="sc">$</span>comment, <span class="st">"</span><span class="sc">\\</span><span class="st">[deleted</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>reddit_comments<span class="sc">$</span>comment <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(reddit_comments<span class="sc">$</span>comment, <span class="st">"</span><span class="sc">\\</span><span class="st">[ Removed by Reddit </span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>reddit_comments <span class="ot">&lt;-</span> reddit_comments[<span class="sc">!</span>(reddit_comments<span class="sc">$</span>comment<span class="sc">==</span><span class="st">""</span>), ]</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vectorized function to remove html elements from comments.</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># vectorized_htmldecode &lt;- Vectorize(HTMLdecode)</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="co"># run the function - this is commented out because it took a really long time. </span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments$comment &lt;- vectorized_htmldecode(reddit_comments$comment)</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a><span class="co"># i'm going to save the object so i don't have to re-do this.</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_comments, "reddit_comments_final.rds")</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co"># re-load the object.</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments_final &lt;- read_rds("reddit_comments_final.rds")</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a><span class="co"># ok, now check the dataframe of posts.</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(reddit_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 1,936
Columns: 7
$ date_utc  &lt;chr&gt; "2022-09-05", "2022-09-06", "2022-09-05", "2022-09-05", "202…
$ timestamp &lt;dbl&gt; 1662405203, 1662431521, 1662394101, 1662350088, 1662419582, …
$ title     &lt;chr&gt; "What are some good hairstyles for guy that does have his be…
$ text      &lt;chr&gt; "", "", "\n\n[View Poll](https://www.reddit.com/poll/x6jxfg)…
$ comments  &lt;dbl&gt; 4, 2, 9, 25, 12, 16, 4, 3, 0, 0, 4, 80, 9, 0, 85, 15, 24, 11…
$ url       &lt;chr&gt; "https://www.reddit.com/r/ABCDesis/comments/x6oivc/what_are_…
$ type      &lt;chr&gt; "hot", "hot", "hot", "hot", "hot", "hot", "hot", "hot", "hot…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove 'subreddit' column.</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>reddit_posts <span class="ot">&lt;-</span> reddit_posts <span class="sc">%&gt;%</span> <span class="fu">select</span> (<span class="sc">-</span><span class="fu">c</span>(subreddit))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in `select()`:
! Can't subset columns that don't exist.
✖ Column `subreddit` doesn't exist.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove html elements from 'title' column.</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts$title &lt;- vectorized_htmldecode(reddit_posts$title)</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="co"># remove html elements from 'text' column.</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts$text &lt;- vectorized_htmldecode(reddit_posts$text)</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># save the finalised posts object.</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_posts, "reddit_posts_final.rds")</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a><span class="co"># re-load the object.</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts_final &lt;- read_rds("reddit_posts_final.rds")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="reddit-text-plots" class="level2">
<h2 class="anchored" data-anchor-id="reddit-text-plots">Reddit: Text Plots</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create 'quanteda' corpus. </span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit_comments_final<span class="sc">$</span>comment)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># use same list of stopwords as oral histories.</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>to_keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"do"</span>, <span class="st">"does"</span>, <span class="st">"did"</span>, <span class="st">"would"</span>, <span class="st">"should"</span>, <span class="st">"could"</span>, <span class="st">"ought"</span>, <span class="st">"isn't"</span>, <span class="st">"aren't"</span>, <span class="st">"wasn't"</span>, <span class="st">"weren't"</span>, <span class="st">"hasn't"</span>, <span class="st">"haven't"</span>, <span class="st">"hadn't"</span>, <span class="st">"doesn't"</span>, <span class="st">"don't"</span>, <span class="st">"didn't"</span>, <span class="st">"won't"</span>, <span class="st">"wouldn't"</span>, <span class="st">"shan't"</span>, <span class="st">"shouldn't"</span>, <span class="st">"can't"</span>, <span class="st">"cannot"</span>, <span class="st">"couldn't"</span>, <span class="st">"mustn't"</span>, <span class="st">"because"</span>, <span class="st">"against"</span>, <span class="st">"between"</span>, <span class="st">"into"</span>, <span class="st">"through"</span>, <span class="st">"during"</span>, <span class="st">"before"</span>, <span class="st">"after"</span>, <span class="st">"above"</span>, <span class="st">"below"</span>, <span class="st">"over"</span>, <span class="st">"under"</span>, <span class="st">"no"</span>, <span class="st">"nor"</span>, <span class="st">"not"</span>)</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> Stopwords[<span class="sc">!</span>(Stopwords <span class="sc">%in%</span> to_keep)]</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co"># create tokens, remove punctuation, numbers, symbols and stopwords, then convert to lowercase.</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, <span class="at">remove_punct =</span> T, <span class="at">remove_numbers =</span> T, <span class="at">remove_symbols =</span> T)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_tokens, <span class="at">pattern =</span> Stopwords, <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_tokens)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co"># remove tokens that appear in wordcloud that are not too meaningful.</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_remove</span>(reddit_tokens, <span class="fu">c</span>(<span class="st">"m"</span>, <span class="st">"s"</span>, <span class="st">"say"</span>, <span class="st">"see"</span>, <span class="st">"make"</span>, <span class="st">"way"</span>, <span class="st">"well"</span>, <span class="st">"many"</span>, <span class="st">"someone"</span>, <span class="st">"never"</span>, <span class="st">"still"</span>, <span class="st">"now"</span>, <span class="st">"go"</span>, <span class="st">"thing"</span>, <span class="st">"things"</span>, <span class="st">"know"</span>, <span class="st">"think"</span>, <span class="st">"also"</span>, <span class="st">"said"</span>, <span class="st">"going"</span>, <span class="st">"want"</span>, <span class="st">"t"</span>, <span class="st">"one"</span>, <span class="st">"lot"</span>, <span class="st">"much"</span>, <span class="st">"even"</span>, <span class="st">"really"</span>, <span class="st">"sure"</span>, <span class="st">"yeah"</span>, <span class="st">"look"</span>, <span class="st">"always"</span>, <span class="st">"something"</span>, <span class="st">"re"</span>, <span class="st">"actually"</span>, <span class="st">"get"</span>, <span class="st">"got"</span>, <span class="st">"though"</span>, <span class="st">"take"</span>, <span class="st">"etc"</span>, <span class="st">"can"</span>, <span class="st">"like"</span>, <span class="st">"don"</span>, <span class="st">"saying"</span>))</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="co"># get summary of corpus.</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>reddit_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="co"># create wordcloud with modified data.</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>reddit_dfm <span class="ot">&lt;-</span> reddit_tokens <span class="sc">%&gt;%</span> <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>))</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_dfm, <span class="at">max_words =</span> <span class="dv">50</span>, <span class="at">color=</span><span class="st">"purple"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Post4_Saaradhaa_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm.</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>reddit_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(reddit_dfm)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># keep only top features.</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>small_reddit_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(reddit_fcm, <span class="at">pattern =</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(reddit_fcm, <span class="dv">50</span>)), <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># compute weights.</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(small_reddit_fcm))</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co"># create network.</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(small_reddit_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Post4_Saaradhaa_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The wordcloud and network plot allow me to confirm that this subreddit indeed discusses South Asian culture, hence making it a good comparison with the oral histories data. We can also see that the younger generation has concerns specific to their age group - such as with dating and relationships, a wider range of ethnic and national groups (Asians, Black people, White people, British, etc), racism (which was not in the text plots for the older generation) and even caste concerns. This gives me some idea of how the values and concerns of South Asians have changed over time, which is my first research question.</p>
</section>
<section id="comparing-the-two-datasets" class="level2">
<h2 class="anchored" data-anchor-id="comparing-the-two-datasets">Comparing the Two Datasets</h2>
<p>I will attempt to use str_match() to compare how many times ‘culture’ appears in the oral histories vs.&nbsp;Reddit data (as a proportion of the total number of tokens).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute proportions for reddit data.</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_count</span>(reddit_tokens, <span class="st">"[cC]ultur"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8047</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">ntoken</span>(reddit_tokens))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2029966</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># compute proportions for oral histories.</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_count</span>(oh_tokens, <span class="st">"[cC]ultur"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 502</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">ntoken</span>(oh_tokens))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 206015</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test proportions.</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.test</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">8047</span>, <span class="dv">502</span>), <span class="at">n =</span> <span class="fu">c</span>(<span class="dv">2029966</span>, <span class="dv">206015</span>), <span class="at">p =</span> <span class="cn">NULL</span>, <span class="at">alternative =</span> <span class="st">"two.sided"</span>, <span class="at">correct =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    2-sample test for equality of proportions with continuity correction

data:  c(8047, 502) out of c(2029966, 206015)
X-squared = 114.16, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: two.sided
95 percent confidence interval:
 0.00129494 0.00175984
sample estimates:
     prop 1      prop 2 
0.003964106 0.002436716 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save.image("post4_saaradhaa.RData")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Interesting - the younger generation referenced culture significantly more than the older generation did.</p>
</section>
<section id="moving-forward" class="level2">
<h2 class="anchored" data-anchor-id="moving-forward">Moving Forward</h2>
<p>This is my tentative plan for the next two posts, which I might revise depending on time constraints.</p>
<ul>
<li><p>Post 5: try Personal Values Dictionary on oral histories and Reddit data.</p></li>
<li><p>Post 6: do topic modelling on oral histories and Reddit data.</p></li>
</ul>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/Text_as_Data_Fall_2022" data-repo-id="R_kgDOH5675w" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb53" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Post 4"</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Saaradhaa M"</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="an">description:</span><span class="co"> "Cleaning Reddit Data; Analysing PDFs and Reddit Data"</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "10/29/2022"</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="co">    html:</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co">        df-print: paged</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="co">        toc: true</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a><span class="co">        code-copy: true</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a><span class="co">        code-tools: true</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a><span class="co">        css: "styles.css"</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span><span class="co"> </span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - post 4</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a><span class="co">  - saaradhaa</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.textplots)</span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readtext)</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(phrasemachine)</span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RedditExtractoR)</span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb53-34"><a href="#cb53-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-35"><a href="#cb53-35" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"post4_saaradhaa.rdata"</span>)</span>
<span id="cb53-36"><a href="#cb53-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-37"><a href="#cb53-37" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>, <span class="at">warning =</span> <span class="cn">FALSE</span>, <span class="at">message =</span> <span class="cn">FALSE</span>)</span>
<span id="cb53-38"><a href="#cb53-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-39"><a href="#cb53-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-40"><a href="#cb53-40" aria-hidden="true" tabindex="-1"></a><span class="fu">## Introduction</span></span>
<span id="cb53-41"><a href="#cb53-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-42"><a href="#cb53-42" aria-hidden="true" tabindex="-1"></a>In the first part of the post, I will revise some of the processing and preliminary analysis for the oral histories, which I worked on in the previous blog post. I will then work on generating and cleaning the Reddit data.</span>
<span id="cb53-43"><a href="#cb53-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-44"><a href="#cb53-44" aria-hidden="true" tabindex="-1"></a><span class="fu">## Oral Histories: Cleaning Data</span></span>
<span id="cb53-45"><a href="#cb53-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-48"><a href="#cb53-48" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-49"><a href="#cb53-49" aria-hidden="true" tabindex="-1"></a><span class="co"># list out files.</span></span>
<span id="cb53-50"><a href="#cb53-50" aria-hidden="true" tabindex="-1"></a><span class="co"># file_list &lt;- dir("~/Desktop/2022_Fall/GitHub/Text_as_Data_Fall_2022/posts/Transcripts", full.names = TRUE, pattern = "*.txt")</span></span>
<span id="cb53-51"><a href="#cb53-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-52"><a href="#cb53-52" aria-hidden="true" tabindex="-1"></a><span class="co"># create list of text files.</span></span>
<span id="cb53-53"><a href="#cb53-53" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts &lt;- readtext(paste0(file_list), docvarnames = c("transcript", "text"))</span></span>
<span id="cb53-54"><a href="#cb53-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-55"><a href="#cb53-55" aria-hidden="true" tabindex="-1"></a><span class="co"># remove references to 'interviewer:' and 'interviewee:', as well as line breaks, '\n'. I found this website really helpful in testing out regex: https://spannbaueradam.shinyapps.io/r_regex_tester/</span></span>
<span id="cb53-56"><a href="#cb53-56" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts$text &lt;- str_replace_all(transcripts$text, "[a-zA-Z]+:", "")</span></span>
<span id="cb53-57"><a href="#cb53-57" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts$text &lt;- str_replace_all(transcripts$text, "\n", "")</span></span>
<span id="cb53-58"><a href="#cb53-58" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(transcripts, "transcripts.rds")</span></span>
<span id="cb53-59"><a href="#cb53-59" aria-hidden="true" tabindex="-1"></a><span class="co"># transcripts &lt;- read_rds("transcripts.rds")</span></span>
<span id="cb53-60"><a href="#cb53-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-61"><a href="#cb53-61" aria-hidden="true" tabindex="-1"></a><span class="co"># create 'quanteda' corpus. </span></span>
<span id="cb53-62"><a href="#cb53-62" aria-hidden="true" tabindex="-1"></a>oh_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(transcripts<span class="sc">$</span>text)</span>
<span id="cb53-63"><a href="#cb53-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-64"><a href="#cb53-64" aria-hidden="true" tabindex="-1"></a><span class="co"># create my own list of stopwords, based on qualitative reading of the first transcript.</span></span>
<span id="cb53-65"><a href="#cb53-65" aria-hidden="true" tabindex="-1"></a>to_keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"do"</span>, <span class="st">"does"</span>, <span class="st">"did"</span>, <span class="st">"would"</span>, <span class="st">"should"</span>, <span class="st">"could"</span>, <span class="st">"ought"</span>, <span class="st">"isn't"</span>, <span class="st">"aren't"</span>, <span class="st">"wasn't"</span>, <span class="st">"weren't"</span>, <span class="st">"hasn't"</span>, <span class="st">"haven't"</span>, <span class="st">"hadn't"</span>, <span class="st">"doesn't"</span>, <span class="st">"don't"</span>, <span class="st">"didn't"</span>, <span class="st">"won't"</span>, <span class="st">"wouldn't"</span>, <span class="st">"shan't"</span>, <span class="st">"shouldn't"</span>, <span class="st">"can't"</span>, <span class="st">"cannot"</span>, <span class="st">"couldn't"</span>, <span class="st">"mustn't"</span>, <span class="st">"because"</span>, <span class="st">"against"</span>, <span class="st">"between"</span>, <span class="st">"into"</span>, <span class="st">"through"</span>, <span class="st">"during"</span>, <span class="st">"before"</span>, <span class="st">"after"</span>, <span class="st">"above"</span>, <span class="st">"below"</span>, <span class="st">"over"</span>, <span class="st">"under"</span>, <span class="st">"no"</span>, <span class="st">"nor"</span>, <span class="st">"not"</span>)</span>
<span id="cb53-66"><a href="#cb53-66" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>)</span>
<span id="cb53-67"><a href="#cb53-67" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> Stopwords[<span class="sc">!</span>(Stopwords <span class="sc">%in%</span> to_keep)]</span>
<span id="cb53-68"><a href="#cb53-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-69"><a href="#cb53-69" aria-hidden="true" tabindex="-1"></a><span class="co"># create tokens, remove punctuation, numbers, symbols and stopwords, then convert to lowercase.</span></span>
<span id="cb53-70"><a href="#cb53-70" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(oh_corpus, <span class="at">remove_punct =</span> T, <span class="at">remove_numbers =</span> T, <span class="at">remove_symbols =</span> T)</span>
<span id="cb53-71"><a href="#cb53-71" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(oh_tokens, <span class="at">pattern =</span> Stopwords, <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb53-72"><a href="#cb53-72" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(oh_tokens)</span>
<span id="cb53-73"><a href="#cb53-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-74"><a href="#cb53-74" aria-hidden="true" tabindex="-1"></a><span class="co"># remove tokens that appeared in previous wordcloud that are not too meaningful.</span></span>
<span id="cb53-75"><a href="#cb53-75" aria-hidden="true" tabindex="-1"></a>oh_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_remove</span>(oh_tokens, <span class="fu">c</span>(<span class="st">"know"</span>, <span class="st">"even"</span>, <span class="st">"used"</span>, <span class="st">"thing"</span>, <span class="st">"lot"</span>, <span class="st">"yes"</span>, <span class="st">"say"</span>, <span class="st">"going"</span>, <span class="st">"went"</span>, <span class="st">"yeah"</span>, <span class="st">"come"</span>, <span class="st">"actually"</span>, <span class="st">"mean"</span>, <span class="st">"like"</span>, <span class="st">"think"</span>, <span class="st">"get"</span>, <span class="st">"go"</span>, <span class="st">"said"</span>, <span class="st">"see"</span>, <span class="st">"things"</span>, <span class="st">"really"</span>, <span class="st">"well"</span>, <span class="st">"still"</span>, <span class="st">"little"</span>, <span class="st">"got"</span>, <span class="st">"right"</span>, <span class="st">"can"</span>, <span class="st">"came"</span>, <span class="st">"um"</span>, <span class="st">"quite"</span>, <span class="st">"bit"</span>, <span class="st">"every"</span>, <span class="st">"oh"</span>, <span class="st">"many"</span>, <span class="st">"always"</span>, <span class="st">"one"</span>, <span class="st">"two"</span>, <span class="st">"just"</span>, <span class="st">"much"</span>, <span class="st">"want"</span>, <span class="st">"wanted"</span>, <span class="st">"okay"</span>, <span class="st">"part"</span>, <span class="st">"also"</span>, <span class="st">"just"</span>, <span class="st">"us"</span>, <span class="st">"never"</span>, <span class="st">"many"</span>, <span class="st">"something"</span>, <span class="st">"want"</span>, <span class="st">"wanted"</span>, <span class="st">"uh"</span>))</span>
<span id="cb53-76"><a href="#cb53-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-77"><a href="#cb53-77" aria-hidden="true" tabindex="-1"></a><span class="co"># get summary of corpus.</span></span>
<span id="cb53-78"><a href="#cb53-78" aria-hidden="true" tabindex="-1"></a>oh_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(oh_corpus)</span>
<span id="cb53-79"><a href="#cb53-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-80"><a href="#cb53-80" aria-hidden="true" tabindex="-1"></a><span class="co"># add metadata on interview phase and interviewee gender.</span></span>
<span id="cb53-81"><a href="#cb53-81" aria-hidden="true" tabindex="-1"></a>oh_summary<span class="sc">$</span>phase <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb53-82"><a href="#cb53-82" aria-hidden="true" tabindex="-1"></a>oh_summary<span class="sc">$</span>gender <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb53-83"><a href="#cb53-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-84"><a href="#cb53-84" aria-hidden="true" tabindex="-1"></a><span class="co"># create metadata.</span></span>
<span id="cb53-85"><a href="#cb53-85" aria-hidden="true" tabindex="-1"></a><span class="fu">docvars</span>(oh_corpus) <span class="ot">&lt;-</span> oh_summary</span>
<span id="cb53-86"><a href="#cb53-86" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-87"><a href="#cb53-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-88"><a href="#cb53-88" aria-hidden="true" tabindex="-1"></a><span class="fu">## Oral Histories: Text Plots</span></span>
<span id="cb53-89"><a href="#cb53-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-92"><a href="#cb53-92" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-93"><a href="#cb53-93" aria-hidden="true" tabindex="-1"></a><span class="co"># re-create wordcloud with modified data.</span></span>
<span id="cb53-94"><a href="#cb53-94" aria-hidden="true" tabindex="-1"></a>dfm <span class="ot">&lt;-</span> oh_tokens <span class="sc">%&gt;%</span> <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">10</span>, <span class="at">verbose =</span> <span class="cn">FALSE</span>, <span class="at">min_docfreq =</span> .<span class="dv">1</span>, <span class="at">docfreq_type =</span> <span class="st">"prop"</span>) <span class="sc">%&gt;%</span> <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>))</span>
<span id="cb53-95"><a href="#cb53-95" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(dfm, <span class="at">max_words=</span><span class="dv">50</span>, <span class="at">color=</span><span class="st">"purple"</span>)</span>
<span id="cb53-96"><a href="#cb53-96" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-97"><a href="#cb53-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-98"><a href="#cb53-98" aria-hidden="true" tabindex="-1"></a>I changed up the wordcloud by removing some tokens that were not as meaningful, and this seems to paint a much clearer picture of what the interviews were about - work, music, college, family, friends, and moving to a new country.</span>
<span id="cb53-99"><a href="#cb53-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-102"><a href="#cb53-102" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-103"><a href="#cb53-103" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm.</span></span>
<span id="cb53-104"><a href="#cb53-104" aria-hidden="true" tabindex="-1"></a>fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(dfm)</span>
<span id="cb53-105"><a href="#cb53-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-106"><a href="#cb53-106" aria-hidden="true" tabindex="-1"></a><span class="co"># keep only top features.</span></span>
<span id="cb53-107"><a href="#cb53-107" aria-hidden="true" tabindex="-1"></a>small_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(fcm, <span class="at">pattern =</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(fcm, <span class="dv">50</span>)), <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb53-108"><a href="#cb53-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-109"><a href="#cb53-109" aria-hidden="true" tabindex="-1"></a><span class="co"># compute weights.</span></span>
<span id="cb53-110"><a href="#cb53-110" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(small_fcm))</span>
<span id="cb53-111"><a href="#cb53-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-112"><a href="#cb53-112" aria-hidden="true" tabindex="-1"></a><span class="co"># create network.</span></span>
<span id="cb53-113"><a href="#cb53-113" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(small_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">4</span>)</span>
<span id="cb53-114"><a href="#cb53-114" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-115"><a href="#cb53-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-116"><a href="#cb53-116" aria-hidden="true" tabindex="-1"></a>The network plot also looks a lot better after removing symbols; it's much more inter-connected. It looks like many interviews referenced Seattle, which makes sense, since the interviews were conducted by UW. Lots of references to work, school and university, which might reflect (1) South Asian cultural focus on these themes, or (2) possibly many of the migrants moved to the US for these purposes.</span>
<span id="cb53-117"><a href="#cb53-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-118"><a href="#cb53-118" aria-hidden="true" tabindex="-1"></a><span class="fu">## Oral Histories: N-Grams</span></span>
<span id="cb53-119"><a href="#cb53-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-120"><a href="#cb53-120" aria-hidden="true" tabindex="-1"></a>Since the oral histories were collected over a number of years, there did not seem to be a uniform structure that they followed. Hence, I will randomly select a subset of transcripts, and then try to identify common phrases.</span>
<span id="cb53-121"><a href="#cb53-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-124"><a href="#cb53-124" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-125"><a href="#cb53-125" aria-hidden="true" tabindex="-1"></a><span class="co"># randomly choose 10 out of 41 transcripts.</span></span>
<span id="cb53-126"><a href="#cb53-126" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb53-127"><a href="#cb53-127" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">41</span>, <span class="dv">10</span>, <span class="at">replace=</span><span class="cn">FALSE</span>)</span>
<span id="cb53-128"><a href="#cb53-128" aria-hidden="true" tabindex="-1"></a>documents <span class="ot">&lt;-</span> transcripts<span class="sc">$</span>text[numbers]</span>
<span id="cb53-129"><a href="#cb53-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-130"><a href="#cb53-130" aria-hidden="true" tabindex="-1"></a><span class="co"># generate phrases.</span></span>
<span id="cb53-131"><a href="#cb53-131" aria-hidden="true" tabindex="-1"></a>phrases <span class="ot">&lt;-</span> <span class="fu">phrasemachine</span>(documents, <span class="at">minimum_ngram_length =</span> <span class="dv">2</span>, <span class="at">maximum_ngram_length =</span> <span class="dv">4</span>, <span class="at">return_phrase_vectors =</span> <span class="cn">TRUE</span>, <span class="at">return_tag_sequences =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-132"><a href="#cb53-132" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">1</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-133"><a href="#cb53-133" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">2</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-134"><a href="#cb53-134" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">3</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-135"><a href="#cb53-135" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">4</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-136"><a href="#cb53-136" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">5</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-137"><a href="#cb53-137" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">6</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-138"><a href="#cb53-138" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">7</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-139"><a href="#cb53-139" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">8</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-140"><a href="#cb53-140" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">9</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-141"><a href="#cb53-141" aria-hidden="true" tabindex="-1"></a>phrases[[<span class="dv">10</span>]]<span class="sc">$</span>phrases[<span class="dv">300</span><span class="sc">:</span><span class="dv">320</span>]</span>
<span id="cb53-142"><a href="#cb53-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-143"><a href="#cb53-143" aria-hidden="true" tabindex="-1"></a><span class="co"># save.image("post4_saaradhaa.RData")</span></span>
<span id="cb53-144"><a href="#cb53-144" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-145"><a href="#cb53-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-146"><a href="#cb53-146" aria-hidden="true" tabindex="-1"></a>From the small selection of n-grams above, it seems like some topics that might arise are memories from South Asia, what prompted the move to the US (education, work), travel, experiences in the US, etc.</span>
<span id="cb53-147"><a href="#cb53-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-148"><a href="#cb53-148" aria-hidden="true" tabindex="-1"></a>**How do I preserve sequences of two or four numbers in my tokens? These might reference years in history, which might be important to understand some topics that come up.**</span>
<span id="cb53-149"><a href="#cb53-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-150"><a href="#cb53-150" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reddit: Generating Data</span></span>
<span id="cb53-151"><a href="#cb53-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-152"><a href="#cb53-152" aria-hidden="true" tabindex="-1"></a>The previous time I tried to load the Reddit data, it just didn't work. I'm going to try to leave RStudio alone for a longer time this time around and see if that might do the trick instead. Much of the code below is commented out, since it need not be re-run when rendering.</span>
<span id="cb53-153"><a href="#cb53-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-156"><a href="#cb53-156" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-157"><a href="#cb53-157" aria-hidden="true" tabindex="-1"></a><span class="co"># generate top 1000 posts.</span></span>
<span id="cb53-158"><a href="#cb53-158" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top &lt;- find_thread_urls(subreddit="ABCDesis",period="all",sort_by="top")</span></span>
<span id="cb53-159"><a href="#cb53-159" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top &lt;- content_top[-1,]</span></span>
<span id="cb53-160"><a href="#cb53-160" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top$type &lt;- "top"</span></span>
<span id="cb53-161"><a href="#cb53-161" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(content_top, "content_top.rds")</span></span>
<span id="cb53-162"><a href="#cb53-162" aria-hidden="true" tabindex="-1"></a><span class="co"># content_top &lt;- read_rds("content_top.rds")</span></span>
<span id="cb53-163"><a href="#cb53-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-164"><a href="#cb53-164" aria-hidden="true" tabindex="-1"></a><span class="co"># attempting to generate comments alone first - this took ~ 1hr.</span></span>
<span id="cb53-165"><a href="#cb53-165" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content &lt;- get_thread_content(content$url[1:1000])$comments$comment</span></span>
<span id="cb53-166"><a href="#cb53-166" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(url_content, "url_content.rds")</span></span>
<span id="cb53-167"><a href="#cb53-167" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_top &lt;- read_rds("url_content.rds")</span></span>
<span id="cb53-168"><a href="#cb53-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-169"><a href="#cb53-169" aria-hidden="true" tabindex="-1"></a><span class="co"># i decided to try to get additional info on the comments as well.</span></span>
<span id="cb53-170"><a href="#cb53-170" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_info &lt;- get_thread_content(content$url[1:1000])$comments</span></span>
<span id="cb53-171"><a href="#cb53-171" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(url_content_info, "url_content_info.rds")</span></span>
<span id="cb53-172"><a href="#cb53-172" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_info_top &lt;- read_rds("url_content_info.rds")</span></span>
<span id="cb53-173"><a href="#cb53-173" aria-hidden="true" tabindex="-1"></a><span class="co"># url_content_info_top$type &lt;- "top"</span></span>
<span id="cb53-174"><a href="#cb53-174" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(url_content_info_top, "url_content_info_top.rds")</span></span>
<span id="cb53-175"><a href="#cb53-175" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_top &lt;- read_rds("url_content_info_top.rds")</span></span>
<span id="cb53-176"><a href="#cb53-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-177"><a href="#cb53-177" aria-hidden="true" tabindex="-1"></a><span class="co"># dr. song also wanted me to try generating more than 1000 posts, so i'm gonna try to create tables for 'hot' and 'rising' as well, not just 'top'.</span></span>
<span id="cb53-178"><a href="#cb53-178" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- find_thread_urls(subreddit="ABCDesis",period="all",sort_by="hot")</span></span>
<span id="cb53-179"><a href="#cb53-179" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot$id &lt;- 1:991</span></span>
<span id="cb53-180"><a href="#cb53-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-181"><a href="#cb53-181" aria-hidden="true" tabindex="-1"></a><span class="co"># check duplicates with top posts, then remove them.</span></span>
<span id="cb53-182"><a href="#cb53-182" aria-hidden="true" tabindex="-1"></a><span class="co"># duplicates &lt;- inner_join(content_hot, content_top)</span></span>
<span id="cb53-183"><a href="#cb53-183" aria-hidden="true" tabindex="-1"></a><span class="co"># remove_list &lt;- duplicates$id</span></span>
<span id="cb53-184"><a href="#cb53-184" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- content_hot %&gt;% slice(-c(remove_list))</span></span>
<span id="cb53-185"><a href="#cb53-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-186"><a href="#cb53-186" aria-hidden="true" tabindex="-1"></a><span class="co"># save object.</span></span>
<span id="cb53-187"><a href="#cb53-187" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot$type &lt;- "hot"</span></span>
<span id="cb53-188"><a href="#cb53-188" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(content_hot, "content_hot.rds")</span></span>
<span id="cb53-189"><a href="#cb53-189" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- read_rds("content_hot.rds")</span></span>
<span id="cb53-190"><a href="#cb53-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-191"><a href="#cb53-191" aria-hidden="true" tabindex="-1"></a><span class="co"># generate comments for 'hot' posts.</span></span>
<span id="cb53-192"><a href="#cb53-192" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_hot &lt;- get_thread_content(content_hot$url[1:936])$comments</span></span>
<span id="cb53-193"><a href="#cb53-193" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_hot$type &lt;- "hot" </span></span>
<span id="cb53-194"><a href="#cb53-194" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(comments_hot, "comments_hot.rds")</span></span>
<span id="cb53-195"><a href="#cb53-195" aria-hidden="true" tabindex="-1"></a><span class="co"># comments_hot &lt;- read_rds("comments_hot.rds")</span></span>
<span id="cb53-196"><a href="#cb53-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-197"><a href="#cb53-197" aria-hidden="true" tabindex="-1"></a><span class="co"># ok, i'm not going to add rising' or 'new', because 'rising' only had 24 posts, and 'new' had many duplicates with 'hot'. so i'll just be using 'hot' and 'top' posts.</span></span>
<span id="cb53-198"><a href="#cb53-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-199"><a href="#cb53-199" aria-hidden="true" tabindex="-1"></a><span class="co"># combine 'hot' and 'top' posts into 1 dataframe.</span></span>
<span id="cb53-200"><a href="#cb53-200" aria-hidden="true" tabindex="-1"></a><span class="co"># content_hot &lt;- content_hot[,-8]</span></span>
<span id="cb53-201"><a href="#cb53-201" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts &lt;- rbind(content_hot, content_top)</span></span>
<span id="cb53-202"><a href="#cb53-202" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_posts, "reddit_posts.rds")</span></span>
<span id="cb53-203"><a href="#cb53-203" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts &lt;- read_rds("reddit_posts.rds")</span></span>
<span id="cb53-204"><a href="#cb53-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-205"><a href="#cb53-205" aria-hidden="true" tabindex="-1"></a><span class="co"># combine 'hot' and 'top' comments into 1 dataframe.</span></span>
<span id="cb53-206"><a href="#cb53-206" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments &lt;- rbind(comments_hot, comments_top)</span></span>
<span id="cb53-207"><a href="#cb53-207" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_comments, "reddit_comments.rds")</span></span>
<span id="cb53-208"><a href="#cb53-208" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments &lt;- read_rds("reddit_comments.rds")</span></span>
<span id="cb53-209"><a href="#cb53-209" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-210"><a href="#cb53-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-211"><a href="#cb53-211" aria-hidden="true" tabindex="-1"></a>Ok, this is a quick summary of what I've done above - I generated both the 'top' and 'hot' posts of all time from the subreddit, as well as all the comments on the posts, and some associated information. I then combined them into two dataframes - one with all the posts (*N* = 1,936) and another with all the comments (*N* = 110,967). I'm going to clean up the two dataframes in the following code chunk.</span>
<span id="cb53-212"><a href="#cb53-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-213"><a href="#cb53-213" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reddit: Cleaning Data</span></span>
<span id="cb53-214"><a href="#cb53-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-217"><a href="#cb53-217" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-218"><a href="#cb53-218" aria-hidden="true" tabindex="-1"></a><span class="co"># check dataframe of comments.</span></span>
<span id="cb53-219"><a href="#cb53-219" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(reddit_comments)</span>
<span id="cb53-220"><a href="#cb53-220" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb53-221"><a href="#cb53-221" aria-hidden="true" tabindex="-1"></a><span class="co"># remove 'upvotes' and 'downvotes' as they haves no useful info.</span></span>
<span id="cb53-222"><a href="#cb53-222" aria-hidden="true" tabindex="-1"></a>reddit_comments <span class="ot">&lt;-</span> reddit_comments <span class="sc">%&gt;%</span> <span class="fu">select</span> (<span class="sc">-</span><span class="fu">c</span>(upvotes, downvotes))</span>
<span id="cb53-223"><a href="#cb53-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-224"><a href="#cb53-224" aria-hidden="true" tabindex="-1"></a><span class="co"># remove 'deleted' / 'removed' comments.</span></span>
<span id="cb53-225"><a href="#cb53-225" aria-hidden="true" tabindex="-1"></a>reddit_comments<span class="sc">$</span>comment <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(reddit_comments<span class="sc">$</span>comment, <span class="st">"</span><span class="sc">\\</span><span class="st">[deleted</span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)</span>
<span id="cb53-226"><a href="#cb53-226" aria-hidden="true" tabindex="-1"></a>reddit_comments<span class="sc">$</span>comment <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(reddit_comments<span class="sc">$</span>comment, <span class="st">"</span><span class="sc">\\</span><span class="st">[ Removed by Reddit </span><span class="sc">\\</span><span class="st">]"</span>, <span class="st">""</span>)</span>
<span id="cb53-227"><a href="#cb53-227" aria-hidden="true" tabindex="-1"></a>reddit_comments <span class="ot">&lt;-</span> reddit_comments[<span class="sc">!</span>(reddit_comments<span class="sc">$</span>comment<span class="sc">==</span><span class="st">""</span>), ]</span>
<span id="cb53-228"><a href="#cb53-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-229"><a href="#cb53-229" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vectorized function to remove html elements from comments.</span></span>
<span id="cb53-230"><a href="#cb53-230" aria-hidden="true" tabindex="-1"></a><span class="co"># vectorized_htmldecode &lt;- Vectorize(HTMLdecode)</span></span>
<span id="cb53-231"><a href="#cb53-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-232"><a href="#cb53-232" aria-hidden="true" tabindex="-1"></a><span class="co"># run the function - this is commented out because it took a really long time. </span></span>
<span id="cb53-233"><a href="#cb53-233" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments$comment &lt;- vectorized_htmldecode(reddit_comments$comment)</span></span>
<span id="cb53-234"><a href="#cb53-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-235"><a href="#cb53-235" aria-hidden="true" tabindex="-1"></a><span class="co"># i'm going to save the object so i don't have to re-do this.</span></span>
<span id="cb53-236"><a href="#cb53-236" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_comments, "reddit_comments_final.rds")</span></span>
<span id="cb53-237"><a href="#cb53-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-238"><a href="#cb53-238" aria-hidden="true" tabindex="-1"></a><span class="co"># re-load the object.</span></span>
<span id="cb53-239"><a href="#cb53-239" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_comments_final &lt;- read_rds("reddit_comments_final.rds")</span></span>
<span id="cb53-240"><a href="#cb53-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-241"><a href="#cb53-241" aria-hidden="true" tabindex="-1"></a><span class="co"># ok, now check the dataframe of posts.</span></span>
<span id="cb53-242"><a href="#cb53-242" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(reddit_posts)</span>
<span id="cb53-243"><a href="#cb53-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-244"><a href="#cb53-244" aria-hidden="true" tabindex="-1"></a><span class="co"># remove 'subreddit' column.</span></span>
<span id="cb53-245"><a href="#cb53-245" aria-hidden="true" tabindex="-1"></a>reddit_posts <span class="ot">&lt;-</span> reddit_posts <span class="sc">%&gt;%</span> <span class="fu">select</span> (<span class="sc">-</span><span class="fu">c</span>(subreddit))</span>
<span id="cb53-246"><a href="#cb53-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-247"><a href="#cb53-247" aria-hidden="true" tabindex="-1"></a><span class="co"># remove html elements from 'title' column.</span></span>
<span id="cb53-248"><a href="#cb53-248" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts$title &lt;- vectorized_htmldecode(reddit_posts$title)</span></span>
<span id="cb53-249"><a href="#cb53-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-250"><a href="#cb53-250" aria-hidden="true" tabindex="-1"></a><span class="co"># remove html elements from 'text' column.</span></span>
<span id="cb53-251"><a href="#cb53-251" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts$text &lt;- vectorized_htmldecode(reddit_posts$text)</span></span>
<span id="cb53-252"><a href="#cb53-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-253"><a href="#cb53-253" aria-hidden="true" tabindex="-1"></a><span class="co"># save the finalised posts object.</span></span>
<span id="cb53-254"><a href="#cb53-254" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(reddit_posts, "reddit_posts_final.rds")</span></span>
<span id="cb53-255"><a href="#cb53-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-256"><a href="#cb53-256" aria-hidden="true" tabindex="-1"></a><span class="co"># re-load the object.</span></span>
<span id="cb53-257"><a href="#cb53-257" aria-hidden="true" tabindex="-1"></a><span class="co"># reddit_posts_final &lt;- read_rds("reddit_posts_final.rds")</span></span>
<span id="cb53-258"><a href="#cb53-258" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-259"><a href="#cb53-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-260"><a href="#cb53-260" aria-hidden="true" tabindex="-1"></a><span class="fu">## Reddit: Text Plots</span></span>
<span id="cb53-261"><a href="#cb53-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-264"><a href="#cb53-264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-265"><a href="#cb53-265" aria-hidden="true" tabindex="-1"></a><span class="co"># create 'quanteda' corpus. </span></span>
<span id="cb53-266"><a href="#cb53-266" aria-hidden="true" tabindex="-1"></a>reddit_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(reddit_comments_final<span class="sc">$</span>comment)</span>
<span id="cb53-267"><a href="#cb53-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-268"><a href="#cb53-268" aria-hidden="true" tabindex="-1"></a><span class="co"># use same list of stopwords as oral histories.</span></span>
<span id="cb53-269"><a href="#cb53-269" aria-hidden="true" tabindex="-1"></a>to_keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"do"</span>, <span class="st">"does"</span>, <span class="st">"did"</span>, <span class="st">"would"</span>, <span class="st">"should"</span>, <span class="st">"could"</span>, <span class="st">"ought"</span>, <span class="st">"isn't"</span>, <span class="st">"aren't"</span>, <span class="st">"wasn't"</span>, <span class="st">"weren't"</span>, <span class="st">"hasn't"</span>, <span class="st">"haven't"</span>, <span class="st">"hadn't"</span>, <span class="st">"doesn't"</span>, <span class="st">"don't"</span>, <span class="st">"didn't"</span>, <span class="st">"won't"</span>, <span class="st">"wouldn't"</span>, <span class="st">"shan't"</span>, <span class="st">"shouldn't"</span>, <span class="st">"can't"</span>, <span class="st">"cannot"</span>, <span class="st">"couldn't"</span>, <span class="st">"mustn't"</span>, <span class="st">"because"</span>, <span class="st">"against"</span>, <span class="st">"between"</span>, <span class="st">"into"</span>, <span class="st">"through"</span>, <span class="st">"during"</span>, <span class="st">"before"</span>, <span class="st">"after"</span>, <span class="st">"above"</span>, <span class="st">"below"</span>, <span class="st">"over"</span>, <span class="st">"under"</span>, <span class="st">"no"</span>, <span class="st">"nor"</span>, <span class="st">"not"</span>)</span>
<span id="cb53-270"><a href="#cb53-270" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>)</span>
<span id="cb53-271"><a href="#cb53-271" aria-hidden="true" tabindex="-1"></a>Stopwords <span class="ot">&lt;-</span> Stopwords[<span class="sc">!</span>(Stopwords <span class="sc">%in%</span> to_keep)]</span>
<span id="cb53-272"><a href="#cb53-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-273"><a href="#cb53-273" aria-hidden="true" tabindex="-1"></a><span class="co"># create tokens, remove punctuation, numbers, symbols and stopwords, then convert to lowercase.</span></span>
<span id="cb53-274"><a href="#cb53-274" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(reddit_corpus, <span class="at">remove_punct =</span> T, <span class="at">remove_numbers =</span> T, <span class="at">remove_symbols =</span> T)</span>
<span id="cb53-275"><a href="#cb53-275" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(reddit_tokens, <span class="at">pattern =</span> Stopwords, <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb53-276"><a href="#cb53-276" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(reddit_tokens)</span>
<span id="cb53-277"><a href="#cb53-277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-278"><a href="#cb53-278" aria-hidden="true" tabindex="-1"></a><span class="co"># remove tokens that appear in wordcloud that are not too meaningful.</span></span>
<span id="cb53-279"><a href="#cb53-279" aria-hidden="true" tabindex="-1"></a>reddit_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_remove</span>(reddit_tokens, <span class="fu">c</span>(<span class="st">"m"</span>, <span class="st">"s"</span>, <span class="st">"say"</span>, <span class="st">"see"</span>, <span class="st">"make"</span>, <span class="st">"way"</span>, <span class="st">"well"</span>, <span class="st">"many"</span>, <span class="st">"someone"</span>, <span class="st">"never"</span>, <span class="st">"still"</span>, <span class="st">"now"</span>, <span class="st">"go"</span>, <span class="st">"thing"</span>, <span class="st">"things"</span>, <span class="st">"know"</span>, <span class="st">"think"</span>, <span class="st">"also"</span>, <span class="st">"said"</span>, <span class="st">"going"</span>, <span class="st">"want"</span>, <span class="st">"t"</span>, <span class="st">"one"</span>, <span class="st">"lot"</span>, <span class="st">"much"</span>, <span class="st">"even"</span>, <span class="st">"really"</span>, <span class="st">"sure"</span>, <span class="st">"yeah"</span>, <span class="st">"look"</span>, <span class="st">"always"</span>, <span class="st">"something"</span>, <span class="st">"re"</span>, <span class="st">"actually"</span>, <span class="st">"get"</span>, <span class="st">"got"</span>, <span class="st">"though"</span>, <span class="st">"take"</span>, <span class="st">"etc"</span>, <span class="st">"can"</span>, <span class="st">"like"</span>, <span class="st">"don"</span>, <span class="st">"saying"</span>))</span>
<span id="cb53-280"><a href="#cb53-280" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-281"><a href="#cb53-281" aria-hidden="true" tabindex="-1"></a><span class="co"># get summary of corpus.</span></span>
<span id="cb53-282"><a href="#cb53-282" aria-hidden="true" tabindex="-1"></a>reddit_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(reddit_corpus)</span>
<span id="cb53-283"><a href="#cb53-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-284"><a href="#cb53-284" aria-hidden="true" tabindex="-1"></a><span class="co"># create wordcloud with modified data.</span></span>
<span id="cb53-285"><a href="#cb53-285" aria-hidden="true" tabindex="-1"></a>reddit_dfm <span class="ot">&lt;-</span> reddit_tokens <span class="sc">%&gt;%</span> <span class="fu">dfm</span>() <span class="sc">%&gt;%</span> <span class="fu">dfm_remove</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>))</span>
<span id="cb53-286"><a href="#cb53-286" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_wordcloud</span>(reddit_dfm, <span class="at">max_words =</span> <span class="dv">50</span>, <span class="at">color=</span><span class="st">"purple"</span>)</span>
<span id="cb53-287"><a href="#cb53-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-288"><a href="#cb53-288" aria-hidden="true" tabindex="-1"></a><span class="co"># create fcm.</span></span>
<span id="cb53-289"><a href="#cb53-289" aria-hidden="true" tabindex="-1"></a>reddit_fcm <span class="ot">&lt;-</span> <span class="fu">fcm</span>(reddit_dfm)</span>
<span id="cb53-290"><a href="#cb53-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-291"><a href="#cb53-291" aria-hidden="true" tabindex="-1"></a><span class="co"># keep only top features.</span></span>
<span id="cb53-292"><a href="#cb53-292" aria-hidden="true" tabindex="-1"></a>small_reddit_fcm <span class="ot">&lt;-</span> <span class="fu">fcm_select</span>(reddit_fcm, <span class="at">pattern =</span> <span class="fu">names</span>(<span class="fu">topfeatures</span>(reddit_fcm, <span class="dv">50</span>)), <span class="at">selection =</span> <span class="st">"keep"</span>)</span>
<span id="cb53-293"><a href="#cb53-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-294"><a href="#cb53-294" aria-hidden="true" tabindex="-1"></a><span class="co"># compute weights.</span></span>
<span id="cb53-295"><a href="#cb53-295" aria-hidden="true" tabindex="-1"></a>size <span class="ot">&lt;-</span> <span class="fu">log</span>(<span class="fu">colSums</span>(small_reddit_fcm))</span>
<span id="cb53-296"><a href="#cb53-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-297"><a href="#cb53-297" aria-hidden="true" tabindex="-1"></a><span class="co"># create network.</span></span>
<span id="cb53-298"><a href="#cb53-298" aria-hidden="true" tabindex="-1"></a><span class="fu">textplot_network</span>(small_reddit_fcm, <span class="at">vertex_size =</span> size <span class="sc">/</span> <span class="fu">max</span>(size) <span class="sc">*</span> <span class="dv">4</span>)</span>
<span id="cb53-299"><a href="#cb53-299" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-300"><a href="#cb53-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-301"><a href="#cb53-301" aria-hidden="true" tabindex="-1"></a>The wordcloud and network plot allow me to confirm that this subreddit indeed discusses South Asian culture, hence making it a good comparison with the oral histories data. We can also see that the younger generation has concerns specific to their age group - such as with dating and relationships, a wider range of ethnic and national groups (Asians, Black people, White people, British, etc), racism (which was not in the text plots for the older generation) and even caste concerns. This gives me some idea of how the values and concerns of South Asians have changed over time, which is my first research question.</span>
<span id="cb53-302"><a href="#cb53-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-303"><a href="#cb53-303" aria-hidden="true" tabindex="-1"></a><span class="fu">## Comparing the Two Datasets</span></span>
<span id="cb53-304"><a href="#cb53-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-305"><a href="#cb53-305" aria-hidden="true" tabindex="-1"></a>I will attempt to use str_match() to compare how many times 'culture' appears in the oral histories vs. Reddit data (as a proportion of the total number of tokens).</span>
<span id="cb53-306"><a href="#cb53-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-309"><a href="#cb53-309" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb53-310"><a href="#cb53-310" aria-hidden="true" tabindex="-1"></a><span class="co"># compute proportions for reddit data.</span></span>
<span id="cb53-311"><a href="#cb53-311" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_count</span>(reddit_tokens, <span class="st">"[cC]ultur"</span>))</span>
<span id="cb53-312"><a href="#cb53-312" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">ntoken</span>(reddit_tokens))</span>
<span id="cb53-313"><a href="#cb53-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-314"><a href="#cb53-314" aria-hidden="true" tabindex="-1"></a><span class="co"># compute proportions for oral histories.</span></span>
<span id="cb53-315"><a href="#cb53-315" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">str_count</span>(oh_tokens, <span class="st">"[cC]ultur"</span>))</span>
<span id="cb53-316"><a href="#cb53-316" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">ntoken</span>(oh_tokens))</span>
<span id="cb53-317"><a href="#cb53-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-318"><a href="#cb53-318" aria-hidden="true" tabindex="-1"></a><span class="co"># test proportions.</span></span>
<span id="cb53-319"><a href="#cb53-319" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.test</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">8047</span>, <span class="dv">502</span>), <span class="at">n =</span> <span class="fu">c</span>(<span class="dv">2029966</span>, <span class="dv">206015</span>), <span class="at">p =</span> <span class="cn">NULL</span>, <span class="at">alternative =</span> <span class="st">"two.sided"</span>, <span class="at">correct =</span> <span class="cn">TRUE</span>)</span>
<span id="cb53-320"><a href="#cb53-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-321"><a href="#cb53-321" aria-hidden="true" tabindex="-1"></a><span class="co"># save.image("post4_saaradhaa.RData")</span></span>
<span id="cb53-322"><a href="#cb53-322" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb53-323"><a href="#cb53-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-324"><a href="#cb53-324" aria-hidden="true" tabindex="-1"></a>Interesting - the younger generation referenced culture significantly more than the older generation did.</span>
<span id="cb53-325"><a href="#cb53-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-326"><a href="#cb53-326" aria-hidden="true" tabindex="-1"></a><span class="fu">## Moving Forward</span></span>
<span id="cb53-327"><a href="#cb53-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-328"><a href="#cb53-328" aria-hidden="true" tabindex="-1"></a>This is my tentative plan for the next two posts, which I might revise depending on time constraints.</span>
<span id="cb53-329"><a href="#cb53-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-330"><a href="#cb53-330" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Post 5: try Personal Values Dictionary on oral histories and Reddit data.</span>
<span id="cb53-331"><a href="#cb53-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-332"><a href="#cb53-332" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Post 6: do topic modelling on oral histories and Reddit data.</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>