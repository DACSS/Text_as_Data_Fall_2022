<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrea Mah">
<meta name="dcterms.date" content="2022-11-10">

<title>Text-as-Data Fall 2022 - Blog Post 4: Sentiment analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<meta name="twitter:title" content="Text-as-Data Fall 2022 - Blog Post 4: Sentiment analysis">
<meta name="twitter:description" content="For this blog, I wanted to report on my progress trying out sentiment analysis on my data.">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../images/UMass White Wordmark Horiz.png" alt="">
    <span class="navbar-title">Text-as-Data Fall 2022</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/Text_as_Data_Fall_2022/">Fall 2022</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">Contributors</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss">DACSS</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS/Text_as_Data_Fall_2022"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Blog Post 4: Sentiment analysis</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">BlogPost4</div>
    <div class="quarto-category">Andrea Mah</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andrea Mah </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 10, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">#loading in nececssary libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: quanteda</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Package version: 3.2.3
Unicode version: 13.0
ICU version: 69.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Parallel computing: 8 of 8 threads used.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>See https://quanteda.io for tutorials and examples.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'quanteda.sentiment'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:quanteda':

    data_dictionary_LSD2015</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: usethis</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RCurl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'RCurl'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:tidyr':

    complete</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("kbenoit/quanteda.dictionaries")</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.dictionaries)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github("quanteda/quanteda.sentiment")</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>For this blog, I wanted to report on my progress trying out sentiment analysis on my data. In my project, my corpus is made up of speeches given by world leaders at the UN climate change conferences (COP1 - COP15). First, I prepared the data, and ran sentiment analysis.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#loading in the processed dataset. </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">getURL</span>(<span class="st">'https://raw.githubusercontent.com/andrea-yj-mah/DatafilesTAD/main/FINAL_combined_meta-text_dataset.csv'</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>speechdf <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">text =</span> x)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#convert the data to a corpus</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>speech_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(speechdf)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#run sentiment analysis</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>speech_nrc_sentiment <span class="ot">&lt;-</span> <span class="fu">liwcalike</span>(speech_corpus, data_dictionary_NRC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in nsentence.character(as.character(x)): nsentence() does not correctly
count sentences in all lower-cased text</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#check output</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(speech_nrc_sentiment)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  docname Segment  WPS   WC Sixltr   Dic anger anticipation disgust fear  joy
1   text1       1  597  597  23.45 24.79  0.17         2.18    0.17 2.35 2.68
2   text2       2 2626 2626  34.23 20.11  0.34         2.36    0.30 1.49 1.18
3   text3       3 1141 1141  35.67 22.17  0.44         2.63    0.35 3.07 1.84
4   text4       4  621  621  37.84 19.65  0.81         1.77    0.16 1.61 0.97
5   text5       5  726  726  37.74 26.86  0.83         1.93    0.83 2.20 1.52
6   text6       6 1300 1300  38.00 22.38  0.08         2.00    0.15 2.23 1.31
  negative positive sadness surprise trust AllPunc Period Comma Colon SemiC
1     0.67     8.88    0.50     0.84  6.37    0.00      0     0     0     0
2     1.07     7.04    0.53     0.69  5.10    0.27      0     0     0     0
3     1.49     7.89    0.35     0.79  3.33    0.53      0     0     0     0
4     1.13     9.34    0.48     0.16  3.22    0.32      0     0     0     0
5     1.93    11.16    1.10     0.41  4.96    0.96      0     0     0     0
6     1.08     9.38    0.69     0.31  5.15    0.08      0     0     0     0
  QMark Exclam Dash Quote Apostro Parenth OtherP
1     0      0    0  0.00       0       0   0.00
2     0      0    0  0.27       0       0   0.27
3     0      0    0  0.53       0       0   0.53
4     0      0    0  0.32       0       0   0.32
5     0      0    0  0.96       0       0   0.96
6     0      0    0  0.08       0       0   0.08</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># converting the corpus to dfm using the dictionary</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>speech_nrc <span class="ot">&lt;-</span> <span class="fu">tokens</span>(speech_corpus,</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>                             <span class="at">include_docvars =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">#checking the conversion and outputs</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(speech_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1260   10</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(speech_nrc, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 10 documents, 10 features (0.00% sparse) and 10 docvars.
       features
docs    anger anticipation disgust fear joy negative positive sadness surprise
  text1     1           13       1   14  16        4       53       3        5
  text2     9           62       8   39  31       28      185      14       18
  text3     5           30       4   35  21       17       90       4        9
  text4     5           11       1   10   6        7       58       3        1
  text5     6           14       6   16  11       14       81       8        3
  text6     1           26       2   29  17       14      122       9        4
       features
docs    trust
  text1    38
  text2   134
  text3    38
  text4    20
  text5    36
  text6    67
[ reached max_ndoc ... 4 more documents ]</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(speech_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "dfm"
attr(,"package")
[1] "quanteda"</code></pre>
</div>
</div>
<p>After running the inital sentiment analysis, I had a dfm, but the dfm was missing my metadata, and I couldn’t use the dfm to run calculations that I was interested in. I calculated polarity by document. Next, I converted the dfm to a data frame object and merged it with my metadata.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">#converting the data to a dataframe to be able to perform calculations. </span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>df_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(speech_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate polarity like we learned in class</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_nrc<span class="sc">$</span>positive <span class="sc">-</span> df_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity[(df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co">#now I want to merge it back with the dataframe that has all the metadata</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(speechdf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "X"           "textnum"     "filename"    "year"        "speaker"    
 [6] "File"        "text"        "text_field"  "docid_field" "country"    
[11] "CRI"        </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_nrc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "doc_id"       "anger"        "anticipation" "disgust"      "fear"        
 [6] "joy"          "negative"     "positive"     "sadness"      "surprise"    
[11] "trust"        "polarity"    </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#creating a variable that can help to match data</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>speechdf<span class="sc">$</span>doc_id <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"text"</span>,speechdf<span class="sc">$</span>textnum, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#joining the data</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>df_nrc_meta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(speechdf, df_nrc, <span class="at">by =</span> <span class="st">"doc_id"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Then I just wanted to look at some descriptive information about the results of the sentiment analysis…I noticed that the mean ‘positive’ scores were a lot higher than those for ‘negative.’ I was curious if the difference was significant and ran some t.tests to see. The speeches contained significantly more positive sentiment than negative. Perhaps this isn’t surprising given that the context where speeches are delivered is one of global cooperation, and probably leaders don’t want to project too much negativity?</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_nrc_meta)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       X             textnum         filename              year     
 Min.   :   1.0   Min.   :   1.0   Length:1260        Min.   :1995  
 1st Qu.: 315.8   1st Qu.: 315.8   Class :character   1st Qu.:1998  
 Median : 630.5   Median : 630.5   Mode  :character   Median :2003  
 Mean   : 630.5   Mean   : 630.5                      Mean   :2003  
 3rd Qu.: 945.2   3rd Qu.: 945.2                      3rd Qu.:2007  
 Max.   :1260.0   Max.   :1260.0                      Max.   :2009  
                                                                    
   speaker              File               text            text_field       
 Length:1260        Length:1260        Length:1260        Length:1260       
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
 docid_field          country               CRI            doc_id         
 Length:1260        Length:1260        Min.   :  7.17   Length:1260       
 Class :character   Class :character   1st Qu.: 52.00   Class :character  
 Mode  :character   Mode  :character   Median : 75.17   Mode  :character  
                                       Mean   : 82.58                     
                                       3rd Qu.:111.83                     
                                       Max.   :173.67                     
                                       NA's   :353                        
     anger         anticipation       disgust            fear       
 Min.   : 0.000   Min.   :  0.00   Min.   : 0.000   Min.   :  0.00  
 1st Qu.: 3.000   1st Qu.: 11.00   1st Qu.: 1.000   1st Qu.: 11.00  
 Median : 5.000   Median : 16.00   Median : 3.000   Median : 16.00  
 Mean   : 6.283   Mean   : 18.41   Mean   : 3.757   Mean   : 19.28  
 3rd Qu.: 8.000   3rd Qu.: 23.00   3rd Qu.: 5.000   3rd Qu.: 24.00  
 Max.   :77.000   Max.   :145.00   Max.   :68.000   Max.   :198.00  
                                                                    
      joy            negative         positive         sadness       
 Min.   :  0.00   Min.   :  0.00   Min.   :  1.00   Min.   :  0.000  
 1st Qu.:  7.00   1st Qu.:  8.00   1st Qu.: 42.00   1st Qu.:  3.000  
 Median : 11.00   Median : 14.00   Median : 59.00   Median :  5.000  
 Mean   : 12.89   Mean   : 17.08   Mean   : 67.44   Mean   :  6.834  
 3rd Qu.: 16.00   3rd Qu.: 21.00   3rd Qu.: 81.00   3rd Qu.:  9.000  
 Max.   :148.00   Max.   :247.00   Max.   :491.00   Max.   :128.000  
                                                                     
    surprise          trust           polarity      
 Min.   : 0.000   Min.   :  0.00   Min.   :-0.7500  
 1st Qu.: 2.000   1st Qu.: 26.00   1st Qu.: 0.5067  
 Median : 4.000   Median : 37.00   Median : 0.6195  
 Mean   : 5.207   Mean   : 41.53   Mean   : 0.6044  
 3rd Qu.: 7.000   3rd Qu.: 50.00   3rd Qu.: 0.7193  
 Max.   :50.000   Max.   :368.00   Max.   : 1.0000  
                                                    </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(df_nrc_meta<span class="sc">$</span>positive, df_nrc_meta<span class="sc">$</span>negative, <span class="at">paired =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Paired t-test

data:  df_nrc_meta$positive and df_nrc_meta$negative
t = 54.985, df = 1259, p-value &lt; 2.2e-16
alternative hypothesis: true mean difference is not equal to 0
95 percent confidence interval:
 48.56271 52.15633
sample estimates:
mean difference 
       50.35952 </code></pre>
</div>
</div>
<p>Moving on to some other analyses with my metadata…</p>
<p>For now, I was interested in two meta-data variables and their relationship to sentiment in the text. These are the year the speech was delivered and the climate risk index (CRI) associated with the country of the speaker. The CRI is based on experienced weather-related impacts on regions/countries like heat-waves, flooding, or storms. Countries with higher CRI are objectively more impacted by climate change. My prediction was that countries with higher CRI may feel more urgency about addressing climate change, and perhaps speeches delivered by members of these countries would contain more negative sentiments, fear, or anger…</p>
<p>Regarding the year speeches were delivered, my thought was that while speeches from the beginning of these conferences would contain more positive sentiments, but that perhaps these decreased over time as climate change impacts became more frequent/severe, and as progress continued to be slow.</p>
<p>For each of these variables, I looked first at correlations and then regressions for any of the observed sigificant correlations. I looked at their relationship to polarity, and then to each of the emotions.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#first, is polarity of speeches associated with year? </span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>year, df_nrc_meta<span class="sc">$</span>polarity, <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and df_nrc_meta$polarity
t = -2.1297, df = 1258, p-value = 0.03339
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.114782383 -0.004727295
sample estimates:
        cor 
-0.05993698 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#second, was polarity of speeches associated with CRI? </span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>CRI, df_nrc_meta<span class="sc">$</span>polarity, <span class="at">method =</span> <span class="st">"pearson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and df_nrc_meta$polarity
t = -1.9996, df = 905, p-value = 0.04584
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.13085287 -0.00123261
sample estimates:
        cor 
-0.06632254 </code></pre>
</div>
</div>
<p>Both CRI and year were significantly and negatively correlated with polarity.</p>
<p>For year<em>polarity: From the beginning of COP conferences –&gt; COP 15, later speeches tended to be more negative For CRI</em>polarity: Countries who experienced more impacts from climate change tended to give more negative speeches.</p>
<p>Next, I was interested in looking at other emotions. First, I looked at correlations.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>cor.emo.year <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>year, b, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>fear)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = 2.6565, df = 1258, p-value = 0.007995
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.01954463 0.12938102
sample estimates:
       cor 
0.07468935 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>negative)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = 0.16257, df = 1258, p-value = 0.8709
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.05065474  0.05979362
sample estimates:
        cor 
0.004583416 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>positive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = -1.843, df = 1258, p-value = 0.06557
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.106810215  0.003343952
sample estimates:
        cor 
-0.05189097 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>anger)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = 2.0953, df = 1258, p-value = 0.03634
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.003760639 0.113828340
sample estimates:
       cor 
0.05897373 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>disgust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = 0.41644, df = 1258, p-value = 0.6772
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.04351311  0.06692238
sample estimates:
       cor 
0.01174043 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>surprise)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = 1.0788, df = 1258, p-value = 0.2809
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.02486488  0.08548402
sample estimates:
       cor 
0.03040221 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>trust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = -2.082, df = 1258, p-value = 0.03754
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.113458116 -0.003385576
sample estimates:
        cor 
-0.05859995 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>anticipation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = -0.10984, df = 1258, p-value = 0.9126
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.05831224  0.05213738
sample estimates:
         cor 
-0.003096873 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>sadness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = -0.67498, df = 1258, p-value = 0.4998
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.07417443  0.03623637
sample estimates:
        cor 
-0.01902704 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>joy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$year and b
t = 0.50707, df = 1258, p-value = 0.6122
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.04096266  0.06946551
sample estimates:
       cor 
0.01429501 </code></pre>
</div>
</div>
<p>Only fear, anger and trust sentiment had significant results. Increased year was associated with increased fear/anger. Increased year was associated with lower trust..</p>
<p>Then, I wanted to regress year on these emotions and polarity, just to see how much variance was explained by time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>reg.emo <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a> emomodel <span class="ot">&lt;-</span> <span class="fu">lm</span>(b <span class="sc">~</span> year, <span class="at">data =</span> df_nrc_meta)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a> emoplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df_nrc_meta, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> b)) <span class="sc">+</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">formula =</span> y <span class="sc">~</span> x)</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>(<span class="fu">summary</span>(emomodel))</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a> emoplot</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ year, data = df_nrc_meta)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.33986 -0.09879  0.01559  0.11537  0.40787 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept)  5.154781   2.136663   2.413   0.0160 *
year        -0.002272   0.001067  -2.130   0.0334 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1722 on 1258 degrees of freedom
Multiple R-squared:  0.003592,  Adjusted R-squared:  0.0028 
F-statistic: 4.536 on 1 and 1258 DF,  p-value: 0.03339</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>fear)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ year, data = df_nrc_meta)

Residuals:
    Min      1Q  Median      3Q     Max 
-20.557  -8.419  -2.869   5.056 178.394 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)   
(Intercept) -456.40293  179.06208  -2.549  0.01093 * 
year           0.23753    0.08941   2.657  0.00799 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 14.43 on 1258 degrees of freedom
Multiple R-squared:  0.005578,  Adjusted R-squared:  0.004788 
F-statistic: 7.057 on 1 and 1258 DF,  p-value: 0.007995</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>anger)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ year, data = df_nrc_meta)

Residuals:
   Min     1Q Median     3Q    Max 
-6.788 -3.709 -1.630  2.163 70.846 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept) -152.52334   75.79006  -2.012   0.0444 *
year           0.07930    0.03785   2.095   0.0363 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 6.108 on 1258 degrees of freedom
Multiple R-squared:  0.003478,  Adjusted R-squared:  0.002686 
F-statistic:  4.39 on 1 and 1258 DF,  p-value: 0.03634</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-7-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>trust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ year, data = df_nrc_meta)

Residuals:
   Min     1Q Median     3Q    Max 
-44.08 -15.41  -5.07   7.93 326.93 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)  
(Intercept) 711.1900   321.6387   2.211   0.0272 *
year         -0.3344     0.1606  -2.082   0.0375 *
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 25.92 on 1258 degrees of freedom
Multiple R-squared:  0.003434,  Adjusted R-squared:  0.002642 
F-statistic: 4.335 on 1 and 1258 DF,  p-value: 0.03754</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-7-4.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The relationships certainly look small, even if they were significant. For each dependent variable, year explained less than 1% of the variance.</p>
<p>Next, I followed the same procedure examining climate risk in relation to outcomes</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>cor.emo.cri <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>CRI, b, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>anger)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -1.057, df = 905, p-value = 0.2908
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.09998097  0.03004969
sample estimates:
        cor 
-0.03511425 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>anticipation)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -1.0676, df = 905, p-value = 0.286
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.10033077  0.02969666
sample estimates:
        cor 
-0.03546715 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>sadness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -1.6627, df = 905, p-value = 0.09672
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.119850415  0.009945277
sample estimates:
       cor 
-0.0551857 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>disgust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -1.3299, df = 905, p-value = 0.1839
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.10894555  0.02099211
sample estimates:
        cor 
-0.04416349 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>trust)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -1.5948, df = 905, p-value = 0.1111
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.11762957  0.01219761
sample estimates:
        cor 
-0.05293968 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>surprise)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -0.51025, df = 905, p-value = 0.61
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.08196365  0.04818957
sample estimates:
        cor 
-0.01695888 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>joy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -1.687, df = 905, p-value = 0.09194
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.120645871  0.009138223
sample estimates:
        cor 
-0.05599034 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>fear) <span class="co">#weirdly, higher CRI associated with less fearful? </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -2.1889, df = 905, p-value = 0.02886
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.13701662 -0.00750883
sample estimates:
        cor 
-0.07256861 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>negative) <span class="co">#significant, negative relationship...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -0.53941, df = 905, p-value = 0.5897
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.08292628  0.04722256
sample estimates:
       cor 
-0.0179278 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>positive) <span class="co"># significant, negative relationship...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  df_nrc_meta$CRI and b
t = -1.9938, df = 905, p-value = 0.04647
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.130664183 -0.001040645
sample estimates:
        cor 
-0.06613142 </code></pre>
</div>
</div>
<p>Besides polarity, CRI was also significantly associated with sentiments of fear, positivity, and negativity. These relationships were not in the direction I expected. Higher CRI was associated with… -less fear -less negative sentiment -less positive sentiment</p>
<p>Next I looked at regressions for these.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">#now, regressions. </span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>reg.emo.cri <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  emomodel <span class="ot">&lt;-</span> <span class="fu">lm</span>(b <span class="sc">~</span> CRI, <span class="at">data =</span> df_nrc_meta)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  emoplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df_nrc_meta, <span class="fu">aes</span>(<span class="at">x =</span> CRI, <span class="at">y =</span> b)) <span class="sc">+</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">formula =</span> y <span class="sc">~</span> x)</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">summary</span>(emomodel))</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>  emoplot</span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>fear)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ CRI, data = df_nrc_meta)

Residuals:
    Min      1Q  Median      3Q     Max 
-20.303  -7.940  -2.736   4.654  97.573 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 20.94813    0.97909  21.396   &lt;2e-16 ***
CRI         -0.02331    0.01065  -2.189   0.0289 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 12.96 on 905 degrees of freedom
  (353 observations deleted due to missingness)
Multiple R-squared:  0.005266,  Adjusted R-squared:  0.004167 
F-statistic: 4.791 on 1 and 905 DF,  p-value: 0.02886</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 353 rows containing non-finite values (stat_smooth).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 353 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>negative)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ CRI, data = df_nrc_meta)

Residuals:
    Min      1Q  Median      3Q     Max 
-17.595  -8.321  -2.952   4.631 133.876 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 17.75657    0.99718  17.807   &lt;2e-16 ***
CRI         -0.00585    0.01085  -0.539     0.59    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 13.2 on 905 degrees of freedom
  (353 observations deleted due to missingness)
Multiple R-squared:  0.0003214, Adjusted R-squared:  -0.0007832 
F-statistic: 0.291 on 1 and 905 DF,  p-value: 0.5897</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 353 rows containing non-finite values (stat_smooth).
Removed 353 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>positive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ CRI, data = df_nrc_meta)

Residuals:
   Min     1Q Median     3Q    Max 
-65.98 -23.60  -6.73  13.84 356.67 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 70.95827    2.88129  24.627   &lt;2e-16 ***
CRI         -0.06248    0.03134  -1.994   0.0465 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 38.14 on 905 degrees of freedom
  (353 observations deleted due to missingness)
Multiple R-squared:  0.004373,  Adjusted R-squared:  0.003273 
F-statistic: 3.975 on 1 and 905 DF,  p-value: 0.04647</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 353 rows containing non-finite values (stat_smooth).
Removed 353 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-9-3.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>polarity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = b ~ CRI, data = df_nrc_meta)

Residuals:
     Min       1Q   Median       3Q      Max 
-1.32361 -0.10122  0.01771  0.11136  0.41906 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.6182749  0.0128103   48.26   &lt;2e-16 ***
CRI         -0.0002786  0.0001393   -2.00   0.0458 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1696 on 905 degrees of freedom
  (353 observations deleted due to missingness)
Multiple R-squared:  0.004399,  Adjusted R-squared:  0.003299 
F-statistic: 3.998 on 1 and 905 DF,  p-value: 0.04584</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 353 rows containing non-finite values (stat_smooth).
Removed 353 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="AndreaMah_Blog4_files/figure-html/unnamed-chunk-9-4.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Again, the relationships though significant were very small, with tiny effect sizes. I will think more about whether or not sentiment analysis is useful to me in this context…I also only looked at results from using one dictionary. In the future, I might see how/whether using different dictionaries might impact my results.</p>
<p>For the next step in my project, I am interested in testing out some unsupervised methods. Topic modeling might help me to identify interesting things.</p>


<!-- -->


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/Text_as_Data_Fall_2022" data-repo-id="R_kgDOH5675w" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb102" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Blog Post 4: Sentiment analysis"</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Andrea Mah"</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="an">desription:</span><span class="co"> "Continued data exploration and analysis"</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "11/10/2022"</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - BlogPost4</span></span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a><span class="co">  - Andrea Mah</span></span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb102-17"><a href="#cb102-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-20"><a href="#cb102-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-21"><a href="#cb102-21" aria-hidden="true" tabindex="-1"></a><span class="co">#loading in nececssary libraries</span></span>
<span id="cb102-22"><a href="#cb102-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span>
<span id="cb102-23"><a href="#cb102-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb102-24"><a href="#cb102-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb102-25"><a href="#cb102-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb102-26"><a href="#cb102-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb102-27"><a href="#cb102-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb102-28"><a href="#cb102-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RCurl)</span>
<span id="cb102-29"><a href="#cb102-29" aria-hidden="true" tabindex="-1"></a><span class="co">#devtools::install_github("kbenoit/quanteda.dictionaries")</span></span>
<span id="cb102-30"><a href="#cb102-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.dictionaries)</span>
<span id="cb102-31"><a href="#cb102-31" aria-hidden="true" tabindex="-1"></a><span class="co">#remotes::install_github("quanteda/quanteda.sentiment")</span></span>
<span id="cb102-32"><a href="#cb102-32" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda.sentiment)</span>
<span id="cb102-33"><a href="#cb102-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-34"><a href="#cb102-34" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-35"><a href="#cb102-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-36"><a href="#cb102-36" aria-hidden="true" tabindex="-1"></a>For this blog, I wanted to report on my progress trying out sentiment analysis on my data. In my project, my corpus is made up of speeches given by world leaders at the UN climate change conferences (COP1 - COP15). First, I prepared the data, and ran sentiment analysis. </span>
<span id="cb102-37"><a href="#cb102-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-40"><a href="#cb102-40" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-41"><a href="#cb102-41" aria-hidden="true" tabindex="-1"></a><span class="co">#loading in the processed dataset. </span></span>
<span id="cb102-42"><a href="#cb102-42" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">getURL</span>(<span class="st">'https://raw.githubusercontent.com/andrea-yj-mah/DatafilesTAD/main/FINAL_combined_meta-text_dataset.csv'</span>)</span>
<span id="cb102-43"><a href="#cb102-43" aria-hidden="true" tabindex="-1"></a>speechdf <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">text =</span> x)</span>
<span id="cb102-44"><a href="#cb102-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-45"><a href="#cb102-45" aria-hidden="true" tabindex="-1"></a><span class="co">#convert the data to a corpus</span></span>
<span id="cb102-46"><a href="#cb102-46" aria-hidden="true" tabindex="-1"></a>speech_corpus <span class="ot">&lt;-</span> <span class="fu">corpus</span>(speechdf)</span>
<span id="cb102-47"><a href="#cb102-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-48"><a href="#cb102-48" aria-hidden="true" tabindex="-1"></a><span class="co">#run sentiment analysis</span></span>
<span id="cb102-49"><a href="#cb102-49" aria-hidden="true" tabindex="-1"></a>speech_nrc_sentiment <span class="ot">&lt;-</span> <span class="fu">liwcalike</span>(speech_corpus, data_dictionary_NRC)</span>
<span id="cb102-50"><a href="#cb102-50" aria-hidden="true" tabindex="-1"></a><span class="co">#check output</span></span>
<span id="cb102-51"><a href="#cb102-51" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(speech_nrc_sentiment)</span>
<span id="cb102-52"><a href="#cb102-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-53"><a href="#cb102-53" aria-hidden="true" tabindex="-1"></a><span class="co"># converting the corpus to dfm using the dictionary</span></span>
<span id="cb102-54"><a href="#cb102-54" aria-hidden="true" tabindex="-1"></a>speech_nrc <span class="ot">&lt;-</span> <span class="fu">tokens</span>(speech_corpus,</span>
<span id="cb102-55"><a href="#cb102-55" aria-hidden="true" tabindex="-1"></a>                             <span class="at">include_docvars =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-56"><a href="#cb102-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm</span>() <span class="sc">%&gt;%</span></span>
<span id="cb102-57"><a href="#cb102-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dfm_lookup</span>(data_dictionary_NRC)</span>
<span id="cb102-58"><a href="#cb102-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-59"><a href="#cb102-59" aria-hidden="true" tabindex="-1"></a><span class="co">#checking the conversion and outputs</span></span>
<span id="cb102-60"><a href="#cb102-60" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(speech_nrc)</span>
<span id="cb102-61"><a href="#cb102-61" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(speech_nrc, <span class="dv">10</span>)</span>
<span id="cb102-62"><a href="#cb102-62" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(speech_nrc)</span>
<span id="cb102-63"><a href="#cb102-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-64"><a href="#cb102-64" aria-hidden="true" tabindex="-1"></a>After running the inital sentiment analysis, I had a dfm, but the dfm was missing my metadata, and I couldn't use the dfm to run calculations that I was interested in. I calculated polarity by document. Next, I converted the dfm to a data frame object and merged it with my metadata.</span>
<span id="cb102-65"><a href="#cb102-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-68"><a href="#cb102-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-69"><a href="#cb102-69" aria-hidden="true" tabindex="-1"></a><span class="co">#converting the data to a dataframe to be able to perform calculations. </span></span>
<span id="cb102-70"><a href="#cb102-70" aria-hidden="true" tabindex="-1"></a>df_nrc <span class="ot">&lt;-</span> <span class="fu">convert</span>(speech_nrc, <span class="at">to =</span> <span class="st">"data.frame"</span>)</span>
<span id="cb102-71"><a href="#cb102-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-72"><a href="#cb102-72" aria-hidden="true" tabindex="-1"></a><span class="co">#calculate polarity like we learned in class</span></span>
<span id="cb102-73"><a href="#cb102-73" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity <span class="ot">&lt;-</span> (df_nrc<span class="sc">$</span>positive <span class="sc">-</span> df_nrc<span class="sc">$</span>negative)<span class="sc">/</span>(df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative)</span>
<span id="cb102-74"><a href="#cb102-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-75"><a href="#cb102-75" aria-hidden="true" tabindex="-1"></a>df_nrc<span class="sc">$</span>polarity[(df_nrc<span class="sc">$</span>positive <span class="sc">+</span> df_nrc<span class="sc">$</span>negative) <span class="sc">==</span> <span class="dv">0</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb102-76"><a href="#cb102-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-77"><a href="#cb102-77" aria-hidden="true" tabindex="-1"></a><span class="co">#now I want to merge it back with the dataframe that has all the metadata</span></span>
<span id="cb102-78"><a href="#cb102-78" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(speechdf)</span>
<span id="cb102-79"><a href="#cb102-79" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df_nrc)</span>
<span id="cb102-80"><a href="#cb102-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-81"><a href="#cb102-81" aria-hidden="true" tabindex="-1"></a><span class="co">#creating a variable that can help to match data</span></span>
<span id="cb102-82"><a href="#cb102-82" aria-hidden="true" tabindex="-1"></a>speechdf<span class="sc">$</span>doc_id <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"text"</span>,speechdf<span class="sc">$</span>textnum, <span class="at">sep =</span> <span class="st">""</span>)</span>
<span id="cb102-83"><a href="#cb102-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-84"><a href="#cb102-84" aria-hidden="true" tabindex="-1"></a><span class="co">#joining the data</span></span>
<span id="cb102-85"><a href="#cb102-85" aria-hidden="true" tabindex="-1"></a>df_nrc_meta <span class="ot">&lt;-</span> <span class="fu">left_join</span>(speechdf, df_nrc, <span class="at">by =</span> <span class="st">"doc_id"</span>)</span>
<span id="cb102-86"><a href="#cb102-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-87"><a href="#cb102-87" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-88"><a href="#cb102-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-89"><a href="#cb102-89" aria-hidden="true" tabindex="-1"></a>Then I just wanted to look at some descriptive information about the results of the sentiment analysis...I noticed that the mean 'positive' scores were</span>
<span id="cb102-90"><a href="#cb102-90" aria-hidden="true" tabindex="-1"></a>a lot higher than those for 'negative.' I was curious if the difference was significant and ran some t.tests to see. The speeches contained significantly more </span>
<span id="cb102-91"><a href="#cb102-91" aria-hidden="true" tabindex="-1"></a>positive sentiment than negative. Perhaps this isn't surprising given that the context where speeches are delivered is one of global cooperation, and probably</span>
<span id="cb102-92"><a href="#cb102-92" aria-hidden="true" tabindex="-1"></a>leaders don't want to project too much negativity? </span>
<span id="cb102-93"><a href="#cb102-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-96"><a href="#cb102-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-97"><a href="#cb102-97" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df_nrc_meta)</span>
<span id="cb102-98"><a href="#cb102-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-99"><a href="#cb102-99" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(df_nrc_meta<span class="sc">$</span>positive, df_nrc_meta<span class="sc">$</span>negative, <span class="at">paired =</span> <span class="cn">TRUE</span>)</span>
<span id="cb102-100"><a href="#cb102-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-101"><a href="#cb102-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-102"><a href="#cb102-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-103"><a href="#cb102-103" aria-hidden="true" tabindex="-1"></a>Moving on to some other analyses with my metadata...</span>
<span id="cb102-104"><a href="#cb102-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-105"><a href="#cb102-105" aria-hidden="true" tabindex="-1"></a>For now, I was interested in two meta-data variables and their relationship to</span>
<span id="cb102-106"><a href="#cb102-106" aria-hidden="true" tabindex="-1"></a>sentiment in the text. These are the year the speech was delivered and the</span>
<span id="cb102-107"><a href="#cb102-107" aria-hidden="true" tabindex="-1"></a>climate risk index (CRI) associated with the country of the speaker. </span>
<span id="cb102-108"><a href="#cb102-108" aria-hidden="true" tabindex="-1"></a>The CRI is based on experienced weather-related impacts</span>
<span id="cb102-109"><a href="#cb102-109" aria-hidden="true" tabindex="-1"></a>on regions/countries like heat-waves, flooding, or storms. Countries with higher CRI</span>
<span id="cb102-110"><a href="#cb102-110" aria-hidden="true" tabindex="-1"></a>are objectively more impacted by climate change. My prediction was that countries with</span>
<span id="cb102-111"><a href="#cb102-111" aria-hidden="true" tabindex="-1"></a>higher CRI may feel more urgency about addressing climate change, and perhaps</span>
<span id="cb102-112"><a href="#cb102-112" aria-hidden="true" tabindex="-1"></a>speeches delivered by members of these countries would contain more negative sentiments,</span>
<span id="cb102-113"><a href="#cb102-113" aria-hidden="true" tabindex="-1"></a>fear, or anger... </span>
<span id="cb102-114"><a href="#cb102-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-115"><a href="#cb102-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-116"><a href="#cb102-116" aria-hidden="true" tabindex="-1"></a>Regarding the year speeches were delivered, my thought was that while speeches from the beginning of</span>
<span id="cb102-117"><a href="#cb102-117" aria-hidden="true" tabindex="-1"></a>these conferences would contain more positive sentiments, but that perhaps these decreased</span>
<span id="cb102-118"><a href="#cb102-118" aria-hidden="true" tabindex="-1"></a>over time as climate change impacts became more frequent/severe, and as progress continued to be</span>
<span id="cb102-119"><a href="#cb102-119" aria-hidden="true" tabindex="-1"></a>slow.</span>
<span id="cb102-120"><a href="#cb102-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-121"><a href="#cb102-121" aria-hidden="true" tabindex="-1"></a>For each of these variables, I looked first at correlations and then regressions for</span>
<span id="cb102-122"><a href="#cb102-122" aria-hidden="true" tabindex="-1"></a>any of the observed sigificant correlations. I looked at their relationship to polarity, and</span>
<span id="cb102-123"><a href="#cb102-123" aria-hidden="true" tabindex="-1"></a>then to each of the emotions. </span>
<span id="cb102-124"><a href="#cb102-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-127"><a href="#cb102-127" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-128"><a href="#cb102-128" aria-hidden="true" tabindex="-1"></a><span class="co">#first, is polarity of speeches associated with year? </span></span>
<span id="cb102-129"><a href="#cb102-129" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>year, df_nrc_meta<span class="sc">$</span>polarity, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb102-130"><a href="#cb102-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-131"><a href="#cb102-131" aria-hidden="true" tabindex="-1"></a><span class="co">#second, was polarity of speeches associated with CRI? </span></span>
<span id="cb102-132"><a href="#cb102-132" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>CRI, df_nrc_meta<span class="sc">$</span>polarity, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb102-133"><a href="#cb102-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-134"><a href="#cb102-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-135"><a href="#cb102-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-136"><a href="#cb102-136" aria-hidden="true" tabindex="-1"></a>Both CRI and year were significantly and negatively correlated with polarity.</span>
<span id="cb102-137"><a href="#cb102-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-138"><a href="#cb102-138" aria-hidden="true" tabindex="-1"></a>For year*polarity: From the beginning of COP conferences --&gt; COP 15, later speeches tended to be more negative</span>
<span id="cb102-139"><a href="#cb102-139" aria-hidden="true" tabindex="-1"></a>For CRI*polarity: Countries who experienced more impacts from climate change tended to give more negative speeches. </span>
<span id="cb102-140"><a href="#cb102-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-141"><a href="#cb102-141" aria-hidden="true" tabindex="-1"></a>Next, I was interested in looking at other emotions. First, I looked at correlations. </span>
<span id="cb102-142"><a href="#cb102-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-145"><a href="#cb102-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-146"><a href="#cb102-146" aria-hidden="true" tabindex="-1"></a>cor.emo.year <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb102-147"><a href="#cb102-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>year, b, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb102-148"><a href="#cb102-148" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-149"><a href="#cb102-149" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>fear)</span>
<span id="cb102-150"><a href="#cb102-150" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>negative)</span>
<span id="cb102-151"><a href="#cb102-151" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>positive)</span>
<span id="cb102-152"><a href="#cb102-152" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>anger)</span>
<span id="cb102-153"><a href="#cb102-153" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>disgust)</span>
<span id="cb102-154"><a href="#cb102-154" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>surprise)</span>
<span id="cb102-155"><a href="#cb102-155" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>trust)</span>
<span id="cb102-156"><a href="#cb102-156" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>anticipation)</span>
<span id="cb102-157"><a href="#cb102-157" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>sadness)</span>
<span id="cb102-158"><a href="#cb102-158" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.year</span>(df_nrc_meta<span class="sc">$</span>joy)</span>
<span id="cb102-159"><a href="#cb102-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-160"><a href="#cb102-160" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-161"><a href="#cb102-161" aria-hidden="true" tabindex="-1"></a>Only fear, anger and trust sentiment had significant results. </span>
<span id="cb102-162"><a href="#cb102-162" aria-hidden="true" tabindex="-1"></a>Increased year was associated with increased fear/anger. </span>
<span id="cb102-163"><a href="#cb102-163" aria-hidden="true" tabindex="-1"></a>Increased year was associated with lower trust..</span>
<span id="cb102-164"><a href="#cb102-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-165"><a href="#cb102-165" aria-hidden="true" tabindex="-1"></a>Then, I wanted to regress year on these emotions and polarity, just to see how much variance was explained by time.</span>
<span id="cb102-166"><a href="#cb102-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-169"><a href="#cb102-169" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-170"><a href="#cb102-170" aria-hidden="true" tabindex="-1"></a>reg.emo <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb102-171"><a href="#cb102-171" aria-hidden="true" tabindex="-1"></a> emomodel <span class="ot">&lt;-</span> <span class="fu">lm</span>(b <span class="sc">~</span> year, <span class="at">data =</span> df_nrc_meta)</span>
<span id="cb102-172"><a href="#cb102-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-173"><a href="#cb102-173" aria-hidden="true" tabindex="-1"></a> emoplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df_nrc_meta, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> b)) <span class="sc">+</span></span>
<span id="cb102-174"><a href="#cb102-174" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb102-175"><a href="#cb102-175" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">formula =</span> y <span class="sc">~</span> x)</span>
<span id="cb102-176"><a href="#cb102-176" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb102-177"><a href="#cb102-177" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>(<span class="fu">summary</span>(emomodel))</span>
<span id="cb102-178"><a href="#cb102-178" aria-hidden="true" tabindex="-1"></a> emoplot</span>
<span id="cb102-179"><a href="#cb102-179" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb102-180"><a href="#cb102-180" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-181"><a href="#cb102-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-182"><a href="#cb102-182" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>polarity)</span>
<span id="cb102-183"><a href="#cb102-183" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>fear)</span>
<span id="cb102-184"><a href="#cb102-184" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>anger)</span>
<span id="cb102-185"><a href="#cb102-185" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo</span>(df_nrc_meta<span class="sc">$</span>trust)</span>
<span id="cb102-186"><a href="#cb102-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-187"><a href="#cb102-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-188"><a href="#cb102-188" aria-hidden="true" tabindex="-1"></a>The relationships certainly look small, even if they were significant. For each dependent variable, year explained less than 1% of the variance. </span>
<span id="cb102-189"><a href="#cb102-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-190"><a href="#cb102-190" aria-hidden="true" tabindex="-1"></a>Next, I followed the same procedure examining climate risk in relation to outcomes</span>
<span id="cb102-191"><a href="#cb102-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-194"><a href="#cb102-194" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-195"><a href="#cb102-195" aria-hidden="true" tabindex="-1"></a>cor.emo.cri <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb102-196"><a href="#cb102-196" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cor.test</span>(df_nrc_meta<span class="sc">$</span>CRI, b, <span class="at">method =</span> <span class="st">"pearson"</span>)</span>
<span id="cb102-197"><a href="#cb102-197" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-198"><a href="#cb102-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-199"><a href="#cb102-199" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>anger)</span>
<span id="cb102-200"><a href="#cb102-200" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>anticipation)</span>
<span id="cb102-201"><a href="#cb102-201" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>sadness)</span>
<span id="cb102-202"><a href="#cb102-202" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>disgust)</span>
<span id="cb102-203"><a href="#cb102-203" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>trust)</span>
<span id="cb102-204"><a href="#cb102-204" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>surprise)</span>
<span id="cb102-205"><a href="#cb102-205" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>joy)</span>
<span id="cb102-206"><a href="#cb102-206" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>fear) <span class="co">#weirdly, higher CRI associated with less fearful? </span></span>
<span id="cb102-207"><a href="#cb102-207" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>negative) <span class="co">#significant, negative relationship...</span></span>
<span id="cb102-208"><a href="#cb102-208" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.emo.cri</span>(df_nrc_meta<span class="sc">$</span>positive) <span class="co"># significant, negative relationship...</span></span>
<span id="cb102-209"><a href="#cb102-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-210"><a href="#cb102-210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-211"><a href="#cb102-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-212"><a href="#cb102-212" aria-hidden="true" tabindex="-1"></a>Besides polarity, CRI was also significantly associated with sentiments of fear, positivity, and negativity. </span>
<span id="cb102-213"><a href="#cb102-213" aria-hidden="true" tabindex="-1"></a>These relationships were not in the direction I expected. Higher CRI was associated with...</span>
<span id="cb102-214"><a href="#cb102-214" aria-hidden="true" tabindex="-1"></a>-less fear</span>
<span id="cb102-215"><a href="#cb102-215" aria-hidden="true" tabindex="-1"></a>-less negative sentiment</span>
<span id="cb102-216"><a href="#cb102-216" aria-hidden="true" tabindex="-1"></a>-less positive sentiment</span>
<span id="cb102-217"><a href="#cb102-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-218"><a href="#cb102-218" aria-hidden="true" tabindex="-1"></a>Next I looked at regressions for these.</span>
<span id="cb102-219"><a href="#cb102-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-222"><a href="#cb102-222" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb102-223"><a href="#cb102-223" aria-hidden="true" tabindex="-1"></a><span class="co">#now, regressions. </span></span>
<span id="cb102-224"><a href="#cb102-224" aria-hidden="true" tabindex="-1"></a>reg.emo.cri <span class="ot">&lt;-</span> <span class="cf">function</span>(b){</span>
<span id="cb102-225"><a href="#cb102-225" aria-hidden="true" tabindex="-1"></a>  emomodel <span class="ot">&lt;-</span> <span class="fu">lm</span>(b <span class="sc">~</span> CRI, <span class="at">data =</span> df_nrc_meta)</span>
<span id="cb102-226"><a href="#cb102-226" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-227"><a href="#cb102-227" aria-hidden="true" tabindex="-1"></a>  emoplot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> df_nrc_meta, <span class="fu">aes</span>(<span class="at">x =</span> CRI, <span class="at">y =</span> b)) <span class="sc">+</span></span>
<span id="cb102-228"><a href="#cb102-228" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb102-229"><a href="#cb102-229" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">formula =</span> y <span class="sc">~</span> x)</span>
<span id="cb102-230"><a href="#cb102-230" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-231"><a href="#cb102-231" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">summary</span>(emomodel))</span>
<span id="cb102-232"><a href="#cb102-232" aria-hidden="true" tabindex="-1"></a>  emoplot</span>
<span id="cb102-233"><a href="#cb102-233" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb102-234"><a href="#cb102-234" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-235"><a href="#cb102-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-236"><a href="#cb102-236" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>fear)</span>
<span id="cb102-237"><a href="#cb102-237" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>negative)</span>
<span id="cb102-238"><a href="#cb102-238" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>positive)</span>
<span id="cb102-239"><a href="#cb102-239" aria-hidden="true" tabindex="-1"></a><span class="fu">reg.emo.cri</span>(df_nrc_meta<span class="sc">$</span>polarity)</span>
<span id="cb102-240"><a href="#cb102-240" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb102-241"><a href="#cb102-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-242"><a href="#cb102-242" aria-hidden="true" tabindex="-1"></a>Again, the relationships though significant were very small, with tiny effect sizes. I will think more about</span>
<span id="cb102-243"><a href="#cb102-243" aria-hidden="true" tabindex="-1"></a>whether or not sentiment analysis is useful to me in this context...I also only looked at results from using one dictionary. </span>
<span id="cb102-244"><a href="#cb102-244" aria-hidden="true" tabindex="-1"></a>In the future, I might see how/whether using different dictionaries might impact my results.</span>
<span id="cb102-245"><a href="#cb102-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-246"><a href="#cb102-246" aria-hidden="true" tabindex="-1"></a>For the next step in my project, I am interested in testing out some unsupervised methods. Topic modeling might help me to identify interesting things. </span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>