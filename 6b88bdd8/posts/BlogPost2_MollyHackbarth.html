<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Molly Hackbarth">
<meta name="dcterms.date" content="2022-10-01">

<title>Text-as-Data Fall 2022 - Blog Post two</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/DACSS_Round_Network.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<meta name="twitter:title" content="Text-as-Data Fall 2022 - Blog Post two">
<meta name="twitter:description" content="In order to understand how to download twitter and reddit I looked more into APIs. I’ve heard reddit is a bit frustrating, I decided to try twitter first.">
<meta name="twitter:creator" content="@UMassDACSS">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="../index.html">
    <img src="../images/UMass White Wordmark Horiz.png" alt="">
    <span class="navbar-title">Text-as-Data Fall 2022</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://dacss.github.io/Text_as_Data_Fall_2022/">Fall 2022</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html">Contributors</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://umass.edu/sbs/dacss">DACSS</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/DACSS/Text_as_Data_Fall_2022"><i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#understanding-apis-and-r-packages" id="toc-understanding-apis-and-r-packages" class="nav-link active" data-scroll-target="#understanding-apis-and-r-packages">Understanding APIs and R packages</a></li>
  <li><a href="#frustrations-with-apis-and-r" id="toc-frustrations-with-apis-and-r" class="nav-link" data-scroll-target="#frustrations-with-apis-and-r">Frustrations with APIs and R</a></li>
  <li><a href="#looking-for-a-new-option" id="toc-looking-for-a-new-option" class="nav-link" data-scroll-target="#looking-for-a-new-option">Looking for a New Option</a></li>
  <li><a href="#downloading-tweets-and-reddit-posts-through-python" id="toc-downloading-tweets-and-reddit-posts-through-python" class="nav-link" data-scroll-target="#downloading-tweets-and-reddit-posts-through-python">Downloading Tweets and Reddit Posts through Python</a></li>
  <li><a href="#editing-the-data-in-google-sheets" id="toc-editing-the-data-in-google-sheets" class="nav-link" data-scroll-target="#editing-the-data-in-google-sheets">Editing the Data in Google Sheets</a></li>
  <li><a href="#data-quality" id="toc-data-quality" class="nav-link" data-scroll-target="#data-quality">Data Quality</a></li>
  <li><a href="#updated-research-question" id="toc-updated-research-question" class="nav-link" data-scroll-target="#updated-research-question">Updated Research Question</a></li>
  <li><a href="#bringing-in-the-data" id="toc-bringing-in-the-data" class="nav-link" data-scroll-target="#bringing-in-the-data">Bringing in the Data</a></li>
  <li><a href="#attempting-to-clean-the-data-a-bit" id="toc-attempting-to-clean-the-data-a-bit" class="nav-link" data-scroll-target="#attempting-to-clean-the-data-a-bit">Attempting to Clean the Data (a bit)</a>
  <ul class="collapse">
  <li><a href="#remove-languages" id="toc-remove-languages" class="nav-link" data-scroll-target="#remove-languages">Remove Languages</a></li>
  <li><a href="#check-package-textclean" id="toc-check-package-textclean" class="nav-link" data-scroll-target="#check-package-textclean">Check Package TextClean</a></li>
  <li><a href="#removing-emojis" id="toc-removing-emojis" class="nav-link" data-scroll-target="#removing-emojis">Removing Emojis</a></li>
  <li><a href="#remove-html-links" id="toc-remove-html-links" class="nav-link" data-scroll-target="#remove-html-links">Remove HTML links</a></li>
  <li><a href="#another-look-at-check_text" id="toc-another-look-at-check_text" class="nav-link" data-scroll-target="#another-look-at-check_text">Another Look at Check_Text</a></li>
  <li><a href="#a-bit-more-cleaning" id="toc-a-bit-more-cleaning" class="nav-link" data-scroll-target="#a-bit-more-cleaning">A Bit More Cleaning</a></li>
  <li><a href="#testing-reverting-to-data-frame" id="toc-testing-reverting-to-data-frame" class="nav-link" data-scroll-target="#testing-reverting-to-data-frame">Testing Reverting to Data Frame</a></li>
  </ul></li>
  <li><a href="#general-notes-and-future-thoughts" id="toc-general-notes-and-future-thoughts" class="nav-link" data-scroll-target="#general-notes-and-future-thoughts">General Notes and Future Thoughts</a></li>
  <li><a href="#looking-ahead-at-tutorial-5" id="toc-looking-ahead-at-tutorial-5" class="nav-link" data-scroll-target="#looking-ahead-at-tutorial-5">Looking Ahead at Tutorial 5</a></li>
  <li><a href="#full-code" id="toc-full-code" class="nav-link" data-scroll-target="#full-code">Full Code</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Blog Post two</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">blog posts</div>
    <div class="quarto-category">hw2</div>
    <div class="quarto-category">Molly Hackbarth</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Molly Hackbarth </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 1, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textclean)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="understanding-apis-and-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="understanding-apis-and-r-packages">Understanding APIs and R packages</h2>
<p>In order to understand how to download twitter and reddit I looked more into APIs. I’ve heard reddit is a bit frustrating, I decided to try twitter first. This included me downloading the R package “rtweet”. Once I was able to use their API to create a project, I went ahead and tried to download multiple tweets.</p>
</section>
<section id="frustrations-with-apis-and-r" class="level2">
<h2 class="anchored" data-anchor-id="frustrations-with-apis-and-r">Frustrations with APIs and R</h2>
<p>Unfortunately “rtweet” had a very similar issue to the package “RedditextractorR”, both had a limit that made it difficult to work with. “rtweet” only allowed you to search from the last 6-9 days of tweets. This makes it hard to gather a lot of data over time. “RedditextractorR” only allowed you have comments from 7 posts at a time. It seems that using R for both types of packages proved to be very difficult.</p>
<p>I also tried to use the package “twitteR” however it would not load properly for me. It kept giving me errors. Even with the properly set up Twitter API I was unable to have it connect to the account. This took over <strong><em>eight hours</em></strong> to try to get to work (including looking at multiple pages that suggested adding more packages to make both “twitteR” and “rtweet” to work) before I decide to give up on trying to using all of the packages.</p>
</section>
<section id="looking-for-a-new-option" class="level2">
<h2 class="anchored" data-anchor-id="looking-for-a-new-option">Looking for a New Option</h2>
<p>I ended up deciding to look into other ways I could download tweets and Reddit posts. While most websites offered the same API options as mentioned before, a few of them recommended using Python instead.</p>
<p>After awhile I ended up deciding to download Python and Visual Studio Code to run Python. I had little hope and had some frustrations with downloading the “pip” package but was able to download it.</p>
</section>
<section id="downloading-tweets-and-reddit-posts-through-python" class="level2">
<h2 class="anchored" data-anchor-id="downloading-tweets-and-reddit-posts-through-python">Downloading Tweets and Reddit Posts through Python</h2>
<p>After finding a YouTube video I was able to use the python package “<a href="https://github.com/mehranshakarami/AI_Spectrum/blob/main/2022/snscrape/tweets.py">snscrape</a>” that someone had created for python (you can watch the explanation of how it works <a href="https://www.youtube.com/watch?v=jtIMnmbnOFo">here</a>!) in order to allow downloading tweets without having to us an API. This was extremely helpful as the whole time to download all of the tweets I was interested in (both #loveisblindjapan and “love is blind japan”) were downloaded within a few minutes.</p>
<p>For the Reddit posts I used a <a href="https://medium.com/swlh/how-to-scrape-large-amounts-of-reddit-data-using-pushshift-1d33bde9286">website</a> that explained to me how to download all the comments that were on the subreddit r/loveisblindjapan. This also only took a few minutes.</p>
<p>Between Reddit and Twitter I was able to download over 20k comments from users who watched the TV show.</p>
</section>
<section id="editing-the-data-in-google-sheets" class="level2">
<h2 class="anchored" data-anchor-id="editing-the-data-in-google-sheets">Editing the Data in Google Sheets</h2>
<p>Since I did this through python I ended up saving the data into a csv file. This allowed me to check out the data in better detail in Google Sheets. I did a few things in Google Sheets since it was easier:</p>
<ul>
<li><p>Combined the two twitter csv files (One for #loveisblindjapan and another for the phrase “love is blind japan”) and removed any duplicates between them with the “remove duplicate” function.</p></li>
<li><p>I noticed the reddit csv file had time categorized as “utc” which stands for coordinate universal time. This gave me numbers such as “1643382213” which is fairly unreadable to me. Thus I used this formula to fix it: =X2/86400+DATE(1970,1,1)+time(5,30,0). This allowed me to have 1/28/2022 20:33:33 which is easier to understand. However to match the twitter csv file (done in year/month/day (YMD)) I used removed the time from the end and formatted it using Google Sheet’s “custom date and time” format to end up with 2022-01-28.</p></li>
<li><p>Since the twitter csv file had YMD and then time I split the column so it only had YMD.</p></li>
<li><p>I ended up merging the files together (This included a count of comments from people, the username of the person, and the actually tweet or post). I made an extra column that would say if it was from Twitter or Reddit.</p></li>
</ul>
</section>
<section id="data-quality" class="level2">
<h2 class="anchored" data-anchor-id="data-quality">Data Quality</h2>
<p>While almost all Reddit posts were made in English, I noticed there were quite a few tweets that were partially or completely in a different language. This has lead to me debating on if I should just remove the non English tweets entirely or leave them in.</p>
<p>I also noticed there were more tweets that had spelling errors than on Reddit posts. This is likely due to being unable to edit tweets, however this may cause a problem. Additionally tweets were more likely to use slang than Reddit.</p>
<p>From a quick glance I also noticed that tweets were often writing about how the show made them feel rather than about the contestants on the show. This may lead me to change my research question or decide to use only Reddit posts. Reddit posts seemed to focus on the contestants more often.</p>
<p>For the Reddit posts I also noticed that unfortunately the data does not seem to tell me how to now if people are replying to another comment on the post. Some of the posts will start with “I know what you mean!” This could lead to less examples of contestants names being shown, which could make my research question difficult.</p>
</section>
<section id="updated-research-question" class="level2">
<h2 class="anchored" data-anchor-id="updated-research-question">Updated Research Question</h2>
<p><strong>Previously my research question was:</strong> Do Reddit and Twitter differentiate on their views of contestants and their relationships in <em>Love is Blind Japan</em>?</p>
<p><strong>My current research question I’m leaning towards is:</strong> How do Reddit and Twitter users feel about the show <em>Love is Blind Japan</em>?</p>
<p><strong>Why I’m considering the change:</strong> It seems that although the contestants are important, if I want to focus on purely how viewers felt about the contestants I would need to only use Reddit posts. Additionally I will be analyzing the positive and negative sentiments of Reddit and Twitter together.</p>
</section>
<section id="bringing-in-the-data" class="level2">
<h2 class="anchored" data-anchor-id="bringing-in-the-data">Bringing in the Data</h2>
<p>In order to check the data I’ve added my csv file to my repository. I will first check that it was added correctly.</p>
<p>I use the “here” package because it allows you to bypass the issue of setwd(), allowing you to change your working directory file. <strong>A relative path to the project root directory will always be created using here().</strong></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#corpus &lt;- read.csv(here("posts","loveisblind_socialmedia.csv"))</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"_data/loveisblind_socialmedia.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: 'C:/Users/srika/OneDrive/Desktop/Text_as_Data_Fall_2022/_data/loveisblind_socialmedia.csv' does not exist.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in head(corpus): object 'corpus' not found</code></pre>
</div>
</div>
<p>Here we can see the data loaded in correctly and all three of the columns I wanted!</p>
</section>
<section id="attempting-to-clean-the-data-a-bit" class="level2">
<h2 class="anchored" data-anchor-id="attempting-to-clean-the-data-a-bit">Attempting to Clean the Data (a bit)</h2>
<p>While the data is in the correct columns, I would still like to try a bit of cleaning to see if we can remove some items. The first thing I will do is remove non english from all of my posts. This is due to me being unable to analyze other languages correctly.</p>
<section id="remove-languages" class="level3">
<h3 class="anchored" data-anchor-id="remove-languages">Remove Languages</h3>
<p>The first thing I thought of was removing Japanese as the show was in Japan, so I found this <a href="https://stackoverflow.com/questions/60181121/how-do-i-remove-japanese-characters">answer</a>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>str_rm_jap <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#we replace japanese blocks with nothing, and clean any double whitespace from this</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">#reference at http://www.rikai.com/library/kanjitables/kanji_codes.unicode.shtml</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#japanese style punctuation</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3000-\u303F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#katakana</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u30A0-\u30FF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">#hiragana</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3040-\u309F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">#kanji</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u4E00-\u9FAF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">#remove excess whitespace</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"  +"</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus<span class="sc">$</span>text <span class="sc">%&gt;%</span> str_rm_jap</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in stri_replace_all_regex(string, pattern, fix_replacement(replacement), : object 'corpus' not found</code></pre>
</div>
</div>
<p>However I realized there were many more languages. This made it a bit more difficult. So I decided to keep looking and found this <a href="https://stackoverflow.com/questions/49338549/remove-languages-other-than-english-from-corpus-or-data-frame-in-r">answer</a>.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"cld3"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>corpus2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(corpus, <span class="fu">detect_language</span>(corpus<span class="sc">$</span>text) <span class="sc">==</span> <span class="st">"en"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in subset(corpus, detect_language(corpus$text) == "en"): object 'corpus' not found</code></pre>
</div>
</div>
<p>This seemed to work well! It may not be the perfect solution but it seems to have removed any tweets or posts that were not in English.</p>
</section>
<section id="check-package-textclean" class="level3">
<h3 class="anchored" data-anchor-id="check-package-textclean">Check Package TextClean</h3>
<p>The next package I’ll use for that is “textclean”.</p>
<p>I’ll first check any posts or tweets (henceforth known as posts) using the check_text() function.</p>
<p>This takes quite awhile (I didn’t actually time it but I had enough time to watch a ton of Youtube clips!)</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_text</span>(corpus2<span class="sc">$</span>text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.data.frame(x): object 'corpus2' not found</code></pre>
</div>
</div>
<p>We’re able to see here there’s multiple issues with the text that I pulled. What I like about this package is it also gives options to fix these items too. The first thing I’ll try is to replace internet slang function.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_internet_slang</span>(corpus2<span class="sc">$</span>text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus2' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in head(corpus_posts, 20): object 'corpus_posts' not found</code></pre>
</div>
</div>
<p>This has worked well. It has changed slang words like “ppl” to “people”! This makes me quite happy.</p>
<p>I’ll go ahead and do “replace_date”, “replace_kern” (to adjust spacing that was done manually such as writing “A M A Z I N G” as “AMAZING”), “replace_curly_quotes”, “replace_word_elongation” (If someone writes “woooah” it’ll change it to “woah”) and “replace_contraction”.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_date</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_contraction</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_kern</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_curly_quote</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_word_elongation</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_white</span>(corpus_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in isTRUE(impart.meaning): object 'corpus_posts' not found</code></pre>
</div>
</div>
</section>
<section id="removing-emojis" class="level3">
<h3 class="anchored" data-anchor-id="removing-emojis">Removing Emojis</h3>
<p>I also want to remove emojis. To do this I found in the DACSS slack channel someone who was looking for similar information and was given an answer! Below you will see the emojis removed</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus_posts <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in stri_replace_all_regex(string, pattern, fix_replacement(replacement), : object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in head(corpus_posts, 20): object 'corpus_posts' not found</code></pre>
</div>
</div>
</section>
<section id="remove-html-links" class="level3">
<h3 class="anchored" data-anchor-id="remove-html-links">Remove HTML links</h3>
<p>There are a few html links that I believe mostly lead to Youtube clips of the shows or gifs. I would like to remove those as they don’t add to my analysis. I followed <a href="https://stackoverflow.com/questions/25352448/remove-urls-from-string">this</a> answer.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, corpus_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus_posts' not found</code></pre>
</div>
</div>
</section>
<section id="another-look-at-check_text" class="level3">
<h3 class="anchored" data-anchor-id="another-look-at-check_text">Another Look at Check_Text</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_text</span>(corpus_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.data.frame(x): object 'corpus_posts' not found</code></pre>
</div>
</div>
<p>Here we can see there’s still a lot of problems. I’ll attempt to fix some of them that I notice right away that seem easy.</p>
</section>
<section id="a-bit-more-cleaning" class="level3">
<h3 class="anchored" data-anchor-id="a-bit-more-cleaning">A Bit More Cleaning</h3>
<p>Here I’m cleaning some issues that don’t seem to work through the “textclean” replace packages.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"it's"</span>, <span class="st">"i'm"</span>, <span class="st">"i've"</span>, <span class="st">"she's"</span>, <span class="st">"he's"</span>, <span class="st">"don't"</span>, <span class="st">"isn't"</span>, <span class="st">"didn't"</span>, <span class="st">"they'll"</span>, <span class="st">"can't"</span>, <span class="st">"they're"</span>, <span class="st">"you're"</span>, <span class="st">"EP02Iv'e"</span>), <span class="fu">c</span>(<span class="st">"it is"</span>, <span class="st">"i am"</span>, <span class="st">"i have"</span>, <span class="st">"she is"</span>, <span class="st">"he is"</span>, <span class="st">"does not"</span>, <span class="st">"is not"</span>, <span class="st">"did not"</span>, <span class="st">"they will"</span>, <span class="st">"cannot"</span>, <span class="st">"they are"</span>, <span class="st">"you are"</span>, <span class="st">"it is"</span>, <span class="st">"i have"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"1/11/22"</span>, <span class="st">"23"</span>), <span class="fu">c</span>(<span class="st">"january eleventh two thousand twenty two"</span>, <span class="st">"twenty three"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus_posts <span class="sc">%&gt;%</span> textshape<span class="sc">::</span><span class="fu">split_sentence</span>(corpus_posts, <span class="at">text.var =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in textshape::split_sentence(., corpus_posts, text.var = TRUE): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">10</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in head(corpus_posts, 10): object 'corpus_posts' not found</code></pre>
</div>
</div>
</section>
<section id="testing-reverting-to-data-frame" class="level3">
<h3 class="anchored" data-anchor-id="testing-reverting-to-data-frame">Testing Reverting to Data Frame</h3>
<p>This a test area to see if this will allow me to put my data back from values to data.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corpus)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textshape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'textshape'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:dplyr':

    combine</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    flatten</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:tibble':

    column_to_rownames</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cleanNLP)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(NLP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'NLP'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:ggplot2':

    annotate</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> <span class="fu">as_corpus_text</span>(corpus_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in as_corpus_text(corpus_posts): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> <span class="fu">tidy_list</span>(corpus_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.data.frame(x[[1]]): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> <span class="fu">Token_Tokenizer</span>(corpus_postse) <span class="co"># become tokens</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in Token_Tokenizer(corpus_postse): object 'corpus_postse' not found</code></pre>
</div>
</div>
<p>It worked somewhat! It isn’t a true data table but it is back under the data category.</p>
</section>
</section>
<section id="general-notes-and-future-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="general-notes-and-future-thoughts">General Notes and Future Thoughts</h2>
<ul>
<li><p>The columns I had originally in the table, date and if the post was a tweet or Reddit post are missing. This isn’t a problem currently, but if I would like those back I’ll have to join the edited post to the table.</p>
<ul>
<li>Another option is to just upload two separate csv files with one containing tweets and another containing posts.</li>
</ul></li>
<li><p>The textclean package has been super useful! It’s helped to make a lot of the cleaning fairly easily. However it has left /n around for a few items. I’m unsure why, (as I believe it happened removing other languages) so I’ll have to remove it later.</p>
<ul>
<li>Although it has been very helpful it seems to be unable to clean up everything. That’s alright but a bit confusing as to why.</li>
</ul></li>
<li><p>I noticed that some posts are now “NA” I’d like to remove those from my database by the next blog post.</p></li>
<li><p>I would also like to change all text to lower case.</p></li>
<li><p>I may want to use the “tm” package to clean up my data even more. Currently I feel like a lot of the harder things have been taken out.</p></li>
<li><p>I’m a bit confused on the creating the corpus as token with the “textshape” package. It seems to work but I’m unsure of how it’s working.</p></li>
</ul>
</section>
<section id="looking-ahead-at-tutorial-5" class="level2">
<h2 class="anchored" data-anchor-id="looking-ahead-at-tutorial-5">Looking Ahead at Tutorial 5</h2>
<p>After taking a brief look at tutorial 5 there does seem to be some very useful tips in there. Here is currently what I have. I may be able to combine some of what I was looking at and what lesson 5 has together!</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: usethis</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>------------------------------------------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>You have loaded plyr after dplyr - this is likely to cause problems.
If you need functions from both plyr and dplyr, please load plyr first, then dplyr:
library(plyr); library(dplyr)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>------------------------------------------------------------------------------</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'plyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:here':

    here</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:dplyr':

    arrange, count, desc, failwith, id, mutate, rename, summarise,
    summarize</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:purrr':

    compact</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Package version: 3.2.3
Unicode version: 13.0
ICU version: 69.1</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Parallel computing: 8 of 8 threads used.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>See https://quanteda.io for tutorials and examples.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'quanteda'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:NLP':

    meta, meta&lt;-</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>corpustest <span class="ot">&lt;-</span> <span class="fu">corpus</span>(corpus<span class="sc">$</span>text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in corpus$text: object of type 'closure' is not subsettable</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>corpussummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(corpustest) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in summary(corpustest): object 'corpustest' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>corpussummary<span class="sc">$</span>show <span class="ot">&lt;-</span> <span class="st">"Love is Blind Japan"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in corpussummary$show &lt;- "Love is Blind Japan": object 'corpussummary' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>corpussummary<span class="sc">$</span>count <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(corpussummary, <span class="st">"[0-9]+"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in stri_extract_first_regex(string, pattern, opts_regex = opts(pattern)): object 'corpussummary' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(corpustest, </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in tokens(corpustest, remove_punct = T, remove_numbers = T): object 'corpustest' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(corpus_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in tokens_tolower(corpus_tokens): object 'corpus_tokens' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in tokens_select(corpus_tokens, pattern = stopwords("en"), selection = "remove"): object 'corpus_tokens' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>corpus_tokens_stem <span class="ot">&lt;-</span> <span class="fu">tokens_wordstem</span>(corpus_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in tokens_wordstem(corpus_tokens): object 'corpus_tokens' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(corpus_tokens)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'print': object 'corpus_tokens' not found</code></pre>
</div>
</div>
</section>
<section id="full-code" class="level2">
<h2 class="anchored" data-anchor-id="full-code">Full Code</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textclean)</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textshape)</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"posts"</span>,<span class="st">"loveisblind_socialmedia.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in here("posts", "loveisblind_socialmedia.csv"): unused argument ("loveisblind_socialmedia.csv")</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                         
1 function (x, ...)      
2 {                      
3     UseMethod("corpus")
4 }                      </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>corpus2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(corpus, <span class="fu">detect_language</span>(corpus<span class="sc">$</span>text) <span class="sc">==</span> <span class="st">"en"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in corpus$text: object of type 'closure' is not subsettable</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_internet_slang</span>(corpus2<span class="sc">$</span>text)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus2' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_date</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_contraction</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_kern</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_curly_quote</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_word_elongation</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_white</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_html</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  textshape<span class="sc">::</span><span class="fu">split_sentence</span>(corpus_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in isTRUE(symbol): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus_posts <span class="sc">%&gt;%</span> </span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in stri_replace_all_regex(string, pattern, fix_replacement(replacement), : object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, corpus_posts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"it's"</span>, <span class="st">"i'm"</span>, <span class="st">"i've"</span>, <span class="st">"she's"</span>, <span class="st">"he's"</span>, <span class="st">"don't"</span>, <span class="st">"isn't"</span>, <span class="st">"didn't"</span>, <span class="st">"they'll"</span>, <span class="st">"can't"</span>, <span class="st">"they're"</span>, <span class="st">"you're"</span>, <span class="st">"EP02Iv'e"</span>), <span class="fu">c</span>(<span class="st">"it is"</span>, <span class="st">"i am"</span>, <span class="st">"i have"</span>, <span class="st">"she is"</span>, <span class="st">"he is"</span>, <span class="st">"does not"</span>, <span class="st">"is not"</span>, <span class="st">"did not"</span>, <span class="st">"they will"</span>, <span class="st">"cannot"</span>, <span class="st">"they are"</span>, <span class="st">"you are"</span>, <span class="st">"it is"</span>, <span class="st">"i have"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"1/11/22"</span>, <span class="st">"23"</span>), <span class="fu">c</span>(<span class="st">"january eleventh two thousand twenty two"</span>, <span class="st">"twenty three"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in is.factor(x): object 'corpus_posts' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> corpus_postse <span class="sc">%&gt;%</span> textshape<span class="sc">::</span><span class="fu">split_sentence</span>(corpus_postse) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in textshape::split_sentence(., corpus_postse): object 'corpus_postse' not found</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">10</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in head(corpus_posts, 10): object 'corpus_posts' not found</code></pre>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="DACSS/Text_as_Data_Fall_2022" data-repo-id="R_kgDOH5675w" data-category="Announcements" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb104" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Blog Post two"</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Molly Hackbarth"</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="an">desription:</span><span class="co"> "Focusing on downloading data"</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "10/01/2022"</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: true</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-copy: true</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="co">  - blog posts</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a><span class="co">  - hw2</span></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a><span class="co">  - Molly Hackbarth</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup</span></span>
<span id="cb104-22"><a href="#cb104-22" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb104-23"><a href="#cb104-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-24"><a href="#cb104-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb104-25"><a href="#cb104-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb104-26"><a href="#cb104-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb104-27"><a href="#cb104-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textclean)</span>
<span id="cb104-28"><a href="#cb104-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb104-29"><a href="#cb104-29" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb104-30"><a href="#cb104-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb104-31"><a href="#cb104-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-32"><a href="#cb104-32" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span>opts_chunk<span class="sc">$</span><span class="fu">set</span>(<span class="at">echo =</span> <span class="cn">TRUE</span>)</span>
<span id="cb104-33"><a href="#cb104-33" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-34"><a href="#cb104-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-35"><a href="#cb104-35" aria-hidden="true" tabindex="-1"></a><span class="fu">## Understanding APIs and R packages</span></span>
<span id="cb104-36"><a href="#cb104-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-37"><a href="#cb104-37" aria-hidden="true" tabindex="-1"></a>In order to understand how to download twitter and reddit I looked more into APIs. I've heard reddit is a bit frustrating, I decided to try twitter first. This included me downloading the R package "rtweet". Once I was able to use their API to create a project, I went ahead and tried to download multiple tweets.</span>
<span id="cb104-38"><a href="#cb104-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-39"><a href="#cb104-39" aria-hidden="true" tabindex="-1"></a><span class="fu">## Frustrations with APIs and R</span></span>
<span id="cb104-40"><a href="#cb104-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-41"><a href="#cb104-41" aria-hidden="true" tabindex="-1"></a>Unfortunately "rtweet" had a very similar issue to the package "RedditextractorR", both had a limit that made it difficult to work with. "rtweet" only allowed you to search from the last 6-9 days of tweets. This makes it hard to gather a lot of data over time. "RedditextractorR" only allowed you have comments from 7 posts at a time. It seems that using R for both types of packages proved to be very difficult.</span>
<span id="cb104-42"><a href="#cb104-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-43"><a href="#cb104-43" aria-hidden="true" tabindex="-1"></a>I also tried to use the package "twitteR" however it would not load properly for me. It kept giving me errors. Even with the properly set up Twitter API I was unable to have it connect to the account. This took over ***eight hours*** to try to get to work (including looking at multiple pages that suggested adding more packages to make both "twitteR" and "rtweet" to work) before I decide to give up on trying to using all of the packages.</span>
<span id="cb104-44"><a href="#cb104-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-45"><a href="#cb104-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Looking for a New Option</span></span>
<span id="cb104-46"><a href="#cb104-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-47"><a href="#cb104-47" aria-hidden="true" tabindex="-1"></a>I ended up deciding to look into other ways I could download tweets and Reddit posts. While most websites offered the same API options as mentioned before, a few of them recommended using Python instead.</span>
<span id="cb104-48"><a href="#cb104-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-49"><a href="#cb104-49" aria-hidden="true" tabindex="-1"></a>After awhile I ended up deciding to download Python and Visual Studio Code to run Python. I had little hope and had some frustrations with downloading the "pip" package but was able to download it.</span>
<span id="cb104-50"><a href="#cb104-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-51"><a href="#cb104-51" aria-hidden="true" tabindex="-1"></a><span class="fu">## Downloading Tweets and Reddit Posts through Python</span></span>
<span id="cb104-52"><a href="#cb104-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-53"><a href="#cb104-53" aria-hidden="true" tabindex="-1"></a>After finding a YouTube video I was able to use the python package "<span class="co">[</span><span class="ot">snscrape</span><span class="co">](https://github.com/mehranshakarami/AI_Spectrum/blob/main/2022/snscrape/tweets.py)</span>" that someone had created for python (you can watch the explanation of how it works <span class="co">[</span><span class="ot">here</span><span class="co">](https://www.youtube.com/watch?v=jtIMnmbnOFo)</span>!) in order to allow downloading tweets without having to us an API. This was extremely helpful as the whole time to download all of the tweets I was interested in (both #loveisblindjapan and "love is blind japan") were downloaded within a few minutes.</span>
<span id="cb104-54"><a href="#cb104-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-55"><a href="#cb104-55" aria-hidden="true" tabindex="-1"></a>For the Reddit posts I used a <span class="co">[</span><span class="ot">website</span><span class="co">](https://medium.com/swlh/how-to-scrape-large-amounts-of-reddit-data-using-pushshift-1d33bde9286)</span> that explained to me how to download all the comments that were on the subreddit r/loveisblindjapan. This also only took a few minutes.</span>
<span id="cb104-56"><a href="#cb104-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-57"><a href="#cb104-57" aria-hidden="true" tabindex="-1"></a>Between Reddit and Twitter I was able to download over 20k comments from users who watched the TV show.</span>
<span id="cb104-58"><a href="#cb104-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-59"><a href="#cb104-59" aria-hidden="true" tabindex="-1"></a><span class="fu">## Editing the Data in Google Sheets</span></span>
<span id="cb104-60"><a href="#cb104-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-61"><a href="#cb104-61" aria-hidden="true" tabindex="-1"></a>Since I did this through python I ended up saving the data into a csv file. This allowed me to check out the data in better detail in Google Sheets. I did a few things in Google Sheets since it was easier:</span>
<span id="cb104-62"><a href="#cb104-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-63"><a href="#cb104-63" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Combined the two twitter csv files (One for #loveisblindjapan and another for the phrase "love is blind japan") and removed any duplicates between them with the "remove duplicate" function.</span>
<span id="cb104-64"><a href="#cb104-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-65"><a href="#cb104-65" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I noticed the reddit csv file had time categorized as "utc" which stands for coordinate universal time. This gave me numbers such as "1643382213" which is fairly unreadable to me. Thus I used this formula to fix it: =X2/86400+DATE(1970,1,1)+time(5,30,0). This allowed me to have 1/28/2022 20:33:33 which is easier to understand. However to match the twitter csv file (done in year/month/day (YMD)) I used removed the time from the end and formatted it using Google Sheet's "custom date and time" format to end up with 2022-01-28.</span>
<span id="cb104-66"><a href="#cb104-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-67"><a href="#cb104-67" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Since the twitter csv file had YMD and then time I split the column so it only had YMD.</span>
<span id="cb104-68"><a href="#cb104-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-69"><a href="#cb104-69" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I ended up merging the files together (This included a count of comments from people, the username of the person, and the actually tweet or post). I made an extra column that would say if it was from Twitter or Reddit.</span>
<span id="cb104-70"><a href="#cb104-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-71"><a href="#cb104-71" aria-hidden="true" tabindex="-1"></a><span class="fu">## Data Quality</span></span>
<span id="cb104-72"><a href="#cb104-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-73"><a href="#cb104-73" aria-hidden="true" tabindex="-1"></a>While almost all Reddit posts were made in English, I noticed there were quite a few tweets that were partially or completely in a different language. This has lead to me debating on if I should just remove the non English tweets entirely or leave them in.</span>
<span id="cb104-74"><a href="#cb104-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-75"><a href="#cb104-75" aria-hidden="true" tabindex="-1"></a>I also noticed there were more tweets that had spelling errors than on Reddit posts. This is likely due to being unable to edit tweets, however this may cause a problem. Additionally tweets were more likely to use slang than Reddit.</span>
<span id="cb104-76"><a href="#cb104-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-77"><a href="#cb104-77" aria-hidden="true" tabindex="-1"></a>From a quick glance I also noticed that tweets were often writing about how the show made them feel rather than about the contestants on the show. This may lead me to change my research question or decide to use only Reddit posts. Reddit posts seemed to focus on the contestants more often.</span>
<span id="cb104-78"><a href="#cb104-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-79"><a href="#cb104-79" aria-hidden="true" tabindex="-1"></a>For the Reddit posts I also noticed that unfortunately the data does not seem to tell me how to now if people are replying to another comment on the post. Some of the posts will start with "I know what you mean!" This could lead to less examples of contestants names being shown, which could make my research question difficult.</span>
<span id="cb104-80"><a href="#cb104-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-81"><a href="#cb104-81" aria-hidden="true" tabindex="-1"></a><span class="fu">## Updated Research Question</span></span>
<span id="cb104-82"><a href="#cb104-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-83"><a href="#cb104-83" aria-hidden="true" tabindex="-1"></a>**Previously my research question was:** Do Reddit and Twitter differentiate on their views of contestants and their relationships in *Love is Blind Japan*?</span>
<span id="cb104-84"><a href="#cb104-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-85"><a href="#cb104-85" aria-hidden="true" tabindex="-1"></a>**My current research question I'm leaning towards is:** How do Reddit and Twitter users feel about the show *Love is Blind Japan*?</span>
<span id="cb104-86"><a href="#cb104-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-87"><a href="#cb104-87" aria-hidden="true" tabindex="-1"></a>**Why I'm considering the change:** It seems that although the contestants are important, if I want to focus on purely how viewers felt about the contestants I would need to only use Reddit posts. Additionally I will be analyzing the positive and negative sentiments of Reddit and Twitter together.</span>
<span id="cb104-88"><a href="#cb104-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-89"><a href="#cb104-89" aria-hidden="true" tabindex="-1"></a><span class="fu">## Bringing in the Data</span></span>
<span id="cb104-90"><a href="#cb104-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-91"><a href="#cb104-91" aria-hidden="true" tabindex="-1"></a>In order to check the data I've added my csv file to my repository. I will first check that it was added correctly.</span>
<span id="cb104-92"><a href="#cb104-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-93"><a href="#cb104-93" aria-hidden="true" tabindex="-1"></a>I use the "here" package because it allows you to bypass the issue of setwd(), allowing you to change your working directory file. **A relative path to the project root directory will always be created using here().**</span>
<span id="cb104-94"><a href="#cb104-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-95"><a href="#cb104-95" aria-hidden="true" tabindex="-1"></a><span class="in">```{r Enter the Data}</span></span>
<span id="cb104-96"><a href="#cb104-96" aria-hidden="true" tabindex="-1"></a><span class="co">#corpus &lt;- read.csv(here("posts","loveisblind_socialmedia.csv"))</span></span>
<span id="cb104-97"><a href="#cb104-97" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"_data/loveisblind_socialmedia.csv"</span>))</span>
<span id="cb104-98"><a href="#cb104-98" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus)</span>
<span id="cb104-99"><a href="#cb104-99" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-100"><a href="#cb104-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-101"><a href="#cb104-101" aria-hidden="true" tabindex="-1"></a>Here we can see the data loaded in correctly and all three of the columns I wanted!</span>
<span id="cb104-102"><a href="#cb104-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-103"><a href="#cb104-103" aria-hidden="true" tabindex="-1"></a><span class="fu">## Attempting to Clean the Data (a bit)</span></span>
<span id="cb104-104"><a href="#cb104-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-105"><a href="#cb104-105" aria-hidden="true" tabindex="-1"></a>While the data is in the correct columns, I would still like to try a bit of cleaning to see if we can remove some items. The first thing I will do is remove non english from all of my posts. This is due to me being unable to analyze other languages correctly.</span>
<span id="cb104-106"><a href="#cb104-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-107"><a href="#cb104-107" aria-hidden="true" tabindex="-1"></a><span class="fu">### Remove Languages</span></span>
<span id="cb104-108"><a href="#cb104-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-109"><a href="#cb104-109" aria-hidden="true" tabindex="-1"></a>The first thing I thought of was removing Japanese as the show was in Japan, so I found this <span class="co">[</span><span class="ot">answer</span><span class="co">](https://stackoverflow.com/questions/60181121/how-do-i-remove-japanese-characters)</span>.</span>
<span id="cb104-110"><a href="#cb104-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-111"><a href="#cb104-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r remove japanese}</span></span>
<span id="cb104-112"><a href="#cb104-112" aria-hidden="true" tabindex="-1"></a>str_rm_jap <span class="ot">=</span> <span class="cf">function</span>(x) {</span>
<span id="cb104-113"><a href="#cb104-113" aria-hidden="true" tabindex="-1"></a>  <span class="co">#we replace japanese blocks with nothing, and clean any double whitespace from this</span></span>
<span id="cb104-114"><a href="#cb104-114" aria-hidden="true" tabindex="-1"></a>  <span class="co">#reference at http://www.rikai.com/library/kanjitables/kanji_codes.unicode.shtml</span></span>
<span id="cb104-115"><a href="#cb104-115" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">%&gt;%</span> </span>
<span id="cb104-116"><a href="#cb104-116" aria-hidden="true" tabindex="-1"></a>    <span class="co">#japanese style punctuation</span></span>
<span id="cb104-117"><a href="#cb104-117" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3000-\u303F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-118"><a href="#cb104-118" aria-hidden="true" tabindex="-1"></a>    <span class="co">#katakana</span></span>
<span id="cb104-119"><a href="#cb104-119" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u30A0-\u30FF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-120"><a href="#cb104-120" aria-hidden="true" tabindex="-1"></a>    <span class="co">#hiragana</span></span>
<span id="cb104-121"><a href="#cb104-121" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u3040-\u309F]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-122"><a href="#cb104-122" aria-hidden="true" tabindex="-1"></a>    <span class="co">#kanji</span></span>
<span id="cb104-123"><a href="#cb104-123" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[\u4E00-\u9FAF]"</span>, <span class="st">""</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-124"><a href="#cb104-124" aria-hidden="true" tabindex="-1"></a>    <span class="co">#remove excess whitespace</span></span>
<span id="cb104-125"><a href="#cb104-125" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"  +"</span>, <span class="st">" "</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-126"><a href="#cb104-126" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_trim</span>()</span>
<span id="cb104-127"><a href="#cb104-127" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb104-128"><a href="#cb104-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-129"><a href="#cb104-129" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus<span class="sc">$</span>text <span class="sc">%&gt;%</span> str_rm_jap</span>
<span id="cb104-130"><a href="#cb104-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-131"><a href="#cb104-131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-132"><a href="#cb104-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-133"><a href="#cb104-133" aria-hidden="true" tabindex="-1"></a>However I realized there were many more languages. This made it a bit more difficult. So I decided to keep looking and found this <span class="co">[</span><span class="ot">answer</span><span class="co">](https://stackoverflow.com/questions/49338549/remove-languages-other-than-english-from-corpus-or-data-frame-in-r)</span>.</span>
<span id="cb104-134"><a href="#cb104-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-135"><a href="#cb104-135" aria-hidden="true" tabindex="-1"></a><span class="in">```{r remove more languages}</span></span>
<span id="cb104-136"><a href="#cb104-136" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"cld3"</span>)</span>
<span id="cb104-137"><a href="#cb104-137" aria-hidden="true" tabindex="-1"></a>corpus2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(corpus, <span class="fu">detect_language</span>(corpus<span class="sc">$</span>text) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb104-138"><a href="#cb104-138" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-139"><a href="#cb104-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-140"><a href="#cb104-140" aria-hidden="true" tabindex="-1"></a>This seemed to work well! It may not be the perfect solution but it seems to have removed any tweets or posts that were not in English.</span>
<span id="cb104-141"><a href="#cb104-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-142"><a href="#cb104-142" aria-hidden="true" tabindex="-1"></a><span class="fu">### Check Package TextClean</span></span>
<span id="cb104-143"><a href="#cb104-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-144"><a href="#cb104-144" aria-hidden="true" tabindex="-1"></a>The next package I'll use for that is "textclean".</span>
<span id="cb104-145"><a href="#cb104-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-146"><a href="#cb104-146" aria-hidden="true" tabindex="-1"></a>I'll first check any posts or tweets (henceforth known as posts) using the check_text() function.</span>
<span id="cb104-147"><a href="#cb104-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-148"><a href="#cb104-148" aria-hidden="true" tabindex="-1"></a>This takes quite awhile (I didn't actually time it but I had enough time to watch a ton of Youtube clips!)</span>
<span id="cb104-149"><a href="#cb104-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-152"><a href="#cb104-152" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb104-153"><a href="#cb104-153" aria-hidden="true" tabindex="-1"></a><span class="fu">check_text</span>(corpus2<span class="sc">$</span>text)</span>
<span id="cb104-154"><a href="#cb104-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-155"><a href="#cb104-155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-156"><a href="#cb104-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-157"><a href="#cb104-157" aria-hidden="true" tabindex="-1"></a>We're able to see here there's multiple issues with the text that I pulled. What I like about this package is it also gives options to fix these items too. The first thing I'll try is to replace internet slang function.</span>
<span id="cb104-158"><a href="#cb104-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-159"><a href="#cb104-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r replace internet slang}</span></span>
<span id="cb104-160"><a href="#cb104-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-161"><a href="#cb104-161" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_internet_slang</span>(corpus2<span class="sc">$</span>text)</span>
<span id="cb104-162"><a href="#cb104-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-163"><a href="#cb104-163" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">20</span>)</span>
<span id="cb104-164"><a href="#cb104-164" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-165"><a href="#cb104-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-166"><a href="#cb104-166" aria-hidden="true" tabindex="-1"></a>This has worked well. It has changed slang words like "ppl" to "people"! This makes me quite happy.</span>
<span id="cb104-167"><a href="#cb104-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-168"><a href="#cb104-168" aria-hidden="true" tabindex="-1"></a>I'll go ahead and do "replace_date", "replace_kern" (to adjust spacing that was done manually such as writing "A M A Z I N G" as "AMAZING"), "replace_curly_quotes", "replace_word_elongation" (If someone writes "woooah" it'll change it to "woah") and "replace_contraction".</span>
<span id="cb104-169"><a href="#cb104-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-170"><a href="#cb104-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r continue to replace}</span></span>
<span id="cb104-171"><a href="#cb104-171" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_date</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-172"><a href="#cb104-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_contraction</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-173"><a href="#cb104-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_kern</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-174"><a href="#cb104-174" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_curly_quote</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-175"><a href="#cb104-175" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_word_elongation</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-176"><a href="#cb104-176" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_white</span>(corpus_posts)</span>
<span id="cb104-177"><a href="#cb104-177" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-178"><a href="#cb104-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-179"><a href="#cb104-179" aria-hidden="true" tabindex="-1"></a><span class="fu">### Removing Emojis</span></span>
<span id="cb104-180"><a href="#cb104-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-181"><a href="#cb104-181" aria-hidden="true" tabindex="-1"></a>I also want to remove emojis. To do this I found in the DACSS slack channel someone who was looking for similar information and was given an answer! Below you will see the emojis removed</span>
<span id="cb104-182"><a href="#cb104-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-183"><a href="#cb104-183" aria-hidden="true" tabindex="-1"></a><span class="in">```{r remove emojis}</span></span>
<span id="cb104-184"><a href="#cb104-184" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb104-185"><a href="#cb104-185" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus_posts <span class="sc">%&gt;%</span> </span>
<span id="cb104-186"><a href="#cb104-186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb104-187"><a href="#cb104-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-188"><a href="#cb104-188" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">20</span>)</span>
<span id="cb104-189"><a href="#cb104-189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-190"><a href="#cb104-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-191"><a href="#cb104-191" aria-hidden="true" tabindex="-1"></a><span class="fu">### Remove HTML links</span></span>
<span id="cb104-192"><a href="#cb104-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-193"><a href="#cb104-193" aria-hidden="true" tabindex="-1"></a>There are a few html links that I believe mostly lead to Youtube clips of the shows or gifs. I would like to remove those as they don't add to my analysis. I followed <span class="co">[</span><span class="ot">this</span><span class="co">](https://stackoverflow.com/questions/25352448/remove-urls-from-string)</span> answer.</span>
<span id="cb104-194"><a href="#cb104-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-195"><a href="#cb104-195" aria-hidden="true" tabindex="-1"></a><span class="in">```{r remove links}</span></span>
<span id="cb104-196"><a href="#cb104-196" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, corpus_posts)</span>
<span id="cb104-197"><a href="#cb104-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-198"><a href="#cb104-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-199"><a href="#cb104-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-200"><a href="#cb104-200" aria-hidden="true" tabindex="-1"></a><span class="fu">### Another Look at Check_Text</span></span>
<span id="cb104-201"><a href="#cb104-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-202"><a href="#cb104-202" aria-hidden="true" tabindex="-1"></a><span class="in">```{r check text again}</span></span>
<span id="cb104-203"><a href="#cb104-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-204"><a href="#cb104-204" aria-hidden="true" tabindex="-1"></a><span class="fu">check_text</span>(corpus_posts)</span>
<span id="cb104-205"><a href="#cb104-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-206"><a href="#cb104-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-207"><a href="#cb104-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-208"><a href="#cb104-208" aria-hidden="true" tabindex="-1"></a>Here we can see there's still a lot of problems. I'll attempt to fix some of them that I notice right away that seem easy.</span>
<span id="cb104-209"><a href="#cb104-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-210"><a href="#cb104-210" aria-hidden="true" tabindex="-1"></a><span class="fu">### A Bit More Cleaning</span></span>
<span id="cb104-211"><a href="#cb104-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-212"><a href="#cb104-212" aria-hidden="true" tabindex="-1"></a>Here I'm cleaning some issues that don't seem to work through the "textclean" replace packages.</span>
<span id="cb104-213"><a href="#cb104-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-214"><a href="#cb104-214" aria-hidden="true" tabindex="-1"></a><span class="in">```{r cleaning text more}</span></span>
<span id="cb104-215"><a href="#cb104-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-216"><a href="#cb104-216" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"it's"</span>, <span class="st">"i'm"</span>, <span class="st">"i've"</span>, <span class="st">"she's"</span>, <span class="st">"he's"</span>, <span class="st">"don't"</span>, <span class="st">"isn't"</span>, <span class="st">"didn't"</span>, <span class="st">"they'll"</span>, <span class="st">"can't"</span>, <span class="st">"they're"</span>, <span class="st">"you're"</span>, <span class="st">"EP02Iv'e"</span>), <span class="fu">c</span>(<span class="st">"it is"</span>, <span class="st">"i am"</span>, <span class="st">"i have"</span>, <span class="st">"she is"</span>, <span class="st">"he is"</span>, <span class="st">"does not"</span>, <span class="st">"is not"</span>, <span class="st">"did not"</span>, <span class="st">"they will"</span>, <span class="st">"cannot"</span>, <span class="st">"they are"</span>, <span class="st">"you are"</span>, <span class="st">"it is"</span>, <span class="st">"i have"</span>))</span>
<span id="cb104-217"><a href="#cb104-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-218"><a href="#cb104-218" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"1/11/22"</span>, <span class="st">"23"</span>), <span class="fu">c</span>(<span class="st">"january eleventh two thousand twenty two"</span>, <span class="st">"twenty three"</span>))</span>
<span id="cb104-219"><a href="#cb104-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-220"><a href="#cb104-220" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus_posts <span class="sc">%&gt;%</span> textshape<span class="sc">::</span><span class="fu">split_sentence</span>(corpus_posts, <span class="at">text.var =</span> <span class="cn">TRUE</span>)</span>
<span id="cb104-221"><a href="#cb104-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-222"><a href="#cb104-222" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">10</span>) </span>
<span id="cb104-223"><a href="#cb104-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-224"><a href="#cb104-224" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-225"><a href="#cb104-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-226"><a href="#cb104-226" aria-hidden="true" tabindex="-1"></a><span class="fu">### Testing Reverting to Data Frame</span></span>
<span id="cb104-227"><a href="#cb104-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-228"><a href="#cb104-228" aria-hidden="true" tabindex="-1"></a>This a test area to see if this will allow me to put my data back from values to data.</span>
<span id="cb104-229"><a href="#cb104-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-230"><a href="#cb104-230" aria-hidden="true" tabindex="-1"></a><span class="in">```{r testing to make a data frame}</span></span>
<span id="cb104-231"><a href="#cb104-231" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corpus)</span>
<span id="cb104-232"><a href="#cb104-232" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textshape)</span>
<span id="cb104-233"><a href="#cb104-233" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cleanNLP)</span>
<span id="cb104-234"><a href="#cb104-234" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(NLP)</span>
<span id="cb104-235"><a href="#cb104-235" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> <span class="fu">as_corpus_text</span>(corpus_posts)</span>
<span id="cb104-236"><a href="#cb104-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-237"><a href="#cb104-237" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> <span class="fu">tidy_list</span>(corpus_posts)</span>
<span id="cb104-238"><a href="#cb104-238" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> <span class="fu">Token_Tokenizer</span>(corpus_postse) <span class="co"># become tokens</span></span>
<span id="cb104-239"><a href="#cb104-239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-240"><a href="#cb104-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-241"><a href="#cb104-241" aria-hidden="true" tabindex="-1"></a>It worked somewhat! It isn't a true data table but it is back under the data category.</span>
<span id="cb104-242"><a href="#cb104-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-243"><a href="#cb104-243" aria-hidden="true" tabindex="-1"></a><span class="fu">## General Notes and Future Thoughts</span></span>
<span id="cb104-244"><a href="#cb104-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-245"><a href="#cb104-245" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The columns I had originally in the table, date and if the post was a tweet or Reddit post are missing. This isn't a problem currently, but if I would like those back I'll have to join the edited post to the table.</span>
<span id="cb104-246"><a href="#cb104-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-247"><a href="#cb104-247" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Another option is to just upload two separate csv files with one containing tweets and another containing posts.</span>
<span id="cb104-248"><a href="#cb104-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-249"><a href="#cb104-249" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>The textclean package has been super useful! It's helped to make a lot of the cleaning fairly easily. However it has left /n around for a few items. I'm unsure why, (as I believe it happened removing other languages) so I'll have to remove it later.</span>
<span id="cb104-250"><a href="#cb104-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-251"><a href="#cb104-251" aria-hidden="true" tabindex="-1"></a><span class="ss">    -   </span>Although it has been very helpful it seems to be unable to clean up everything. That's alright but a bit confusing as to why.</span>
<span id="cb104-252"><a href="#cb104-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-253"><a href="#cb104-253" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I noticed that some posts are now "NA" I'd like to remove those from my database by the next blog post.</span>
<span id="cb104-254"><a href="#cb104-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-255"><a href="#cb104-255" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I would also like to change all text to lower case.</span>
<span id="cb104-256"><a href="#cb104-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-257"><a href="#cb104-257" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I may want to use the "tm" package to clean up my data even more. Currently I feel like a lot of the harder things have been taken out.</span>
<span id="cb104-258"><a href="#cb104-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-259"><a href="#cb104-259" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>I'm a bit confused on the creating the corpus as token with the "textshape" package. It seems to work but I'm unsure of how it's working.</span>
<span id="cb104-260"><a href="#cb104-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-261"><a href="#cb104-261" aria-hidden="true" tabindex="-1"></a><span class="fu">## Looking Ahead at Tutorial 5</span></span>
<span id="cb104-262"><a href="#cb104-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-263"><a href="#cb104-263" aria-hidden="true" tabindex="-1"></a>After taking a brief look at tutorial 5 there does seem to be some very useful tips in there. Here is currently what I have. I may be able to combine some of what I was looking at and what lesson 5 has together!</span>
<span id="cb104-264"><a href="#cb104-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-265"><a href="#cb104-265" aria-hidden="true" tabindex="-1"></a><span class="in">```{r looking ahead}</span></span>
<span id="cb104-266"><a href="#cb104-266" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(devtools)</span>
<span id="cb104-267"><a href="#cb104-267" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidytext)</span>
<span id="cb104-268"><a href="#cb104-268" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plyr)</span>
<span id="cb104-269"><a href="#cb104-269" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb104-270"><a href="#cb104-270" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb104-271"><a href="#cb104-271" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quanteda)</span>
<span id="cb104-272"><a href="#cb104-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-273"><a href="#cb104-273" aria-hidden="true" tabindex="-1"></a>corpustest <span class="ot">&lt;-</span> <span class="fu">corpus</span>(corpus<span class="sc">$</span>text)</span>
<span id="cb104-274"><a href="#cb104-274" aria-hidden="true" tabindex="-1"></a>corpussummary <span class="ot">&lt;-</span> <span class="fu">summary</span>(corpustest) </span>
<span id="cb104-275"><a href="#cb104-275" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-276"><a href="#cb104-276" aria-hidden="true" tabindex="-1"></a>corpussummary<span class="sc">$</span>show <span class="ot">&lt;-</span> <span class="st">"Love is Blind Japan"</span></span>
<span id="cb104-277"><a href="#cb104-277" aria-hidden="true" tabindex="-1"></a>corpussummary<span class="sc">$</span>count <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">str_extract</span>(corpussummary, <span class="st">"[0-9]+"</span>))</span>
<span id="cb104-278"><a href="#cb104-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-279"><a href="#cb104-279" aria-hidden="true" tabindex="-1"></a>corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens</span>(corpustest, </span>
<span id="cb104-280"><a href="#cb104-280" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_punct =</span> T,</span>
<span id="cb104-281"><a href="#cb104-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">remove_numbers =</span> T)</span>
<span id="cb104-282"><a href="#cb104-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-283"><a href="#cb104-283" aria-hidden="true" tabindex="-1"></a>corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_tolower</span>(corpus_tokens)</span>
<span id="cb104-284"><a href="#cb104-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-285"><a href="#cb104-285" aria-hidden="true" tabindex="-1"></a>corpus_tokens <span class="ot">&lt;-</span> <span class="fu">tokens_select</span>(corpus_tokens, <span class="at">pattern =</span> <span class="fu">stopwords</span>(<span class="st">"en"</span>), <span class="at">selection =</span> <span class="st">"remove"</span>)</span>
<span id="cb104-286"><a href="#cb104-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-287"><a href="#cb104-287" aria-hidden="true" tabindex="-1"></a>corpus_tokens_stem <span class="ot">&lt;-</span> <span class="fu">tokens_wordstem</span>(corpus_tokens)</span>
<span id="cb104-288"><a href="#cb104-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-289"><a href="#cb104-289" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(corpus_tokens)</span>
<span id="cb104-290"><a href="#cb104-290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb104-291"><a href="#cb104-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-292"><a href="#cb104-292" aria-hidden="true" tabindex="-1"></a><span class="fu">## Full Code</span></span>
<span id="cb104-293"><a href="#cb104-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-294"><a href="#cb104-294" aria-hidden="true" tabindex="-1"></a><span class="in">```{r full current code}</span></span>
<span id="cb104-295"><a href="#cb104-295" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb104-296"><a href="#cb104-296" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cld3)</span>
<span id="cb104-297"><a href="#cb104-297" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb104-298"><a href="#cb104-298" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textclean)</span>
<span id="cb104-299"><a href="#cb104-299" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringi)</span>
<span id="cb104-300"><a href="#cb104-300" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb104-301"><a href="#cb104-301" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(textshape)</span>
<span id="cb104-302"><a href="#cb104-302" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb104-303"><a href="#cb104-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-304"><a href="#cb104-304" aria-hidden="true" tabindex="-1"></a>corpus <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">here</span>(<span class="st">"posts"</span>,<span class="st">"loveisblind_socialmedia.csv"</span>))</span>
<span id="cb104-305"><a href="#cb104-305" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus)</span>
<span id="cb104-306"><a href="#cb104-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-307"><a href="#cb104-307" aria-hidden="true" tabindex="-1"></a>corpus2 <span class="ot">&lt;-</span> <span class="fu">subset</span>(corpus, <span class="fu">detect_language</span>(corpus<span class="sc">$</span>text) <span class="sc">==</span> <span class="st">"en"</span>)</span>
<span id="cb104-308"><a href="#cb104-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-309"><a href="#cb104-309" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_internet_slang</span>(corpus2<span class="sc">$</span>text)</span>
<span id="cb104-310"><a href="#cb104-310" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-311"><a href="#cb104-311" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">replace_date</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-312"><a href="#cb104-312" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_contraction</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-313"><a href="#cb104-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_kern</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-314"><a href="#cb104-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_curly_quote</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-315"><a href="#cb104-315" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_word_elongation</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-316"><a href="#cb104-316" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_white</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-317"><a href="#cb104-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">replace_html</span>(corpus_posts) <span class="sc">%&gt;%</span> </span>
<span id="cb104-318"><a href="#cb104-318" aria-hidden="true" tabindex="-1"></a>  textshape<span class="sc">::</span><span class="fu">split_sentence</span>(corpus_posts)</span>
<span id="cb104-319"><a href="#cb104-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-320"><a href="#cb104-320" aria-hidden="true" tabindex="-1"></a>only_ascii_regexp <span class="ot">&lt;-</span> <span class="st">'[^\u0001-\u007F]+|&lt;U</span><span class="sc">\\</span><span class="st">+</span><span class="sc">\\</span><span class="st">w+&gt;'</span></span>
<span id="cb104-321"><a href="#cb104-321" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> corpus_posts <span class="sc">%&gt;%</span> </span>
<span id="cb104-322"><a href="#cb104-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(<span class="fu">regex</span>(only_ascii_regexp), <span class="st">""</span>) </span>
<span id="cb104-323"><a href="#cb104-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-324"><a href="#cb104-324" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" ?(f|ht)(tp)(s?)(://)(.*)[.|/](.*)"</span>, <span class="st">""</span>, corpus_posts)</span>
<span id="cb104-325"><a href="#cb104-325" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"it's"</span>, <span class="st">"i'm"</span>, <span class="st">"i've"</span>, <span class="st">"she's"</span>, <span class="st">"he's"</span>, <span class="st">"don't"</span>, <span class="st">"isn't"</span>, <span class="st">"didn't"</span>, <span class="st">"they'll"</span>, <span class="st">"can't"</span>, <span class="st">"they're"</span>, <span class="st">"you're"</span>, <span class="st">"EP02Iv'e"</span>), <span class="fu">c</span>(<span class="st">"it is"</span>, <span class="st">"i am"</span>, <span class="st">"i have"</span>, <span class="st">"she is"</span>, <span class="st">"he is"</span>, <span class="st">"does not"</span>, <span class="st">"is not"</span>, <span class="st">"did not"</span>, <span class="st">"they will"</span>, <span class="st">"cannot"</span>, <span class="st">"they are"</span>, <span class="st">"you are"</span>, <span class="st">"it is"</span>, <span class="st">"i have"</span>))</span>
<span id="cb104-326"><a href="#cb104-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-327"><a href="#cb104-327" aria-hidden="true" tabindex="-1"></a>corpus_posts <span class="ot">&lt;-</span> <span class="fu">mgsub</span>(corpus_posts, <span class="fu">c</span>(<span class="st">"1/11/22"</span>, <span class="st">"23"</span>), <span class="fu">c</span>(<span class="st">"january eleventh two thousand twenty two"</span>, <span class="st">"twenty three"</span>))</span>
<span id="cb104-328"><a href="#cb104-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-329"><a href="#cb104-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-330"><a href="#cb104-330" aria-hidden="true" tabindex="-1"></a>corpus_postse <span class="ot">&lt;-</span> corpus_postse <span class="sc">%&gt;%</span> textshape<span class="sc">::</span><span class="fu">split_sentence</span>(corpus_postse) </span>
<span id="cb104-331"><a href="#cb104-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-332"><a href="#cb104-332" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(corpus_posts, <span class="dv">10</span>) </span>
<span id="cb104-333"><a href="#cb104-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-334"><a href="#cb104-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>